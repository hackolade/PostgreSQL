"use strict";var Ji=Object.defineProperty;var rN=Object.getOwnPropertyDescriptor;var iN=Object.getOwnPropertyNames;var sN=Object.prototype.hasOwnProperty;var s=(t,n)=>Ji(t,"name",{value:n,configurable:!0});var aN=(t,n)=>()=>(t&&(n=t(t=0)),n);var U=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),oN=(t,n)=>{for(var i in n)Ji(t,i,{get:n[i],enumerable:!0})},uN=(t,n,i,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of iN(n))!sN.call(t,u)&&u!==i&&Ji(t,u,{get:()=>n[u],enumerable:!(a=rN(n,u))||a.enumerable});return t};var cN=t=>uN(Ji({},"__esModule",{value:!0}),t);var no=U((tD,Kf)=>{"use strict";var lN=s(({title:t,logger:n,hiddenKeys:i})=>({info(a,u={}){n.log("info",{message:a,...u},t,i)},progress(a,u="",c=""){n.progress({message:a,containerName:u,entityName:c})},error(a){n.log("error",pN(a),t)}}),"createLogger"),pN=s(t=>(t=JSON.stringify(t,Object.getOwnPropertyNames(t)),t=JSON.parse(t),t),"prepareError");Kf.exports={createLogger:lN}});var io=U(kf=>{"use strict";kf.parse=function(t,n){return new ro(t,n).parse()};var es=class es{constructor(n,i){this.source=n,this.transform=i||fN,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var n=this.source[this.position++];return n==="\\"?{value:this.source[this.position++],escaped:!0}:{value:n,escaped:!1}}record(n){this.recorded.push(n)}newEntry(n){var i;(this.recorded.length>0||n)&&(i=this.recorded.join(""),i==="NULL"&&!n&&(i=null),i!==null&&(i=this.transform(i)),this.entries.push(i),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var n=this.nextCharacter();if(n.value==="=")break}}parse(n){var i,a,u;for(this.consumeDimensions();!this.isEof();)if(i=this.nextCharacter(),i.value==="{"&&!u)this.dimension++,this.dimension>1&&(a=new es(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(i.value==="}"&&!u){if(this.dimension--,!this.dimension&&(this.newEntry(),n))return this.entries}else i.value==='"'&&!i.escaped?(u&&this.newEntry(!0),u=!u):i.value===","&&!u?this.newEntry():this.record(i.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};s(es,"ArrayParser");var ro=es;function fN(t){return t}s(fN,"identity")});var so=U((sD,Gf)=>{var dN=io();Gf.exports={create:function(t,n){return{parse:function(){return dN.parse(t,n)}}}}});var Vf=U((aD,Hf)=>{"use strict";var mN=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,hN=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,gN=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,_N=/^-?infinity$/;Hf.exports=s(function(n){if(_N.test(n))return Number(n.replace("i","I"));var i=mN.exec(n);if(!i)return yN(n)||null;var a=!!i[8],u=parseInt(i[1],10);a&&(u=Wf(u));var c=parseInt(i[2],10)-1,p=i[3],d=parseInt(i[4],10),h=parseInt(i[5],10),g=parseInt(i[6],10),T=i[7];T=T?1e3*parseFloat(T):0;var y,E=EN(n);return E!=null?(y=new Date(Date.UTC(u,c,p,d,h,g,T)),ao(u)&&y.setUTCFullYear(u),E!==0&&y.setTime(y.getTime()-E)):(y=new Date(u,c,p,d,h,g,T),ao(u)&&y.setFullYear(u)),y},"parseDate");function yN(t){var n=hN.exec(t);if(n){var i=parseInt(n[1],10),a=!!n[4];a&&(i=Wf(i));var u=parseInt(n[2],10)-1,c=n[3],p=new Date(i,u,c);return ao(i)&&p.setFullYear(i),p}}s(yN,"getDate");function EN(t){if(t.endsWith("+00"))return 0;var n=gN.exec(t.split(" ")[1]);if(n){var i=n[1];if(i==="Z")return 0;var a=i==="-"?-1:1,u=parseInt(n[2],10)*3600+parseInt(n[3]||0,10)*60+parseInt(n[4]||0,10);return u*a*1e3}}s(EN,"timeZoneOffset");function Wf(t){return-(t-1)}s(Wf,"bcYearToNegativeYear");function ao(t){return t>=0&&t<100}s(ao,"is0To99")});var Qf=U((uD,Yf)=>{Yf.exports=SN;var TN=Object.prototype.hasOwnProperty;function SN(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)TN.call(i,a)&&(t[a]=i[a])}return t}s(SN,"extend")});var Zf=U((lD,Xf)=>{"use strict";var AN=Qf();Xf.exports=ur;function ur(t){if(!(this instanceof ur))return new ur(t);AN(this,LN(t))}s(ur,"PostgresInterval");var CN=["seconds","minutes","hours","days","months","years"];ur.prototype.toPostgres=function(){var t=CN.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(n){var i=this[n]||0;return n==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),i+" "+n},this).join(" ")};var vN={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},NN=["years","months","days"],bN=["hours","minutes","seconds"];ur.prototype.toISOString=ur.prototype.toISO=function(){var t=NN.map(i,this).join(""),n=bN.map(i,this).join("");return"P"+t+"T"+n;function i(a){var u=this[a]||0;return a==="seconds"&&this.milliseconds&&(u=(u+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),u+vN[a]}};var oo="([+-]?\\d+)",IN=oo+"\\s+years?",wN=oo+"\\s+mons?",ON=oo+"\\s+days?",RN="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",xN=new RegExp([IN,wN,ON,RN].map(function(t){return"("+t+")?"}).join("\\s*")),zf={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},DN=["hours","minutes","seconds","milliseconds"];function qN(t){var n=t+"000000".slice(t.length);return parseInt(n,10)/1e3}s(qN,"parseMilliseconds");function LN(t){if(!t)return{};var n=xN.exec(t),i=n[8]==="-";return Object.keys(zf).reduce(function(a,u){var c=zf[u],p=n[c];return!p||(p=u==="milliseconds"?qN(p):parseInt(p,10),!p)||(i&&~DN.indexOf(u)&&(p*=-1),a[u]=p),a},{})}s(LN,"parse")});var Jf=U((fD,jf)=>{"use strict";jf.exports=s(function(n){if(/^\\x/.test(n))return new Buffer(n.substr(2),"hex");for(var i="",a=0;a<n.length;)if(n[a]!=="\\")i+=n[a],++a;else if(/[0-7]{3}/.test(n.substr(a+1,3)))i+=String.fromCharCode(parseInt(n.substr(a+1,3),8)),a+=4;else{for(var u=1;a+u<n.length&&n[a+u]==="\\";)u++;for(var c=0;c<Math.floor(u/2);++c)i+="\\";a+=Math.floor(u/2)*2}return new Buffer(i,"binary")},"parseBytea")});var ad=U((mD,sd)=>{var kr=io(),Gr=so(),ts=Vf(),td=Zf(),nd=Jf();function ns(t){return s(function(i){return i===null?i:t(i)},"nullAllowed")}s(ns,"allowNull");function rd(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}s(rd,"parseBool");function PN(t){return t?kr.parse(t,rd):null}s(PN,"parseBoolArray");function MN(t){return parseInt(t,10)}s(MN,"parseBaseTenInt");function uo(t){return t?kr.parse(t,ns(MN)):null}s(uo,"parseIntegerArray");function FN(t){return t?kr.parse(t,ns(function(n){return id(n).trim()})):null}s(FN,"parseBigIntegerArray");var UN=s(function(t){if(!t)return null;var n=Gr.create(t,function(i){return i!==null&&(i=fo(i)),i});return n.parse()},"parsePointArray"),co=s(function(t){if(!t)return null;var n=Gr.create(t,function(i){return i!==null&&(i=parseFloat(i)),i});return n.parse()},"parseFloatArray"),Kt=s(function(t){if(!t)return null;var n=Gr.create(t);return n.parse()},"parseStringArray"),lo=s(function(t){if(!t)return null;var n=Gr.create(t,function(i){return i!==null&&(i=ts(i)),i});return n.parse()},"parseDateArray"),BN=s(function(t){if(!t)return null;var n=Gr.create(t,function(i){return i!==null&&(i=td(i)),i});return n.parse()},"parseIntervalArray"),$N=s(function(t){return t?kr.parse(t,ns(nd)):null},"parseByteAArray"),po=s(function(t){return parseInt(t,10)},"parseInteger"),id=s(function(t){var n=String(t);return/^\d+$/.test(n)?n:t},"parseBigInteger"),ed=s(function(t){return t?kr.parse(t,ns(JSON.parse)):null},"parseJsonArray"),fo=s(function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},"parsePoint"),KN=s(function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var n="(",i="",a=!1,u=2;u<t.length-1;u++){if(a||(n+=t[u]),t[u]===")"){a=!0;continue}else if(!a)continue;t[u]!==","&&(i+=t[u])}var c=fo(n);return c.radius=parseFloat(i),c},"parseCircle"),kN=s(function(t){t(20,id),t(21,po),t(23,po),t(26,po),t(700,parseFloat),t(701,parseFloat),t(16,rd),t(1082,ts),t(1114,ts),t(1184,ts),t(600,fo),t(651,Kt),t(718,KN),t(1e3,PN),t(1001,$N),t(1005,uo),t(1007,uo),t(1028,uo),t(1016,FN),t(1017,UN),t(1021,co),t(1022,co),t(1231,co),t(1014,Kt),t(1015,Kt),t(1008,Kt),t(1009,Kt),t(1040,Kt),t(1041,Kt),t(1115,lo),t(1182,lo),t(1185,lo),t(1186,td),t(1187,BN),t(17,nd),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,ed),t(3807,ed),t(3907,Kt),t(2951,Kt),t(791,Kt),t(1183,Kt),t(1270,Kt)},"init");sd.exports={init:kN}});var ud=U((gD,od)=>{"use strict";var yt=1e6;function GN(t){var n=t.readInt32BE(0),i=t.readUInt32BE(4),a="";n<0&&(n=~n+(i===0),i=~i+1>>>0,a="-");var u="",c,p,d,h,g,T;{if(c=n%yt,n=n/yt>>>0,p=4294967296*c+i,i=p/yt>>>0,d=""+(p-yt*i),i===0&&n===0)return a+d+u;for(h="",g=6-d.length,T=0;T<g;T++)h+="0";u=h+d+u}{if(c=n%yt,n=n/yt>>>0,p=4294967296*c+i,i=p/yt>>>0,d=""+(p-yt*i),i===0&&n===0)return a+d+u;for(h="",g=6-d.length,T=0;T<g;T++)h+="0";u=h+d+u}{if(c=n%yt,n=n/yt>>>0,p=4294967296*c+i,i=p/yt>>>0,d=""+(p-yt*i),i===0&&n===0)return a+d+u;for(h="",g=6-d.length,T=0;T<g;T++)h+="0";u=h+d+u}return c=n%yt,p=4294967296*c+i,d=""+p%yt,a+d+u}s(GN,"readInt8");od.exports=GN});var dd=U((yD,fd)=>{var WN=ud(),De=s(function(t,n,i,a,u){i=i||0,a=a||!1,u=u||function(S,C,x){return S*Math.pow(2,x)+C};var c=i>>3,p=s(function(S){return a?~S&255:S},"inv"),d=255,h=8-i%8;n<h&&(d=255<<8-n&255,h=n),i&&(d=d>>i%8);var g=0;i%8+n>=8&&(g=u(0,p(t[c])&d,h));for(var T=n+i>>3,y=c+1;y<T;y++)g=u(g,p(t[y]),8);var E=(n+i)%8;return E>0&&(g=u(g,p(t[T])>>8-E,E)),g},"parseBits"),pd=s(function(t,n,i){var a=Math.pow(2,i-1)-1,u=De(t,1),c=De(t,i,1);if(c===0)return 0;var p=1,d=s(function(g,T,y){g===0&&(g=1);for(var E=1;E<=y;E++)p/=2,(T&1<<y-E)>0&&(g+=p);return g},"parsePrecisionBits"),h=De(t,n,i+1,!1,d);return c==Math.pow(2,i+1)-1?h===0?u===0?1/0:-1/0:NaN:(u===0?1:-1)*Math.pow(2,c-a)*h},"parseFloatFromBits"),HN=s(function(t){return De(t,1)==1?-1*(De(t,15,1,!0)+1):De(t,15,1)},"parseInt16"),cd=s(function(t){return De(t,1)==1?-1*(De(t,31,1,!0)+1):De(t,31,1)},"parseInt32"),VN=s(function(t){return pd(t,23,8)},"parseFloat32"),YN=s(function(t){return pd(t,52,11)},"parseFloat64"),QN=s(function(t){var n=De(t,16,32);if(n==49152)return NaN;for(var i=Math.pow(1e4,De(t,16,16)),a=0,u=[],c=De(t,16),p=0;p<c;p++)a+=De(t,16,64+16*p)*i,i/=1e4;var d=Math.pow(10,De(t,16,48));return(n===0?1:-1)*Math.round(a*d)/d},"parseNumeric"),ld=s(function(t,n){var i=De(n,1),a=De(n,63,1),u=new Date((i===0?1:-1)*a/1e3+9466848e5);return t||u.setTime(u.getTime()+u.getTimezoneOffset()*6e4),u.usec=a%1e3,u.getMicroSeconds=function(){return this.usec},u.setMicroSeconds=function(c){this.usec=c},u.getUTCMicroSeconds=function(){return this.usec},u},"parseDate"),Wr=s(function(t){for(var n=De(t,32),i=De(t,32,32),a=De(t,32,64),u=96,c=[],p=0;p<n;p++)c[p]=De(t,32,u),u+=32,u+=32;var d=s(function(g){var T=De(t,32,u);if(u+=32,T==4294967295)return null;var y;if(g==23||g==20)return y=De(t,T*8,u),u+=T*8,y;if(g==25)return y=t.toString(this.encoding,u>>3,(u+=T<<3)>>3),y;console.log("ERROR: ElementType not implemented: "+g)},"parseElement"),h=s(function(g,T){var y=[],E;if(g.length>1){var S=g.shift();for(E=0;E<S;E++)y[E]=h(g,T);g.unshift(S)}else for(E=0;E<g[0];E++)y[E]=d(T);return y},"parse");return h(c,a)},"parseArray"),zN=s(function(t){return t.toString("utf8")},"parseText"),XN=s(function(t){return t===null?null:De(t,8)>0},"parseBool"),ZN=s(function(t){t(20,WN),t(21,HN),t(23,cd),t(26,cd),t(1700,QN),t(700,VN),t(701,YN),t(16,XN),t(1114,ld.bind(null,!1)),t(1184,ld.bind(null,!0)),t(1e3,Wr),t(1007,Wr),t(1016,Wr),t(1008,Wr),t(1009,Wr),t(25,zN)},"init");fd.exports={init:ZN}});var hd=U((TD,md)=>{md.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Yr=U(Vr=>{var jN=ad(),JN=dd(),eb=so(),tb=hd();Vr.getTypeParser=nb;Vr.setTypeParser=rb;Vr.arrayParser=eb;Vr.builtins=tb;var Hr={text:{},binary:{}};function gd(t){return String(t)}s(gd,"noParse");function nb(t,n){return n=n||"text",Hr[n]&&Hr[n][t]||gd}s(nb,"getTypeParser");function rb(t,n,i){typeof n=="function"&&(i=n,n="text"),Hr[n][t]=i}s(rb,"setTypeParser");jN.init(function(t,n){Hr.text[t]=n});JN.init(function(t,n){Hr.binary[t]=n})});var Qr=U((CD,mo)=>{"use strict";mo.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var cr=Yr(),ib=cr.getTypeParser(20,"text"),sb=cr.getTypeParser(1016,"text");mo.exports.__defineSetter__("parseInt8",function(t){cr.setTypeParser(20,"text",t?cr.getTypeParser(23,"text"):ib),cr.setTypeParser(1016,"text",t?cr.getTypeParser(1007,"text"):sb)})});var zr=U((vD,yd)=>{"use strict";var ab=Qr();function ob(t){var n=t.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+n+'"'}s(ob,"escapeElement");function _d(t){for(var n="{",i=0;i<t.length;i++)if(i>0&&(n=n+","),t[i]===null||typeof t[i]>"u")n=n+"NULL";else if(Array.isArray(t[i]))n=n+_d(t[i]);else if(ArrayBuffer.isView(t[i])){var a=t[i];if(!(a instanceof Buffer)){var u=Buffer.from(a.buffer,a.byteOffset,a.byteLength);u.length===a.byteLength?a=u:a=u.slice(a.byteOffset,a.byteOffset+a.byteLength)}n+="\\\\x"+a.toString("hex")}else n+=ob(rs(t[i]));return n=n+"}",n}s(_d,"arrayString");var rs=s(function(t,n){if(t==null)return null;if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){var i=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return i.length===t.byteLength?i:i.slice(t.byteOffset,t.byteOffset+t.byteLength)}return t instanceof Date?ab.parseInputDatesAsUTC?lb(t):cb(t):Array.isArray(t)?_d(t):typeof t=="object"?ub(t,n):t.toString()},"prepareValue");function ub(t,n){if(t&&typeof t.toPostgres=="function"){if(n=n||[],n.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return n.push(t),rs(t.toPostgres(rs),n)}return JSON.stringify(t)}s(ub,"prepareObject");function at(t,n){for(t=""+t;t.length<n;)t="0"+t;return t}s(at,"pad");function cb(t){var n=-t.getTimezoneOffset(),i=t.getFullYear(),a=i<1;a&&(i=Math.abs(i)+1);var u=at(i,4)+"-"+at(t.getMonth()+1,2)+"-"+at(t.getDate(),2)+"T"+at(t.getHours(),2)+":"+at(t.getMinutes(),2)+":"+at(t.getSeconds(),2)+"."+at(t.getMilliseconds(),3);return n<0?(u+="-",n*=-1):u+="+",u+=at(Math.floor(n/60),2)+":"+at(n%60,2),a&&(u+=" BC"),u}s(cb,"dateToString");function lb(t){var n=t.getUTCFullYear(),i=n<1;i&&(n=Math.abs(n)+1);var a=at(n,4)+"-"+at(t.getUTCMonth()+1,2)+"-"+at(t.getUTCDate(),2)+"T"+at(t.getUTCHours(),2)+":"+at(t.getUTCMinutes(),2)+":"+at(t.getUTCSeconds(),2)+"."+at(t.getUTCMilliseconds(),3);return a+="+00:00",i&&(a+=" BC"),a}s(lb,"dateToStringUTC");function pb(t,n,i){return t=typeof t=="string"?{text:t}:t,n&&(typeof n=="function"?t.callback=n:t.values=n),i&&(t.callback=i),t}s(pb,"normalizeQueryConfig");var fb=s(function(t){return'"'+t.replace(/"/g,'""')+'"'},"escapeIdentifier"),db=s(function(t){for(var n=!1,i="'",a=0;a<t.length;a++){var u=t[a];u==="'"?i+=u+u:u==="\\"?(i+=u+u,n=!0):i+=u}return i+="'",n===!0&&(i=" E"+i),i},"escapeLiteral");yd.exports={prepareValue:s(function(n){return rs(n)},"prepareValueWrapper"),normalizeQueryConfig:pb,escapeIdentifier:fb,escapeLiteral:db}});var Td=U((bD,Ed)=>{"use strict";var Xr=require("crypto");function ho(t){return Xr.createHash("md5").update(t,"utf-8").digest("hex")}s(ho,"md5");function mb(t,n,i){var a=ho(n+t),u=ho(Buffer.concat([Buffer.from(a),i]));return"md5"+u}s(mb,"postgresMd5PasswordHash");function hb(t){return Xr.createHash("sha256").update(t).digest()}s(hb,"sha256");function gb(t,n){return Xr.createHmac("sha256",t).update(n).digest()}s(gb,"hmacSha256");async function _b(t,n,i){return Xr.pbkdf2Sync(t,n,i,32,"sha256")}s(_b,"deriveKey");Ed.exports={postgresMd5PasswordHash:mb,randomBytes:Xr.randomBytes,deriveKey:_b,sha256:hb,hmacSha256:gb,md5:ho}});var vd=U((wD,Cd)=>{var Sd=require("crypto");Cd.exports={postgresMd5PasswordHash:Eb,randomBytes:yb,deriveKey:Ab,sha256:Tb,hmacSha256:Sb,md5:go};var Ad=Sd.webcrypto||globalThis.crypto,lr=Ad.subtle,_o=new TextEncoder;function yb(t){return Ad.getRandomValues(Buffer.alloc(t))}s(yb,"randomBytes");async function go(t){try{return Sd.createHash("md5").update(t,"utf-8").digest("hex")}catch{let i=typeof t=="string"?_o.encode(t):t,a=await lr.digest("MD5",i);return Array.from(new Uint8Array(a)).map(u=>u.toString(16).padStart(2,"0")).join("")}}s(go,"md5");async function Eb(t,n,i){var a=await go(n+t),u=await go(Buffer.concat([Buffer.from(a),i]));return"md5"+u}s(Eb,"postgresMd5PasswordHash");async function Tb(t){return await lr.digest("SHA-256",t)}s(Tb,"sha256");async function Sb(t,n){let i=await lr.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await lr.sign("HMAC",i,_o.encode(n))}s(Sb,"hmacSha256");async function Ab(t,n,i){let a=await lr.importKey("raw",_o.encode(t),"PBKDF2",!1,["deriveBits"]),u={name:"PBKDF2",hash:"SHA-256",salt:n,iterations:i};return await lr.deriveBits(u,a,32*8,["deriveBits"])}s(Ab,"deriveKey")});var Eo=U((RD,yo)=>{"use strict";var Cb=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;Cb?yo.exports=Td():yo.exports=vd()});var wd=U((xD,Id)=>{"use strict";var Gn=Eo();function vb(t){if(t.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let n=Gn.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:n,response:"n,,n=*,r="+n,message:"SASLInitialResponse"}}s(vb,"startSession");async function Nb(t,n,i){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(n==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof i!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let a=wb(i);if(a.nonce.startsWith(t.clientNonce)){if(a.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var u="n=*,r="+t.clientNonce,c="r="+a.nonce+",s="+a.salt+",i="+a.iteration,p="c=biws,r="+a.nonce,d=u+","+c+","+p,h=Buffer.from(a.salt,"base64"),g=await Gn.deriveKey(n,h,a.iteration),T=await Gn.hmacSha256(g,"Client Key"),y=await Gn.sha256(T),E=await Gn.hmacSha256(y,d),S=Rb(Buffer.from(T),Buffer.from(E)).toString("base64"),C=await Gn.hmacSha256(g,"Server Key"),x=await Gn.hmacSha256(C,d);t.message="SASLResponse",t.serverSignature=Buffer.from(x).toString("base64"),t.response=p+",p="+S}s(Nb,"continueSession");function bb(t,n){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof n!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:i}=Ob(n);if(i!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}s(bb,"finalizeSession");function Ib(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((n,i)=>t.charCodeAt(i)).every(n=>n>=33&&n<=43||n>=45&&n<=126)}s(Ib,"isPrintableChars");function Nd(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}s(Nd,"isBase64");function bd(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(n=>{if(!/^.=/.test(n))throw new Error("SASL: Invalid attribute pair entry");let i=n[0],a=n.substring(2);return[i,a]}))}s(bd,"parseAttributePairs");function wb(t){let n=bd(t),i=n.get("r");if(i){if(!Ib(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let a=n.get("s");if(a){if(!Nd(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let u=n.get("i");if(u){if(!/^[1-9][0-9]*$/.test(u))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let c=parseInt(u,10);return{nonce:i,salt:a,iteration:c}}s(wb,"parseServerFirstMessage");function Ob(t){let i=bd(t).get("v");if(i){if(!Nd(i))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:i}}s(Ob,"parseServerFinalMessage");function Rb(t,n){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(n))throw new TypeError("second argument must be a Buffer");if(t.length!==n.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((i,a)=>t[a]^n[a]))}s(Rb,"xorBuffers");Id.exports={startSession:vb,continueSession:Nb,finalizeSession:bb}});var To=U((qD,Od)=>{"use strict";var xb=Yr();function is(t){this._types=t||xb,this.text={},this.binary={}}s(is,"TypeOverrides");is.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};is.prototype.setTypeParser=function(t,n,i){typeof n=="function"&&(i=n,n="text"),this.getOverrides(n)[t]=i};is.prototype.getTypeParser=function(t,n){return n=n||"text",this.getOverrides(n)[t]||this._types.getTypeParser(t,n)};Od.exports=is});var xd=U((PD,Rd)=>{"use strict";function So(t){if(t.charAt(0)==="/"){let d=t.split(" ");return{host:d[0],database:d[1]}}let n={},i,a=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/\%25(\d\d)/g,"%$1"));try{i=new URL(t,"postgres://base")}catch{i=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),a=!0}for(let d of i.searchParams.entries())n[d[0]]=d[1];if(n.user=n.user||decodeURIComponent(i.username),n.password=n.password||decodeURIComponent(i.password),i.protocol=="socket:")return n.host=decodeURI(i.pathname),n.database=i.searchParams.get("db"),n.client_encoding=i.searchParams.get("encoding"),n;let u=a?"":i.hostname;n.host?u&&/^%2f/i.test(u)&&(i.pathname=u+i.pathname):n.host=decodeURIComponent(u),n.port||(n.port=i.port);let c=i.pathname.slice(1)||null;n.database=c?decodeURI(c):null,(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={});let p=n.sslcert||n.sslkey||n.sslrootcert?require("fs"):null;switch(n.sslcert&&(n.ssl.cert=p.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=p.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=p.readFileSync(n.sslrootcert).toString()),n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}s(So,"parse");Rd.exports=So;So.parse=So});var vo=U((FD,Ld)=>{"use strict";var Db=require("dns"),qd=Qr(),Dd=xd().parse,pt=s(function(t,n,i){return i===void 0?i=process.env["PG"+t.toUpperCase()]:i===!1||(i=process.env[i]),n[t]||i||qd[t]},"val"),qb=s(function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return qd.ssl},"readSSLConfigFromEnvironment"),pr=s(function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),kt=s(function(t,n,i){var a=n[i];a!=null&&t.push(i+"="+pr(a))},"add"),Co=class Co{constructor(n){n=typeof n=="string"?Dd(n):n||{},n.connectionString&&(n=Object.assign({},n,Dd(n.connectionString))),this.user=pt("user",n),this.database=pt("database",n),this.database===void 0&&(this.database=this.user),this.port=parseInt(pt("port",n),10),this.host=pt("host",n),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:pt("password",n)}),this.binary=pt("binary",n),this.options=pt("options",n),this.ssl=typeof n.ssl>"u"?qb():n.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=pt("client_encoding",n),this.replication=pt("replication",n),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=pt("application_name",n,"PGAPPNAME"),this.fallback_application_name=pt("fallback_application_name",n,!1),this.statement_timeout=pt("statement_timeout",n,!1),this.lock_timeout=pt("lock_timeout",n,!1),this.idle_in_transaction_session_timeout=pt("idle_in_transaction_session_timeout",n,!1),this.query_timeout=pt("query_timeout",n,!1),n.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(n.connectionTimeoutMillis/1e3),n.keepAlive===!1?this.keepalives=0:n.keepAlive===!0&&(this.keepalives=1),typeof n.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(n.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(n){var i=[];kt(i,this,"user"),kt(i,this,"password"),kt(i,this,"port"),kt(i,this,"application_name"),kt(i,this,"fallback_application_name"),kt(i,this,"connect_timeout"),kt(i,this,"options");var a=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(kt(i,a,"sslmode"),kt(i,a,"sslca"),kt(i,a,"sslkey"),kt(i,a,"sslcert"),kt(i,a,"sslrootcert"),this.database&&i.push("dbname="+pr(this.database)),this.replication&&i.push("replication="+pr(this.replication)),this.host&&i.push("host="+pr(this.host)),this.isDomainSocket)return n(null,i.join(" "));this.client_encoding&&i.push("client_encoding="+pr(this.client_encoding)),Db.lookup(this.host,function(u,c){return u?n(u,null):(i.push("hostaddr="+pr(c)),n(null,i.join(" ")))})}};s(Co,"ConnectionParameters");var Ao=Co;Ld.exports=Ao});var Fd=U((BD,Md)=>{"use strict";var Lb=Yr(),Pd=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,bo=class bo{constructor(n,i){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=i,this.RowCtor=null,this.rowAsArray=n==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(n){var i;n.text?i=Pd.exec(n.text):i=Pd.exec(n.command),i&&(this.command=i[1],i[3]?(this.oid=parseInt(i[2],10),this.rowCount=parseInt(i[3],10)):i[2]&&(this.rowCount=parseInt(i[2],10)))}_parseRowAsArray(n){for(var i=new Array(n.length),a=0,u=n.length;a<u;a++){var c=n[a];c!==null?i[a]=this._parsers[a](c):i[a]=null}return i}parseRow(n){for(var i={...this._prebuiltEmptyResultObject},a=0,u=n.length;a<u;a++){var c=n[a],p=this.fields[a].name;c!==null?i[p]=this._parsers[a](c):i[p]=null}return i}addRow(n){this.rows.push(n)}addFields(n){this.fields=n,this.fields.length&&(this._parsers=new Array(n.length));for(var i={},a=0;a<n.length;a++){var u=n[a];i[u.name]=null,this._types?this._parsers[a]=this._types.getTypeParser(u.dataTypeID,u.format||"text"):this._parsers[a]=Lb.getTypeParser(u.dataTypeID,u.format||"text")}this._prebuiltEmptyResultObject={...i}}};s(bo,"Result");var No=bo;Md.exports=No});var Kd=U((KD,$d)=>{"use strict";var{EventEmitter:Pb}=require("events"),Ud=Fd(),Bd=zr(),wo=class wo extends Pb{constructor(n,i,a){super(),n=Bd.normalizeQueryConfig(n,i,a),this.text=n.text,this.values=n.values,this.rows=n.rows,this.types=n.types,this.name=n.name,this.queryMode=n.queryMode,this.binary=n.binary,this.portal=n.portal||"",this.callback=n.callback,this._rowMode=n.rowMode,process.domain&&n.callback&&(this.callback=process.domain.bind(n.callback)),this._result=new Ud(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Ud(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(n){this._checkForMultirow(),this._result.addFields(n.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(n){let i;if(!this._canceledDueToError){try{i=this._result.parseRow(n.fields)}catch(a){this._canceledDueToError=a;return}this.emit("row",i,this._result),this._accumulateRows&&this._result.addRow(i)}}handleCommandComplete(n,i){this._checkForMultirow(),this._result.addCommandComplete(n),this.rows&&i.sync()}handleEmptyQuery(n){this.rows&&n.sync()}handleError(n,i){if(this._canceledDueToError&&(n=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(n);this.emit("error",n)}handleReadyForQuery(n){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,n);if(this.callback)try{this.callback(null,this._results)}catch(i){process.nextTick(()=>{throw i})}this.emit("end",this._results)}submit(n){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let i=n.parsedStatements[this.name];return this.text&&i&&this.text!==i?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(n):n.query(this.text),null)}hasBeenParsed(n){return this.name&&n.parsedStatements[this.name]}handlePortalSuspended(n){this._getRows(n,this.rows)}_getRows(n,i){n.execute({portal:this.portal,rows:i}),i?n.flush():n.sync()}prepare(n){this.hasBeenParsed(n)||n.parse({text:this.text,name:this.name,types:this.types});try{n.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:Bd.prepareValue})}catch(i){this.handleError(i,n);return}n.describe({type:"P",name:this.portal||""}),this._getRows(n,this.rows)}handleCopyInResponse(n){n.sendCopyFail("No source stream defined")}handleCopyData(n,i){}};s(wo,"Query");var Io=wo;$d.exports=Io});var ru=U(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.NoticeMessage=ne.DataRowMessage=ne.CommandCompleteMessage=ne.ReadyForQueryMessage=ne.NotificationResponseMessage=ne.BackendKeyDataMessage=ne.AuthenticationMD5Password=ne.ParameterStatusMessage=ne.ParameterDescriptionMessage=ne.RowDescriptionMessage=ne.Field=ne.CopyResponse=ne.CopyDataMessage=ne.DatabaseError=ne.copyDone=ne.emptyQuery=ne.replicationStart=ne.portalSuspended=ne.noData=ne.closeComplete=ne.bindComplete=ne.parseComplete=void 0;ne.parseComplete={name:"parseComplete",length:5};ne.bindComplete={name:"bindComplete",length:5};ne.closeComplete={name:"closeComplete",length:5};ne.noData={name:"noData",length:5};ne.portalSuspended={name:"portalSuspended",length:5};ne.replicationStart={name:"replicationStart",length:4};ne.emptyQuery={name:"emptyQuery",length:4};ne.copyDone={name:"copyDone",length:4};var Go=class Go extends Error{constructor(n,i,a){super(n),this.length=i,this.name=a}};s(Go,"DatabaseError");var Oo=Go;ne.DatabaseError=Oo;var Wo=class Wo{constructor(n,i){this.length=n,this.chunk=i,this.name="copyData"}};s(Wo,"CopyDataMessage");var Ro=Wo;ne.CopyDataMessage=Ro;var Ho=class Ho{constructor(n,i,a,u){this.length=n,this.name=i,this.binary=a,this.columnTypes=new Array(u)}};s(Ho,"CopyResponse");var xo=Ho;ne.CopyResponse=xo;var Vo=class Vo{constructor(n,i,a,u,c,p,d){this.name=n,this.tableID=i,this.columnID=a,this.dataTypeID=u,this.dataTypeSize=c,this.dataTypeModifier=p,this.format=d}};s(Vo,"Field");var Do=Vo;ne.Field=Do;var Yo=class Yo{constructor(n,i){this.length=n,this.fieldCount=i,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};s(Yo,"RowDescriptionMessage");var qo=Yo;ne.RowDescriptionMessage=qo;var Qo=class Qo{constructor(n,i){this.length=n,this.parameterCount=i,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};s(Qo,"ParameterDescriptionMessage");var Lo=Qo;ne.ParameterDescriptionMessage=Lo;var zo=class zo{constructor(n,i,a){this.length=n,this.parameterName=i,this.parameterValue=a,this.name="parameterStatus"}};s(zo,"ParameterStatusMessage");var Po=zo;ne.ParameterStatusMessage=Po;var Xo=class Xo{constructor(n,i){this.length=n,this.salt=i,this.name="authenticationMD5Password"}};s(Xo,"AuthenticationMD5Password");var Mo=Xo;ne.AuthenticationMD5Password=Mo;var Zo=class Zo{constructor(n,i,a){this.length=n,this.processID=i,this.secretKey=a,this.name="backendKeyData"}};s(Zo,"BackendKeyDataMessage");var Fo=Zo;ne.BackendKeyDataMessage=Fo;var jo=class jo{constructor(n,i,a,u){this.length=n,this.processId=i,this.channel=a,this.payload=u,this.name="notification"}};s(jo,"NotificationResponseMessage");var Uo=jo;ne.NotificationResponseMessage=Uo;var Jo=class Jo{constructor(n,i){this.length=n,this.status=i,this.name="readyForQuery"}};s(Jo,"ReadyForQueryMessage");var Bo=Jo;ne.ReadyForQueryMessage=Bo;var eu=class eu{constructor(n,i){this.length=n,this.text=i,this.name="commandComplete"}};s(eu,"CommandCompleteMessage");var $o=eu;ne.CommandCompleteMessage=$o;var tu=class tu{constructor(n,i){this.length=n,this.fields=i,this.name="dataRow",this.fieldCount=i.length}};s(tu,"DataRowMessage");var Ko=tu;ne.DataRowMessage=Ko;var nu=class nu{constructor(n,i){this.length=n,this.message=i,this.name="notice"}};s(nu,"NoticeMessage");var ko=nu;ne.NoticeMessage=ko});var kd=U(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.Writer=void 0;var su=class su{constructor(n=256){this.size=n,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(n)}ensure(n){var i=this.buffer.length-this.offset;if(i<n){var a=this.buffer,u=a.length+(a.length>>1)+n;this.buffer=Buffer.allocUnsafe(u),a.copy(this.buffer)}}addInt32(n){return this.ensure(4),this.buffer[this.offset++]=n>>>24&255,this.buffer[this.offset++]=n>>>16&255,this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addInt16(n){return this.ensure(2),this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addCString(n){if(!n)this.ensure(1);else{var i=Buffer.byteLength(n);this.ensure(i+1),this.buffer.write(n,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(n=""){var i=Buffer.byteLength(n);return this.ensure(i),this.buffer.write(n,this.offset),this.offset+=i,this}add(n){return this.ensure(n.length),n.copy(this.buffer,this.offset),this.offset+=n.length,this}join(n){if(n){this.buffer[this.headerPosition]=n;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(n?0:5,this.offset)}flush(n){var i=this.join(n);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),i}};s(su,"Writer");var iu=su;ss.Writer=iu});var Wd=U(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.serialize=void 0;var au=kd(),qe=new au.Writer,Mb=s(t=>{qe.addInt16(3).addInt16(0);for(let a of Object.keys(t))qe.addCString(a).addCString(t[a]);qe.addCString("client_encoding").addCString("UTF8");var n=qe.addCString("").flush(),i=n.length+4;return new au.Writer().addInt32(i).add(n).flush()},"startup"),Fb=s(()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},"requestSsl"),Ub=s(t=>qe.addCString(t).flush(112),"password"),Bb=s(function(t,n){return qe.addCString(t).addInt32(Buffer.byteLength(n)).addString(n),qe.flush(112)},"sendSASLInitialResponseMessage"),$b=s(function(t){return qe.addString(t).flush(112)},"sendSCRAMClientFinalMessage"),Kb=s(t=>qe.addCString(t).flush(81),"query"),Gd=[],kb=s(t=>{let n=t.name||"";n.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",n,n.length),console.error("This can cause conflicts and silent errors executing queries"));let i=t.types||Gd;for(var a=i.length,u=qe.addCString(n).addCString(t.text).addInt16(a),c=0;c<a;c++)u.addInt32(i[c]);return qe.flush(80)},"parse"),fr=new au.Writer,Gb=s(function(t,n){for(let i=0;i<t.length;i++){let a=n?n(t[i],i):t[i];a==null?(qe.addInt16(0),fr.addInt32(-1)):a instanceof Buffer?(qe.addInt16(1),fr.addInt32(a.length),fr.add(a)):(qe.addInt16(0),fr.addInt32(Buffer.byteLength(a)),fr.addString(a))}},"writeValues"),Wb=s((t={})=>{let n=t.portal||"",i=t.statement||"",a=t.binary||!1,u=t.values||Gd,c=u.length;return qe.addCString(n).addCString(i),qe.addInt16(c),Gb(u,t.valueMapper),qe.addInt16(c),qe.add(fr.flush()),qe.addInt16(a?1:0),qe.flush(66)},"bind"),Hb=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Vb=s(t=>{if(!t||!t.portal&&!t.rows)return Hb;let n=t.portal||"",i=t.rows||0,a=Buffer.byteLength(n),u=4+a+1+4,c=Buffer.allocUnsafe(1+u);return c[0]=69,c.writeInt32BE(u,1),c.write(n,5,"utf-8"),c[a+5]=0,c.writeUInt32BE(i,c.length-4),c},"execute"),Yb=s((t,n)=>{let i=Buffer.allocUnsafe(16);return i.writeInt32BE(16,0),i.writeInt16BE(1234,4),i.writeInt16BE(5678,6),i.writeInt32BE(t,8),i.writeInt32BE(n,12),i},"cancel"),ou=s((t,n)=>{let a=4+Buffer.byteLength(n)+1,u=Buffer.allocUnsafe(1+a);return u[0]=t,u.writeInt32BE(a,1),u.write(n,5,"utf-8"),u[a]=0,u},"cstringMessage"),Qb=qe.addCString("P").flush(68),zb=qe.addCString("S").flush(68),Xb=s(t=>t.name?ou(68,`${t.type}${t.name||""}`):t.type==="P"?Qb:zb,"describe"),Zb=s(t=>{let n=`${t.type}${t.name||""}`;return ou(67,n)},"close"),jb=s(t=>qe.add(t).flush(100),"copyData"),Jb=s(t=>ou(102,t),"copyFail"),as=s(t=>Buffer.from([t,0,0,0,4]),"codeOnlyBuffer"),e0=as(72),t0=as(83),n0=as(88),r0=as(99),i0={startup:Mb,password:Ub,requestSsl:Fb,sendSASLInitialResponseMessage:Bb,sendSCRAMClientFinalMessage:$b,query:Kb,parse:kb,bind:Wb,execute:Vb,describe:Xb,close:Zb,flush:()=>e0,sync:()=>t0,end:()=>n0,copyData:jb,copyDone:()=>r0,copyFail:Jb,cancel:Yb};os.serialize=i0});var Hd=U(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.BufferReader=void 0;var s0=Buffer.allocUnsafe(0),cu=class cu{constructor(n=0){this.offset=n,this.buffer=s0,this.encoding="utf-8"}setBuffer(n,i){this.offset=n,this.buffer=i}int16(){let n=this.buffer.readInt16BE(this.offset);return this.offset+=2,n}byte(){let n=this.buffer[this.offset];return this.offset++,n}int32(){let n=this.buffer.readInt32BE(this.offset);return this.offset+=4,n}string(n){let i=this.buffer.toString(this.encoding,this.offset,this.offset+n);return this.offset+=n,i}cstring(){let n=this.offset,i=n;for(;this.buffer[i++]!==0;);return this.offset=i,this.buffer.toString(this.encoding,n,i-1)}bytes(n){let i=this.buffer.slice(this.offset,this.offset+n);return this.offset+=n,i}};s(cu,"BufferReader");var uu=cu;us.BufferReader=uu});var Qd=U(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.Parser=void 0;var Le=ru(),a0=Hd(),lu=1,o0=4,Vd=lu+o0,Yd=Buffer.allocUnsafe(0),fu=class fu{constructor(n){if(this.buffer=Yd,this.bufferLength=0,this.bufferOffset=0,this.reader=new a0.BufferReader,(n==null?void 0:n.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=(n==null?void 0:n.mode)||"text"}parse(n,i){this.mergeBuffer(n);let a=this.bufferOffset+this.bufferLength,u=this.bufferOffset;for(;u+Vd<=a;){let c=this.buffer[u],p=this.buffer.readUInt32BE(u+lu),d=lu+p;if(d+u<=a){let h=this.handlePacket(u+Vd,c,p,this.buffer);i(h),u+=d}else break}u===a?(this.buffer=Yd,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=a-u,this.bufferOffset=u)}mergeBuffer(n){if(this.bufferLength>0){let i=this.bufferLength+n.byteLength;if(i+this.bufferOffset>this.buffer.byteLength){let u;if(i<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)u=this.buffer;else{let c=this.buffer.byteLength*2;for(;i>=c;)c*=2;u=Buffer.allocUnsafe(c)}this.buffer.copy(u,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=u,this.bufferOffset=0}n.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=i}else this.buffer=n,this.bufferOffset=0,this.bufferLength=n.byteLength}handlePacket(n,i,a,u){switch(i){case 50:return Le.bindComplete;case 49:return Le.parseComplete;case 51:return Le.closeComplete;case 110:return Le.noData;case 115:return Le.portalSuspended;case 99:return Le.copyDone;case 87:return Le.replicationStart;case 73:return Le.emptyQuery;case 68:return this.parseDataRowMessage(n,a,u);case 67:return this.parseCommandCompleteMessage(n,a,u);case 90:return this.parseReadyForQueryMessage(n,a,u);case 65:return this.parseNotificationMessage(n,a,u);case 82:return this.parseAuthenticationResponse(n,a,u);case 83:return this.parseParameterStatusMessage(n,a,u);case 75:return this.parseBackendKeyData(n,a,u);case 69:return this.parseErrorMessage(n,a,u,"error");case 78:return this.parseErrorMessage(n,a,u,"notice");case 84:return this.parseRowDescriptionMessage(n,a,u);case 116:return this.parseParameterDescriptionMessage(n,a,u);case 71:return this.parseCopyInMessage(n,a,u);case 72:return this.parseCopyOutMessage(n,a,u);case 100:return this.parseCopyData(n,a,u);default:return new Le.DatabaseError("received invalid response: "+i.toString(16),a,"error")}}parseReadyForQueryMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.string(1);return new Le.ReadyForQueryMessage(i,u)}parseCommandCompleteMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.cstring();return new Le.CommandCompleteMessage(i,u)}parseCopyData(n,i,a){let u=a.slice(n,n+(i-4));return new Le.CopyDataMessage(i,u)}parseCopyInMessage(n,i,a){return this.parseCopyMessage(n,i,a,"copyInResponse")}parseCopyOutMessage(n,i,a){return this.parseCopyMessage(n,i,a,"copyOutResponse")}parseCopyMessage(n,i,a,u){this.reader.setBuffer(n,a);let c=this.reader.byte()!==0,p=this.reader.int16(),d=new Le.CopyResponse(i,u,c,p);for(let h=0;h<p;h++)d.columnTypes[h]=this.reader.int16();return d}parseNotificationMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.int32(),c=this.reader.cstring(),p=this.reader.cstring();return new Le.NotificationResponseMessage(i,u,c,p)}parseRowDescriptionMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.int16(),c=new Le.RowDescriptionMessage(i,u);for(let p=0;p<u;p++)c.fields[p]=this.parseField();return c}parseField(){let n=this.reader.cstring(),i=this.reader.int32(),a=this.reader.int16(),u=this.reader.int32(),c=this.reader.int16(),p=this.reader.int32(),d=this.reader.int16()===0?"text":"binary";return new Le.Field(n,i,a,u,c,p,d)}parseParameterDescriptionMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.int16(),c=new Le.ParameterDescriptionMessage(i,u);for(let p=0;p<u;p++)c.dataTypeIDs[p]=this.reader.int32();return c}parseDataRowMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.int16(),c=new Array(u);for(let p=0;p<u;p++){let d=this.reader.int32();c[p]=d===-1?null:this.reader.string(d)}return new Le.DataRowMessage(i,c)}parseParameterStatusMessage(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.cstring(),c=this.reader.cstring();return new Le.ParameterStatusMessage(i,u,c)}parseBackendKeyData(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.int32(),c=this.reader.int32();return new Le.BackendKeyDataMessage(i,u,c)}parseAuthenticationResponse(n,i,a){this.reader.setBuffer(n,a);let u=this.reader.int32(),c={name:"authenticationOk",length:i};switch(u){case 0:break;case 3:c.length===8&&(c.name="authenticationCleartextPassword");break;case 5:if(c.length===12){c.name="authenticationMD5Password";let d=this.reader.bytes(4);return new Le.AuthenticationMD5Password(i,d)}break;case 10:c.name="authenticationSASL",c.mechanisms=[];let p;do p=this.reader.cstring(),p&&c.mechanisms.push(p);while(p);break;case 11:c.name="authenticationSASLContinue",c.data=this.reader.string(i-8);break;case 12:c.name="authenticationSASLFinal",c.data=this.reader.string(i-8);break;default:throw new Error("Unknown authenticationOk message type "+u)}return c}parseErrorMessage(n,i,a,u){this.reader.setBuffer(n,a);let c={},p=this.reader.string(1);for(;p!=="\0";)c[p]=this.reader.cstring(),p=this.reader.string(1);let d=c.M,h=u==="notice"?new Le.NoticeMessage(i,d):new Le.DatabaseError(d,i,u);return h.severity=c.S,h.code=c.C,h.detail=c.D,h.hint=c.H,h.position=c.P,h.internalPosition=c.p,h.internalQuery=c.q,h.where=c.W,h.schema=c.s,h.table=c.t,h.column=c.c,h.dataType=c.d,h.constraint=c.n,h.file=c.F,h.line=c.L,h.routine=c.R,h}};s(fu,"Parser");var pu=fu;cs.Parser=pu});var du=U(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.DatabaseError=In.serialize=In.parse=void 0;var u0=ru();Object.defineProperty(In,"DatabaseError",{enumerable:!0,get:function(){return u0.DatabaseError}});var c0=Wd();Object.defineProperty(In,"serialize",{enumerable:!0,get:function(){return c0.serialize}});var l0=Qd();function p0(t,n){let i=new l0.Parser;return t.on("data",a=>i.parse(a,n)),new Promise(a=>t.on("end",()=>a()))}s(p0,"parse");In.parse=p0});var zd={};oN(zd,{default:()=>f0});var f0,Xd=aN(()=>{f0={}});var Zd=U((tq,mu)=>{mu.exports.getStream=s(function(n){let i=require("net");if(typeof i.Socket=="function")return new i.Socket;{let{CloudflareSocket:a}=(Xd(),cN(zd));return new a(n)}},"getStream");mu.exports.getSecureStream=s(function(n){var i=require("tls");return i.connect?i.connect(n):(n.socket.startTls(n),n.socket)},"getSecureStream")});var _u=U((iq,jd)=>{"use strict";var rq=require("net"),d0=require("events").EventEmitter,{parse:m0,serialize:je}=du(),{getStream:h0,getSecureStream:g0}=Zd(),_0=je.flush(),y0=je.sync(),E0=je.end(),gu=class gu extends d0{constructor(n){super(),n=n||{},this.stream=n.stream||h0(n.ssl),typeof this.stream=="function"&&(this.stream=this.stream(n)),this._keepAlive=n.keepAlive,this._keepAliveInitialDelayMillis=n.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=n.ssl||!1,this._ending=!1,this._emitMessage=!1;var i=this;this.on("newListener",function(a){a==="message"&&(i._emitMessage=!0)})}connect(n,i){var a=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(n,i),this.stream.once("connect",function(){a._keepAlive&&a.stream.setKeepAlive(!0,a._keepAliveInitialDelayMillis),a.emit("connect")});let u=s(function(c){a._ending&&(c.code==="ECONNRESET"||c.code==="EPIPE")||a.emit("error",c)},"reportStreamError");if(this.stream.on("error",u),this.stream.on("close",function(){a.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(c){var p=c.toString("utf8");switch(p){case"S":break;case"N":return a.stream.end(),a.emit("error",new Error("The server does not support SSL connections"));default:return a.stream.end(),a.emit("error",new Error("There was an error establishing an SSL connection"))}let d={socket:a.stream};a.ssl!==!0&&(Object.assign(d,a.ssl),"key"in a.ssl&&(d.key=a.ssl.key));var h=require("net");h.isIP&&h.isIP(i)===0&&(d.servername=i);try{a.stream=g0(d)}catch(g){return a.emit("error",g)}a.attachListeners(a.stream),a.stream.on("error",u),a.emit("sslconnect")})}attachListeners(n){m0(n,i=>{var a=i.name==="error"?"errorMessage":i.name;this._emitMessage&&this.emit("message",i),this.emit(a,i)})}requestSsl(){this.stream.write(je.requestSsl())}startup(n){this.stream.write(je.startup(n))}cancel(n,i){this._send(je.cancel(n,i))}password(n){this._send(je.password(n))}sendSASLInitialResponseMessage(n,i){this._send(je.sendSASLInitialResponseMessage(n,i))}sendSCRAMClientFinalMessage(n){this._send(je.sendSCRAMClientFinalMessage(n))}_send(n){return this.stream.writable?this.stream.write(n):!1}query(n){this._send(je.query(n))}parse(n){this._send(je.parse(n))}bind(n){this._send(je.bind(n))}execute(n){this._send(je.execute(n))}flush(){this.stream.writable&&this.stream.write(_0)}sync(){this._ending=!0,this._send(y0)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(E0,()=>{this.stream.end()})}close(n){this._send(je.close(n))}describe(n){this._send(je.describe(n))}sendCopyFromChunk(n){this._send(je.copyData(n))}endCopyFrom(){this._send(je.copyDone())}sendCopyFail(n){this._send(je.copyFail(n))}};s(gu,"Connection");var hu=gu;jd.exports=hu});var nm=U((aq,tm)=>{"use strict";var{Transform:T0}=require("stream"),{StringDecoder:S0}=require("string_decoder"),wn=Symbol("last"),ls=Symbol("decoder");function A0(t,n,i){let a;if(this.overflow){if(a=this[ls].write(t).split(this.matcher),a.length===1)return i();a.shift(),this.overflow=!1}else this[wn]+=this[ls].write(t),a=this[wn].split(this.matcher);this[wn]=a.pop();for(let u=0;u<a.length;u++)try{em(this,this.mapper(a[u]))}catch(c){return i(c)}if(this.overflow=this[wn].length>this.maxLength,this.overflow&&!this.skipOverflow){i(new Error("maximum buffer reached"));return}i()}s(A0,"transform");function C0(t){if(this[wn]+=this[ls].end(),this[wn])try{em(this,this.mapper(this[wn]))}catch(n){return t(n)}t()}s(C0,"flush");function em(t,n){n!==void 0&&t.push(n)}s(em,"push");function Jd(t){return t}s(Jd,"noop");function v0(t,n,i){switch(t=t||/\r?\n/,n=n||Jd,i=i||{},arguments.length){case 1:typeof t=="function"?(n=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(i=t,t=/\r?\n/);break;case 2:typeof t=="function"?(i=n,n=t,t=/\r?\n/):typeof n=="object"&&(i=n,n=Jd)}i=Object.assign({},i),i.autoDestroy=!0,i.transform=A0,i.flush=C0,i.readableObjectMode=!0;let a=new T0(i);return a[wn]="",a[ls]=new S0("utf8"),a.matcher=t,a.mapper=n,a.maxLength=i.maxLength,a.skipOverflow=i.skipOverflow||!1,a.overflow=!1,a._destroy=function(u,c){this._writableState.errorEmitted=!1,c(u)},a}s(v0,"split");tm.exports=v0});var sm=U((uq,pn)=>{"use strict";var rm=require("path"),N0=require("stream").Stream,b0=nm(),im=require("util"),I0=5432,ps=process.platform==="win32",Zr=process.stderr,w0=56,O0=7,R0=61440,x0=32768;function D0(t){return(t&R0)==x0}s(D0,"isRegFile");var dr=["host","port","database","user","password"],yu=dr.length,q0=dr[yu-1];function Eu(){var t=Zr instanceof N0&&Zr.writable===!0;if(t){var n=Array.prototype.slice.call(arguments).concat(`
`);Zr.write(im.format.apply(im,n))}}s(Eu,"warn");Object.defineProperty(pn.exports,"isWin",{get:function(){return ps},set:function(t){ps=t}});pn.exports.warnTo=function(t){var n=Zr;return Zr=t,n};pn.exports.getFileName=function(t){var n=t||process.env,i=n.PGPASSFILE||(ps?rm.join(n.APPDATA||"./","postgresql","pgpass.conf"):rm.join(n.HOME||"./",".pgpass"));return i};pn.exports.usePgPass=function(t,n){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:ps?!0:(n=n||"<unkn>",D0(t.mode)?t.mode&(w0|O0)?(Eu('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',n),!1):!0:(Eu('WARNING: password file "%s" is not a plain file',n),!1))};var L0=pn.exports.match=function(t,n){return dr.slice(0,-1).reduce(function(i,a,u){return u==1&&Number(t[a]||I0)===Number(n[a])?i&&!0:i&&(n[a]==="*"||n[a]===t[a])},!0)};pn.exports.getPassword=function(t,n,i){var a,u=n.pipe(b0());function c(h){var g=P0(h);g&&M0(g)&&L0(t,g)&&(a=g[q0],u.end())}s(c,"onLine");var p=s(function(){n.destroy(),i(a)},"onEnd"),d=s(function(h){n.destroy(),Eu("WARNING: error on reading file: %s",h),i(void 0)},"onErr");n.on("error",d),u.on("data",c).on("end",p).on("error",d)};var P0=pn.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var n="",i="",a=0,u=0,c=0,p={},d=!1,h=s(function(T,y,E){var S=t.substring(y,E);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(S=S.replace(/\\([:\\])/g,"$1")),p[dr[T]]=S},"addToObj"),g=0;g<t.length-1;g+=1){if(n=t.charAt(g+1),i=t.charAt(g),d=a==yu-1,d){h(a,u);break}g>=0&&n==":"&&i!=="\\"&&(h(a,u,g+1),u=g+2,a+=1)}return p=Object.keys(p).length===yu?p:null,p},M0=pn.exports.isValidEntry=function(t){for(var n={0:function(p){return p.length>0},1:function(p){return p==="*"?!0:(p=Number(p),isFinite(p)&&p>0&&p<9007199254740992&&Math.floor(p)===p)},2:function(p){return p.length>0},3:function(p){return p.length>0},4:function(p){return p.length>0}},i=0;i<dr.length;i+=1){var a=n[i],u=t[dr[i]]||"",c=a(u);if(!c)return!1}return!0}});var om=U((pq,Tu)=>{"use strict";var lq=require("path"),am=require("fs"),fs=sm();Tu.exports=function(t,n){var i=fs.getFileName();am.stat(i,function(a,u){if(a||!fs.usePgPass(u,i))return n(void 0);var c=am.createReadStream(i);fs.getPassword(t,c,n)})};Tu.exports.warnTo=fs.warnTo});var pm=U((fq,lm)=>{"use strict";var F0=require("events").EventEmitter,um=zr(),Su=wd(),U0=To(),B0=vo(),cm=Kd(),$0=Qr(),K0=_u(),k0=Eo(),Au=class Au extends F0{constructor(n){super(),this.connectionParameters=new B0(n),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var i=n||{};this._Promise=i.Promise||global.Promise,this._types=new U0(i.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=i.connection||new K0({stream:i.stream,ssl:this.connectionParameters.ssl,keepAlive:i.keepAlive||!1,keepAliveInitialDelayMillis:i.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=i.binary||$0.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=i.connectionTimeoutMillis||0}_errorAllQueries(n){let i=s(a=>{process.nextTick(()=>{a.handleError(n,this.connection)})},"enqueueError");this.activeQuery&&(i(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(i),this.queryQueue.length=0}_connect(n){var i=this,a=this.connection;if(this._connectionCallback=n,this._connecting||this._connected){let u=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{n(u)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{a._ending=!0,a.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?a.connect(this.host+"/.s.PGSQL."+this.port):a.connect(this.port,this.host),a.on("connect",function(){i.ssl?a.requestSsl():a.startup(i.getStartupConf())}),a.on("sslconnect",function(){a.startup(i.getStartupConf())}),this._attachListeners(a),a.once("end",()=>{let u=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(u),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(u):this._handleErrorEvent(u):this._connectionError||this._handleErrorEvent(u)),process.nextTick(()=>{this.emit("end")})})}connect(n){if(n){this._connect(n);return}return new this._Promise((i,a)=>{this._connect(u=>{u?a(u):i()})})}_attachListeners(n){n.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),n.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),n.on("authenticationSASL",this._handleAuthSASL.bind(this)),n.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),n.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),n.on("backendKeyData",this._handleBackendKeyData.bind(this)),n.on("error",this._handleErrorEvent.bind(this)),n.on("errorMessage",this._handleErrorMessage.bind(this)),n.on("readyForQuery",this._handleReadyForQuery.bind(this)),n.on("notice",this._handleNotice.bind(this)),n.on("rowDescription",this._handleRowDescription.bind(this)),n.on("dataRow",this._handleDataRow.bind(this)),n.on("portalSuspended",this._handlePortalSuspended.bind(this)),n.on("emptyQuery",this._handleEmptyQuery.bind(this)),n.on("commandComplete",this._handleCommandComplete.bind(this)),n.on("parseComplete",this._handleParseComplete.bind(this)),n.on("copyInResponse",this._handleCopyInResponse.bind(this)),n.on("copyData",this._handleCopyData.bind(this)),n.on("notification",this._handleNotification.bind(this))}_checkPgPass(n){let i=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(a=>{if(a!==void 0){if(typeof a!="string"){i.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=a}else this.connectionParameters.password=this.password=null;n()}).catch(a=>{i.emit("error",a)});else if(this.password!==null)n();else try{om()(this.connectionParameters,u=>{u!==void 0&&(this.connectionParameters.password=this.password=u),n()})}catch(a){this.emit("error",a)}}_handleAuthCleartextPassword(n){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(n){this._checkPgPass(async()=>{try{let i=await k0.postgresMd5PasswordHash(this.user,this.password,n.salt);this.connection.password(i)}catch(i){this.emit("error",i)}})}_handleAuthSASL(n){this._checkPgPass(()=>{try{this.saslSession=Su.startSession(n.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(i){this.connection.emit("error",i)}})}async _handleAuthSASLContinue(n){try{await Su.continueSession(this.saslSession,this.password,n.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(i){this.connection.emit("error",i)}}_handleAuthSASLFinal(n){try{Su.finalizeSession(this.saslSession,n.data),this.saslSession=null}catch(i){this.connection.emit("error",i)}}_handleBackendKeyData(n){this.processID=n.processID,this.secretKey=n.secretKey}_handleReadyForQuery(n){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:i}=this;this.activeQuery=null,this.readyForQuery=!0,i&&i.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(n){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(n);this.emit("error",n)}}_handleErrorEvent(n){if(this._connecting)return this._handleErrorWhileConnecting(n);this._queryable=!1,this._errorAllQueries(n),this.emit("error",n)}_handleErrorMessage(n){if(this._connecting)return this._handleErrorWhileConnecting(n);let i=this.activeQuery;if(!i){this._handleErrorEvent(n);return}this.activeQuery=null,i.handleError(n,this.connection)}_handleRowDescription(n){this.activeQuery.handleRowDescription(n)}_handleDataRow(n){this.activeQuery.handleDataRow(n)}_handlePortalSuspended(n){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(n){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(n){this.activeQuery.handleCommandComplete(n,this.connection)}_handleParseComplete(n){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(n){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(n){this.activeQuery.handleCopyData(n,this.connection)}_handleNotification(n){this.emit("notification",n)}_handleNotice(n){this.emit("notice",n)}getStartupConf(){var n=this.connectionParameters,i={user:n.user,database:n.database},a=n.application_name||n.fallback_application_name;return a&&(i.application_name=a),n.replication&&(i.replication=""+n.replication),n.statement_timeout&&(i.statement_timeout=String(parseInt(n.statement_timeout,10))),n.lock_timeout&&(i.lock_timeout=String(parseInt(n.lock_timeout,10))),n.idle_in_transaction_session_timeout&&(i.idle_in_transaction_session_timeout=String(parseInt(n.idle_in_transaction_session_timeout,10))),n.options&&(i.options=n.options),i}cancel(n,i){if(n.activeQuery===i){var a=this.connection;this.host&&this.host.indexOf("/")===0?a.connect(this.host+"/.s.PGSQL."+this.port):a.connect(this.port,this.host),a.on("connect",function(){a.cancel(n.processID,n.secretKey)})}else n.queryQueue.indexOf(i)!==-1&&n.queryQueue.splice(n.queryQueue.indexOf(i),1)}setTypeParser(n,i,a){return this._types.setTypeParser(n,i,a)}getTypeParser(n,i){return this._types.getTypeParser(n,i)}escapeIdentifier(n){return um.escapeIdentifier(n)}escapeLiteral(n){return um.escapeLiteral(n)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let n=this.activeQuery.submit(this.connection);n&&process.nextTick(()=>{this.activeQuery.handleError(n,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(n,i,a){var u,c,p,d,h;if(n==null)throw new TypeError("Client was passed a null or undefined query");return typeof n.submit=="function"?(p=n.query_timeout||this.connectionParameters.query_timeout,c=u=n,typeof i=="function"&&(u.callback=u.callback||i)):(p=this.connectionParameters.query_timeout,u=new cm(n,i,a),u.callback||(c=new this._Promise((g,T)=>{u.callback=(y,E)=>y?T(y):g(E)}).catch(g=>{throw Error.captureStackTrace(g),g}))),p&&(h=u.callback,d=setTimeout(()=>{var g=new Error("Query read timeout");process.nextTick(()=>{u.handleError(g,this.connection)}),h(g),u.callback=()=>{};var T=this.queryQueue.indexOf(u);T>-1&&this.queryQueue.splice(T,1),this._pulseQueryQueue()},p),u.callback=(g,T)=>{clearTimeout(d),h(g,T)}),this.binary&&!u.binary&&(u.binary=!0),u._result&&!u._result._types&&(u._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{u.handleError(new Error("Client was closed and is not queryable"),this.connection)}),c):(this.queryQueue.push(u),this._pulseQueryQueue(),c):(process.nextTick(()=>{u.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),c)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(n){if(this._ending=!0,!this.connection._connecting||this._ended)if(n)n();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),n)this.connection.once("end",n);else return new this._Promise(i=>{this.connection.once("end",i)})}};s(Au,"Client");var ds=Au;ds.Query=cm;lm.exports=ds});var hm=U((mq,mm)=>{"use strict";var G0=require("events").EventEmitter,fm=s(function(){},"NOOP"),dm=s((t,n)=>{let i=t.findIndex(n);return i===-1?void 0:t.splice(i,1)[0]},"removeWhere"),Nu=class Nu{constructor(n,i,a){this.client=n,this.idleListener=i,this.timeoutId=a}};s(Nu,"IdleItem");var Cu=Nu,bu=class bu{constructor(n){this.callback=n}};s(bu,"PendingItem");var mr=bu;function W0(){throw new Error("Release called on client which has already been released to the pool.")}s(W0,"throwOnDoubleRelease");function ms(t,n){if(n)return{callback:n,result:void 0};let i,a,u=s(function(p,d){p?i(p):a(d)},"cb"),c=new t(function(p,d){a=p,i=d}).catch(p=>{throw Error.captureStackTrace(p),p});return{callback:u,result:c}}s(ms,"promisify");function H0(t,n){return s(function i(a){a.client=n,n.removeListener("error",i),n.on("error",()=>{t.log("additional client error after disconnection due to error",a)}),t._remove(n),t.emit("error",a,n)},"idleListener")}s(H0,"makeIdleListener");var Iu=class Iu extends G0{constructor(n,i){super(),this.options=Object.assign({},n),n!=null&&"password"in n&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:n.password}),n!=null&&n.ssl&&n.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||i||wu().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(i=>{this._remove(i.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let n=this._pendingQueue.shift();if(this._idle.length){let i=this._idle.pop();clearTimeout(i.timeoutId);let a=i.client;a.ref&&a.ref();let u=i.idleListener;return this._acquireClient(a,n,u,!1)}if(!this._isFull())return this.newClient(n);throw new Error("unexpected condition")}_remove(n){let i=dm(this._idle,a=>a.client===n);i!==void 0&&clearTimeout(i.timeoutId),this._clients=this._clients.filter(a=>a!==n),n.end(),this.emit("remove",n)}connect(n){if(this.ending){let u=new Error("Cannot use a pool after calling end on the pool");return n?n(u):this.Promise.reject(u)}let i=ms(this.Promise,n),a=i.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new mr(i.callback)),a;let u=s((d,h,g)=>{clearTimeout(p),i.callback(d,h,g)},"queueCallback"),c=new mr(u),p=setTimeout(()=>{dm(this._pendingQueue,d=>d.callback===u),c.timedOut=!0,i.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(c),a}return this.newClient(new mr(i.callback)),a}newClient(n){let i=new this.Client(this.options);this._clients.push(i);let a=H0(this,i);this.log("checking client timeout");let u,c=!1;this.options.connectionTimeoutMillis&&(u=setTimeout(()=>{this.log("ending client due to timeout"),c=!0,i.connection?i.connection.stream.destroy():i.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),i.connect(p=>{if(u&&clearTimeout(u),i.on("error",a),p)this.log("client failed to connect",p),this._clients=this._clients.filter(d=>d!==i),c&&(p.message="Connection terminated due to connection timeout"),this._pulseQueue(),n.timedOut||n.callback(p,void 0,fm);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let d=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(i),this._idle.findIndex(g=>g.client===i)!==-1&&this._acquireClient(i,new mr((g,T,y)=>y()),a,!1)},this.options.maxLifetimeSeconds*1e3);d.unref(),i.once("end",()=>clearTimeout(d))}return this._acquireClient(i,n,a,!0)}})}_acquireClient(n,i,a,u){u&&this.emit("connect",n),this.emit("acquire",n),n.release=this._releaseOnce(n,a),n.removeListener("error",a),i.timedOut?u&&this.options.verify?this.options.verify(n,n.release):n.release():u&&this.options.verify?this.options.verify(n,c=>{if(c)return n.release(c),i.callback(c,void 0,fm);i.callback(void 0,n,n.release)}):i.callback(void 0,n,n.release)}_releaseOnce(n,i){let a=!1;return u=>{a&&W0(),a=!0,this._release(n,i,u)}}_release(n,i,a){if(n.on("error",i),n._poolUseCount=(n._poolUseCount||0)+1,this.emit("release",a,n),a||this.ending||!n._queryable||n._ending||n._poolUseCount>=this.options.maxUses){n._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(n),this._pulseQueue();return}if(this._expired.has(n)){this.log("remove expired client"),this._expired.delete(n),this._remove(n),this._pulseQueue();return}let c;this.options.idleTimeoutMillis&&(c=setTimeout(()=>{this.log("remove idle client"),this._remove(n)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&c.unref()),this.options.allowExitOnIdle&&n.unref(),this._idle.push(new Cu(n,i,c)),this._pulseQueue()}query(n,i,a){if(typeof n=="function"){let c=ms(this.Promise,n);return setImmediate(function(){return c.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),c.result}typeof i=="function"&&(a=i,i=void 0);let u=ms(this.Promise,a);return a=u.callback,this.connect((c,p)=>{if(c)return a(c);let d=!1,h=s(g=>{d||(d=!0,p.release(g),a(g))},"onError");p.once("error",h),this.log("dispatching query");try{p.query(n,i,(g,T)=>{if(this.log("query dispatched"),p.removeListener("error",h),!d)return d=!0,p.release(g),g?a(g):a(void 0,T)})}catch(g){return p.release(g),a(g)}}),u.result}end(n){if(this.log("ending"),this.ending){let a=new Error("Called end on pool more than once");return n?n(a):this.Promise.reject(a)}this.ending=!0;let i=ms(this.Promise,n);return this._endCallback=i.callback,this._pulseQueue(),i.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((n,i)=>n+(this._expired.has(i)?1:0),0)}get totalCount(){return this._clients.length}};s(Iu,"Pool");var vu=Iu;mm.exports=vu});var ym=U((gq,_m)=>{"use strict";var gm=require("events").EventEmitter,V0=require("util"),Ou=zr(),hr=_m.exports=function(t,n,i){gm.call(this),t=Ou.normalizeQueryConfig(t,n,i),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(a){a==="row"&&(this._emitRowEvents=!0)}.bind(this))};V0.inherits(hr,gm);var Y0={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};hr.prototype.handleError=function(t){var n=this.native.pq.resultErrorFields();if(n)for(var i in n){var a=Y0[i]||i;t[a]=n[i]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};hr.prototype.then=function(t,n){return this._getPromise().then(t,n)};hr.prototype.catch=function(t){return this._getPromise().catch(t)};hr.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,n){this._once("end",t),this._once("error",n)}.bind(this)),this._promise)};hr.prototype.submit=function(t){this.state="running";var n=this;this.native=t.native,t.native.arrayMode=this._arrayMode;var i=s(function(c,p,d){if(t.native.arrayMode=!1,setImmediate(function(){n.emit("_done")}),c)return n.handleError(c);n._emitRowEvents&&(d.length>1?p.forEach((h,g)=>{h.forEach(T=>{n.emit("row",T,d[g])})}):p.forEach(function(h){n.emit("row",h,d)})),n.state="end",n.emit("end",d),n.callback&&n.callback(null,d)},"after");if(process.domain&&(i=process.domain.bind(i)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var a=(this.values||[]).map(Ou.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let c=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return i(c)}return t.native.execute(this.name,a,i)}return t.native.prepare(this.name,this.text,a.length,function(c){return c?i(c):(t.namedQueries[n.name]=n.text,n.native.execute(n.name,a,i))})}else if(this.values){if(!Array.isArray(this.values)){let c=new Error("Query values must be an array");return i(c)}var u=this.values.map(Ou.prepareValue);t.native.query(this.text,u,i)}else this.queryMode==="extended"?t.native.query(this.text,[],i):t.native.query(this.text,i)}});var Cm=U((yq,Am)=>{"use strict";var Em;try{Em=require("pg-native")}catch(t){throw t}var Q0=To(),Tm=require("events").EventEmitter,z0=require("util"),X0=vo(),Sm=ym(),Et=Am.exports=function(t){Tm.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new Q0(t.types),this.native=new Em({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var n=this.connectionParameters=new X0(t);t.nativeConnectionString&&(n.nativeConnectionString=t.nativeConnectionString),this.user=n.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:n.password}),this.database=n.database,this.host=n.host,this.port=n.port,this.namedQueries={}};Et.Query=Sm;z0.inherits(Et,Tm);Et.prototype._errorAllQueries=function(t){let n=s(i=>{process.nextTick(()=>{i.native=this.native,i.handleError(t)})},"enqueueError");this._hasActiveQuery()&&(n(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(n),this._queryQueue.length=0};Et.prototype._connect=function(t){var n=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(i,a){if(n.connectionParameters.nativeConnectionString&&(a=n.connectionParameters.nativeConnectionString),i)return t(i);n.native.connect(a,function(u){if(u)return n.native.end(),t(u);n._connected=!0,n.native.on("error",function(c){n._queryable=!1,n._errorAllQueries(c),n.emit("error",c)}),n.native.on("notification",function(c){n.emit("notification",{channel:c.relname,payload:c.extra})}),n.emit("connect"),n._pulseQueryQueue(!0),t()})})};Et.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((n,i)=>{this._connect(a=>{a?i(a):n()})})};Et.prototype.query=function(t,n,i){var a,u,c,p,d;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")c=t.query_timeout||this.connectionParameters.query_timeout,u=a=t,typeof n=="function"&&(t.callback=n);else if(c=this.connectionParameters.query_timeout,a=new Sm(t,n,i),!a.callback){let h,g;u=new this._Promise((T,y)=>{h=T,g=y}).catch(T=>{throw Error.captureStackTrace(T),T}),a.callback=(T,y)=>T?g(T):h(y)}return c&&(d=a.callback,p=setTimeout(()=>{var h=new Error("Query read timeout");process.nextTick(()=>{a.handleError(h,this.connection)}),d(h),a.callback=()=>{};var g=this._queryQueue.indexOf(a);g>-1&&this._queryQueue.splice(g,1),this._pulseQueryQueue()},c),a.callback=(h,g)=>{clearTimeout(p),d(h,g)}),this._queryable?this._ending?(a.native=this.native,process.nextTick(()=>{a.handleError(new Error("Client was closed and is not queryable"))}),u):(this._queryQueue.push(a),this._pulseQueryQueue(),u):(a.native=this.native,process.nextTick(()=>{a.handleError(new Error("Client has encountered a connection error and is not queryable"))}),u)};Et.prototype.end=function(t){var n=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));var i;return t||(i=new this._Promise(function(a,u){t=s(c=>c?u(c):a(),"cb")})),this.native.end(function(){n._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{n.emit("end"),t&&t()})}),i};Et.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};Et.prototype._pulseQueryQueue=function(t){if(this._connected&&!this._hasActiveQuery()){var n=this._queryQueue.shift();if(!n){t||this.emit("drain");return}this._activeQuery=n,n.submit(this);var i=this;n.once("_done",function(){i._pulseQueryQueue()})}};Et.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};Et.prototype.ref=function(){};Et.prototype.unref=function(){};Et.prototype.setTypeParser=function(t,n,i){return this._types.setTypeParser(t,n,i)};Et.prototype.getTypeParser=function(t,n){return this._types.getTypeParser(t,n)}});var Ru=U((Tq,vm)=>{"use strict";vm.exports=Cm()});var wu=U((Sq,jr)=>{"use strict";var Z0=pm(),j0=Qr(),J0=_u(),eI=hm(),{DatabaseError:tI}=du(),{escapeIdentifier:nI,escapeLiteral:rI}=zr(),iI=s(t=>{var n;return n=class extends eI{constructor(a){super(a,t)}},s(n,"BoundPool"),n},"poolFactory"),xu=s(function(t){this.defaults=j0,this.Client=t,this.Query=this.Client.Query,this.Pool=iI(this.Client),this._pools=[],this.Connection=J0,this.types=Yr(),this.DatabaseError=tI,this.escapeIdentifier=nI,this.escapeLiteral=rI},"PG");typeof process.env.NODE_PG_FORCE_NATIVE<"u"?jr.exports=new xu(Ru()):(jr.exports=new xu(Z0),Object.defineProperty(jr.exports,"native",{configurable:!0,enumerable:!1,get(){var t=null;try{t=new xu(Ru())}catch(n){if(n.code!=="MODULE_NOT_FOUND")throw n}return Object.defineProperty(jr.exports,"native",{value:t}),t}}))});var bm=U((Cq,Nm)=>{"use strict";var gr=require("fs"),sI=wu(),aI="The server does not support SSL connections",oI="28000",uI=s((t,n)=>{let i=t.sslType;if(!i||i==="disable"||i==="allow")return!1;if(["require","prefer"].includes(i)&&!t.certAuthority)return{rejectUnauthorized:!1};let a={checkServerIdentity(u,c){n.info("Certificate",{hostname:u,cert:{subject:c.subject,issuer:c.issuer,valid_from:c.valid_from,valid_to:c.valid_to}})}};return gr.existsSync(t.certAuthority)&&(a.ca=gr.readFileSync(t.certAuthority).toString()),gr.existsSync(t.clientCert)&&(a.cert=gr.readFileSync(t.clientCert).toString()),gr.existsSync(t.clientPrivateKey)&&(a.key=gr.readFileSync(t.clientPrivateKey).toString()),a},"getSslOptions"),cI=s(t=>({Off:"disable",TRUST_ALL_CERTIFICATES:"allow",TRUST_CUSTOM_CA_SIGNED_CERTIFICATES:"prefer",TRUST_SERVER_CLIENT_CERTIFICATES:"verify-full"})[t]||t,"mapSslType"),lI=s(async(t,n,i)=>{let a=!1;if(t.ssh){let{options:p}=await n.openTunnel({sshAuthMethod:t.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:t.ssh_host,sshTunnelPort:t.ssh_port,sshTunnelUsername:t.ssh_user,sshTunnelPassword:t.ssh_password,sshTunnelIdentityFile:t.ssh_key_file,sshTunnelPassphrase:t.ssh_key_passphrase,host:t.host,port:t.port});t={...t,...p},a=!0}t=Object.assign({},t,{sslType:cI(t.sslType)});let u={host:t.host,user:t.userName,password:t.userPassword,port:t.port,keepAlive:!0,ssl:uI(t,i),connectionTimeoutMillis:Number(t.queryRequestTimeout)||6e4,query_timeout:Number(t.queryRequestTimeout)||6e4,statement_timeout:Number(t.queryRequestTimeout)||6e4,database:t.database||t.maintenanceDatabase,application_name:"Hackolade",idleTimeoutMillis:Number(t.queryRequestTimeout)||1e4,sslType:t.sslType};return{client:await Du(u,i),isSshTunnel:a}},"createClient"),pI=s((t,n,i)=>{var a;if(i.message===aI&&t.sslType==="prefer")return n.info("Retry connection without SSL (SSL mode 'prefer')"),n.error(i),Du({...t,isRetry:!0,ssl:!1},n);if(((a=i.code)==null?void 0:a.toString())===oI&&t.sslType==="allow")return n.info("Retry connection with SSL (SSL mode 'allow')"),n.error(i),Du({...t,isRetry:!0,ssl:{rejectUnauthorized:!1}},n);throw i},"retryOnSslError"),Du=s((t,n)=>{let i=new sI.Pool(t);return i.connect().then(a=>(a.release(),i)).catch(async a=>{if(await i.end(),t.isRetry)throw a;return pI(t,n,a)})},"createConnectionPool");Nm.exports={createClient:lI}});var Lu=U((Nq,Om)=>{"use strict";var qu=s(t=>`
        SELECT indexname,
               index_method,
               index_unique,
               index_indnullsnotdistinct,
               number_of_keys,
               where_expression,
               array_agg(attname
                         ORDER BY ord)::text[] AS columns,
               array_agg(coll
                         ORDER BY ord) AS collations,
               array_agg(opclass
                         ORDER BY ord) AS opclasses,
               array_agg(expression
                         ORDER BY ord) AS expressions,
               array_agg(ascending
                         ORDER BY ord) AS ascendings,
               array_agg(nulls_first
                         ORDER BY ord) AS nulls_first,
                reloptions AS storage_parameters,
                tablespace_name
        FROM
            (SELECT ct.oid AS table_oid,
                    c.relname AS indexname,
                    m.amname AS index_method,
                    indexes.indisunique AS index_unique,
                    ${t===15?"indexes.indnullsnotdistinct":"FALSE"} AS index_indnullsnotdistinct,
                    indexes.ord,
                    attribute.attname,
                     c.reloptions,
                     tablespace_t.spcname AS tablespace_name,
                    indexes.${t===10?"indnatts":"indnkeyatts"} AS number_of_keys,
                    pg_catalog.pg_get_expr(indpred, indrelid) AS where_expression,
                    CASE
                        WHEN collation_namespace.nspname is not null THEN format('%I.%I',collation_namespace.nspname,collation_t.collname)
                    END AS coll,
                    CASE
                        WHEN opclass_t.opcname is not null THEN format('%I.%I',opclas_namespace.nspname,opclass_t.opcname)
                    END AS opclass,
                    CASE
                        WHEN indexes.ord > 0 THEN pg_catalog.pg_index_column_has_property(indexes.indexrelid, indexes.ord, 'asc')
                    END AS ascending,
                    CASE
                        WHEN indexes.ord > 0 THEN pg_catalog.pg_index_column_has_property(indexes.indexrelid, indexes.ord, 'nulls_first')
                    END AS nulls_first,
                    pg_catalog.pg_get_indexdef(indexes.indexrelid, ord, false) AS expression
             FROM
                 (SELECT *,
                         generate_series(1,array_length(i.indkey,1)) AS ord,
                         unnest(i.indkey) AS key,
                         unnest(i.indcollation) AS coll,
                         unnest(i.indclass) AS class,
                         unnest(i.indoption) AS option
                  FROM pg_catalog.pg_index i) indexes
             JOIN pg_catalog.pg_class c ON (c.oid=indexes.indexrelid)
             JOIN pg_catalog.pg_class ct ON (ct.oid=indexes.indrelid)
             JOIN pg_catalog.pg_am m ON (m.oid=c.relam)
             LEFT JOIN pg_catalog.pg_attribute attribute ON (attribute.attrelid=indexes.indrelid
                                                  AND attribute.attnum=indexes.key)
             LEFT JOIN pg_catalog.pg_collation collation_t ON (collation_t.oid=indexes.coll)
             LEFT JOIN pg_catalog.pg_namespace collation_namespace ON (collation_namespace.oid=collation_t.collnamespace)
             LEFT JOIN pg_catalog.pg_opclass opclass_t ON (opclass_t.oid=indexes.class)
             LEFT JOIN pg_catalog.pg_namespace opclas_namespace ON (opclas_namespace.oid=opclass_t.opcnamespace)
             LEFT JOIN pg_catalog.pg_tablespace tablespace_t ON (tablespace_t.oid = c.reltablespace)) s2
        WHERE table_oid = $1
        GROUP BY indexname,
                 index_method,
                 index_unique,
                 index_indnullsnotdistinct,
                 reloptions,
                 number_of_keys,
                 where_expression,
                 tablespace_name;
        `,"getGET_TABLE_INDEXES"),Im=s(t=>`
        SELECT obj_description(oid, 'pg_proc') AS description,
            proname AS function_name,
            provolatile AS volatility,
            proparallel AS parallel,
            proisstrict AS strict,
            proretset AS returns_set,
            proleakproof AS leak_proof,
            procost AS estimated_cost,
            prorows AS estimated_rows,
            prosrc AS body,
            ${t===10?"CASE WHEN proiswindow is true THEN 'w' ELSE '' END AS kind":"prokind AS kind"}
        FROM pg_catalog.pg_proc WHERE pronamespace = $1;`,"getGET_FUNCTIONS_WITH_PROCEDURES_ADDITIONAL"),wm={PING:"SELECT schema_name FROM information_schema.schemata LIMIT 1;",GET_VERSION:"SELECT version()",GET_VERSION_AS_NUM:"SHOW server_version_num;",GET_SCHEMA_NAMES:"SELECT schema_name FROM information_schema.schemata;",GET_TABLE_NAMES:`
        SELECT tables.table_name, tables.table_type FROM information_schema.tables AS tables
        INNER JOIN 
        (SELECT
                pg_class.relname AS table_name,
                 pg_namespace.nspname AS table_schema
        FROM pg_catalog.pg_class AS pg_class
        INNER JOIN pg_catalog.pg_namespace AS pg_namespace 
                ON (pg_namespace.oid = pg_class.relnamespace)
        WHERE pg_class.relispartition = false
                AND pg_class.relkind = ANY('{"r","v","t","m","p"}'))
        AS catalog_table_data
        ON (catalog_table_data.table_name = tables.table_name AND catalog_table_data.table_schema = tables.table_schema)
	LEFT JOIN (SELECT relname AS child_name FROM pg_catalog.pg_inherits AS inherit
		LEFT JOIN pg_catalog.pg_class AS child ON (child.oid = inherit.inhrelid)) AS inherited_tables
	ON (inherited_tables.child_name = tables.table_name)
	WHERE inherited_tables.child_name IS NULL
        AND tables.table_schema = $1;`,GET_NAMESPACE_OID:"SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = $1",GET_TABLE_LEVEL_DATA:`
        SELECT pc.oid, pc.relpersistence, pc.reloptions, pt.spcname, pg_get_expr(pc.relpartbound, pc.oid) AS partition_expr
            FROM pg_catalog.pg_class AS pc 
            LEFT JOIN pg_catalog.pg_tablespace AS pt 
            ON pc.reltablespace = pt.oid
            WHERE pc.relname = $1 AND pc.relnamespace = $2;`,GET_TABLE_TOAST_OPTIONS:`
        SELECT reloptions AS toast_options
        FROM pg_catalog.pg_class
        WHERE oid =
                (SELECT reltoastrelid
                 FROM pg_catalog.pg_class
                 WHERE relname=$1 AND relnamespace = $2
                 LIMIT 1)`,GET_TABLE_PARTITION_DATA:`
        SELECT partstrat as partition_method,
	            partattrs::int2[] as partition_attributes_positions,
	            pg_catalog.pg_get_expr(partexprs, partrelid) AS expressions
            FROM pg_catalog.pg_partitioned_table
            WHERE partrelid = $1;`,GET_TABLE_COLUMNS:`
        SELECT * FROM information_schema.columns
            WHERE table_name = $1 AND table_schema = $2
            ORDER BY ordinal_position`,GET_TABLE_COLUMNS_ADDITIONAL_DATA:`
        SELECT pg_attribute.attname AS name,
            pg_attribute.attndims AS number_of_array_dimensions,
            pg_description.description,
            pg_attribute.atttypmod AS attribute_mode
        FROM pg_catalog.pg_attribute AS pg_attribute
        LEFT JOIN pg_catalog.pg_description AS pg_description ON (pg_description.objsubid=pg_attribute.attnum
                                                               AND pg_description.objoid = pg_attribute.attrelid)
        WHERE pg_attribute.attrelid = $1;`,GET_DESCRIPTION_BY_OID:"SELECT obj_description($1)",GET_ROWS_COUNT:t=>`SELECT COUNT(*) AS quantity FROM ${t};`,GET_SAMPLED_DATA:(t,n)=>`SELECT ${n} FROM ${t} LIMIT $1;`,GET_SAMPLED_DATA_SIZE:(t,n)=>`
        SELECT sum(pg_column_size(_hackolade_tmp_sampling_tbl.*)) AS _hackolade_tmp_sampling_tbl_size 
        FROM (SELECT ${n} FROM ${t} LIMIT $1) AS _hackolade_tmp_sampling_tbl;`,GET_INHERITS_PARENT_TABLE_NAME:`
        SELECT pc.relname AS parent_table_name FROM pg_catalog.pg_inherits AS pi
	        INNER JOIN pg_catalog.pg_class AS pc
	        ON pc.oid = pi.inhparent
	        WHERE pi.inhrelid = $1;`,GET_TABLE_CONSTRAINTS:`
        SELECT pcon.conname AS constraint_name, 
	            pcon.contype AS constraint_type,
	            pcon.connoinherit AS no_inherit,
	            pcon.conkey AS constraint_keys,
	            pg_catalog.pg_get_expr(pcon.conbin, pcon.conrelid) AS expression,
	            obj_description(pcon.oid, 'pg_constraint') AS description,
	            pc.reloptions AS storage_parameters,
	            pt.spcname AS tablespace
	        FROM pg_catalog.pg_constraint AS pcon
	        LEFT JOIN pg_catalog.pg_class AS pc
	        ON pcon.conindid = pc.oid
	        LEFT JOIN pg_catalog.pg_tablespace AS pt
	        ON pc.reltablespace = pt.oid
	        WHERE pcon.conrelid = $1;`,GET_TABLE_INDEXES:qu(),GET_TABLE_INDEXES_V_10:qu(10),GET_TABLE_INDEXES_V_15:qu(15),GET_TABLE_FOREIGN_KEYS:`
        SELECT pcon.conname AS relationship_name, 
                pcon.conkey AS table_columns_positions,
                pcon.confdeltype AS relationship_on_delete,
                pcon.confupdtype AS relationship_on_update,
                pcon.confmatchtype AS relationship_match,
                pc_foreign_table.relname AS foreign_table_name, 
                ARRAY(
                    SELECT column_name::text FROM unnest(pcon.confkey) AS column_position 
                    JOIN information_schema.columns ON (ordinal_position = column_position)
                    WHERE table_name = pc_foreign_table.relname AND table_schema = foreign_table_namespace.nspname)::text[] AS foreign_columns,
                foreign_table_namespace.nspname AS foreign_table_schema
            FROM pg_catalog.pg_constraint AS pcon
            LEFT JOIN pg_catalog.pg_class AS pc ON pcon.conindid = pc.oid
            LEFT JOIN pg_catalog.pg_tablespace AS pt ON pc.reltablespace = pt.oid
            LEFT JOIN pg_catalog.pg_class AS pc_foreign_table ON (pcon.confrelid = pc_foreign_table.oid)
            JOIN pg_catalog.pg_namespace AS foreign_table_namespace ON (pc_foreign_table.relnamespace = foreign_table_namespace.oid)
            WHERE pcon.conrelid = $1 AND pcon.contype = 'f';`,GET_VIEW_DATA:"SELECT * FROM information_schema.views WHERE table_name = $1 AND table_schema = $2;",GET_VIEW_SELECT_STMT_FALLBACK:"SELECT definition FROM pg_views WHERE viewname = $1 AND schemaname = $2;",GET_VIEW_OPTIONS:`
        SELECT oid, 
            reloptions AS view_options,
            relpersistence AS persistence,
            obj_description(oid, 'pg_class') AS description
        FROM pg_catalog.pg_class 
        WHERE relname = $1 AND relnamespace = $2;`,GET_FUNCTIONS_WITH_PROCEDURES:`
        SELECT specific_name,
            routine_name AS name,
            routine_type,
            routine_definition,
            external_language,
            security_type,
            type_udt_name AS return_data_type
	    FROM information_schema.routines
	    WHERE specific_schema=$1;`,GET_FUNCTIONS_WITH_PROCEDURES_ARGS:`
        SELECT parameter_name,
            parameter_mode,
            parameter_default,
            data_type,
            udt_name
        FROM information_schema.parameters
        WHERE specific_name = $1
        ORDER BY ordinal_position;`,GET_FUNCTIONS_WITH_PROCEDURES_ADDITIONAL:Im(),GET_FUNCTIONS_WITH_PROCEDURES_ADDITIONAL_V_10:Im(10),GET_USER_DEFINED_TYPES:`
        SELECT pg_type.typrelid AS pg_class_oid,
            pg_type.typname AS name,
            pg_type.typtype AS type,
            pg_catalog.array_agg(pg_enum.enumlabel)::text[] AS enum_values,
            range_subtype_type.typname AS range_subtype,
            range_collation.collname AS range_collation_name,
            range_opclass.opcname AS range_opclass_name,
            range_canonical_proc.proname AS range_canonical_proc,
            range_diff_proc.proname AS range_diff_proc
        FROM pg_catalog.pg_type AS pg_type
        LEFT JOIN pg_catalog.pg_class AS pg_class ON (pg_class.oid = pg_type.typrelid)
        LEFT JOIN pg_catalog.pg_namespace AS pg_namespace ON (pg_namespace.oid = pg_type.typnamespace)
        LEFT JOIN pg_catalog.pg_enum AS pg_enum ON (pg_enum.enumtypid = pg_type.oid)
        LEFT JOIN pg_catalog.pg_range AS pg_range ON (pg_range.rngtypid = pg_type.oid)
        LEFT JOIN pg_catalog.pg_type AS range_subtype_type ON (range_subtype_type.oid = pg_range.rngsubtype)
        LEFT JOIN pg_catalog.pg_collation AS range_collation ON (range_collation.oid = pg_range.rngcollation)
        LEFT JOIN pg_catalog.pg_opclass AS range_opclass ON (range_opclass.oid = pg_range.rngsubopc)
        LEFT JOIN pg_catalog.pg_proc AS range_canonical_proc ON (range_canonical_proc.oid = pg_range.rngcanonical)
        LEFT JOIN pg_catalog.pg_proc AS range_diff_proc ON (range_diff_proc.oid = pg_range.rngsubdiff)
        WHERE pg_namespace.nspname = $1
         AND ((pg_type.typtype = 'c'
               AND pg_class.relkind = 'c')
              OR pg_type.typtype = 'e'
              OR pg_type.typtype = 'r')
        GROUP BY pg_class_oid,
              pg_type.typname,
              pg_type.typtype,
              pg_class.oid,
              range_subtype,
              range_collation_name,
              range_opclass_name,
              range_canonical_proc,
              range_diff_proc;`,GET_COMPOSITE_TYPE_COLUMNS:`
        SELECT pg_attribute.attname AS column_name,
           pg_type.typname AS data_type,
           pg_get_expr(pg_attrdef.adbin, pg_attrdef.adrelid) AS columns_default,
           pg_attribute.attnotnull AS not_null,
           pg_collation.collname AS collation_name,
           pg_attribute.attndims AS number_of_array_dimensions,
           pg_attribute.atttypmod AS character_maximum_length
        FROM pg_catalog.pg_attribute AS pg_attribute
        LEFT JOIN pg_catalog.pg_type AS pg_type ON (pg_type.oid = pg_attribute.atttypid)
        LEFT JOIN pg_catalog.pg_attrdef AS pg_attrdef ON (pg_attrdef.adrelid = pg_attribute.attrelid
                                                          AND pg_attrdef.adnum = pg_attribute.attnum)
        LEFT JOIN pg_catalog.pg_collation AS pg_collation ON (pg_collation.oid = pg_attribute.attcollation)
        WHERE pg_attribute.attrelid = $1`,GET_DB_NAME:"SELECT current_database();",GET_DB_ENCODING:"SHOW SERVER_ENCODING;",GET_DB_COLLATE_NAME:"SELECT default_collate_name FROM information_schema.character_sets;",GET_DOMAIN_TYPES:"SELECT * FROM information_schema.domains WHERE domain_schema = $1",GET_DOMAIN_TYPES_CONSTRAINTS:`
        SELECT pg_type.typname AS type_name,
        	pg_type.typnotnull AS not_null,
        	pg_constraint.conname AS constraint_name,
        	pg_catalog.pg_get_expr(pg_constraint.conbin, pg_constraint.conrelid) AS expression
        FROM pg_catalog.pg_type AS pg_type
        LEFT JOIN pg_catalog.pg_constraint AS pg_constraint ON (pg_constraint.contypid = pg_type.oid)
        LEFT JOIN pg_catalog.pg_namespace AS pg_namespace ON (pg_namespace.oid = pg_type.typnamespace)
        WHERE pg_type.typname = $1 AND pg_namespace.nspname = $2 AND pg_constraint.contype = 'c';`,GET_DATABASES:"SELECT datname AS database_name FROM pg_catalog.pg_database WHERE datistemplate != TRUE AND datallowconn = TRUE;",GET_TRIGGERS:`
        SELECT trigger_name,
                array_agg(event_manipulation::text) AS trigger_events,
                event_object_schema,
                event_object_table,
                action_orientation,
                action_timing,
                action_reference_old_table,
                action_reference_new_table,
                action_condition,
                action_statement
        FROM
            -- This is information_schema.triggers view but without permitions
            (SELECT (current_database())::information_schema.sql_identifier AS trigger_catalog,
                    (n.nspname)::information_schema.sql_identifier AS trigger_schema,
                    (t.tgname)::information_schema.sql_identifier AS trigger_name,
                    (em.text)::information_schema.character_data AS event_manipulation,
                    (current_database())::information_schema.sql_identifier AS event_object_catalog,
                    (n.nspname)::information_schema.sql_identifier AS event_object_schema,
                    (c.relname)::information_schema.sql_identifier AS event_object_table,
                    (rank() OVER (PARTITION BY (n.nspname)::information_schema.sql_identifier,
                                               (c.relname)::information_schema.sql_identifier,
                                               em.num, ((t.tgtype)::integer & 1), ((t.tgtype)::integer & 66)
                                  ORDER BY t.tgname))::information_schema.cardinal_number AS action_order,
                    (regexp_match(pg_get_triggerdef(t.oid), '.{35,} WHEN ((.+)) EXECUTE FUNCTION'::text))[1]::information_schema.character_data AS action_condition,
                    (SUBSTRING(pg_get_triggerdef(t.oid)
                               FROM (POSITION(('EXECUTE FUNCTION'::text) IN (SUBSTRING(pg_get_triggerdef(t.oid)
                                                                                       FROM 48))) + 47)))::information_schema.character_data AS action_statement,
                    (CASE ((t.tgtype)::integer & 1)
                         WHEN 1 THEN 'ROW'::text
                         ELSE 'STATEMENT'::text
                     END)::information_schema.character_data AS action_orientation,
                    (CASE ((t.tgtype)::integer & 66)
                         WHEN 2 THEN 'BEFORE'::text
                         WHEN 64 THEN 'INSTEAD OF'::text
                         ELSE 'AFTER'::text
                     END)::information_schema.character_data AS action_timing,
                    (t.tgoldtable)::information_schema.sql_identifier AS action_reference_old_table,
                    (t.tgnewtable)::information_schema.sql_identifier AS action_reference_new_table,
                    (NULL::timestamp with time zone)::information_schema.time_stamp AS created
                FROM pg_namespace n,
                        pg_class c,
                        pg_trigger t, (VALUES (4,'INSERT'::text), (8,'DELETE'::text), (16,'UPDATE'::text)) em(num, text)
                WHERE ((n.oid = c.relnamespace)
                        AND (c.oid = t.tgrelid)
                        AND (((t.tgtype)::integer & em.num) <> 0)
                        AND (NOT t.tgisinternal)
                        AND (NOT pg_is_other_temp_schema(n.oid)))) AS tmp_views
        WHERE event_object_schema = $1 AND event_object_table = $2
        GROUP BY
                trigger_schema,
                trigger_name,
                event_object_schema,
                event_object_table,
                action_orientation,
                action_timing,
                action_reference_old_table,
                action_reference_new_table,
                action_condition,
                action_statement;`,GET_TRIGGERS_ADDITIONAL_DATA:`
        SELECT
                pg_catalog.obj_description(pg_trigger.oid, 'pg_trigger') AS description,
        	pg_trigger.tgname AS trigger_name,
        	pg_proc.proname AS function_name,
        	CASE WHEN pg_trigger.tgconstraint != 0 THEN true ELSE false END AS "constraint",
        	array_agg(pg_attribute.attname)::text[] AS update_attributes,
        	tgdeferrable AS "deferrable",
        	tginitdeferred AS deferred,
                pg_class_referenced.relname AS referenced_table_name,
                pg_namespace_referenced.nspname AS referenced_table_schema
        FROM pg_catalog.pg_trigger as pg_trigger
        LEFT JOIN pg_catalog.pg_proc AS pg_proc 
        	ON (pg_trigger.tgfoid = pg_proc.oid)
        LEFT JOIN pg_catalog.pg_attribute AS pg_attribute
        	ON (pg_attribute.attnum = ANY(pg_trigger.tgattr::int2[]) AND pg_trigger.tgrelid = pg_attribute.attrelid)
        INNER JOIN pg_catalog.pg_class AS pg_class
        	ON (pg_class.oid = pg_trigger.tgrelid)
        INNER JOIN pg_catalog.pg_namespace AS pg_namespace
        	ON (pg_class.relnamespace = pg_namespace.oid)
        LEFT JOIN pg_catalog.pg_class AS pg_class_referenced
                ON(pg_class_referenced.oid = pg_trigger.tgconstrrelid)
        LEFT JOIN pg_catalog.pg_namespace AS pg_namespace_referenced
                ON(pg_namespace_referenced.oid = pg_class_referenced.relnamespace)
        WHERE pg_class.relnamespace = $1 AND pg_class.oid = $2
        GROUP BY 
        	trigger_name,
        	function_name,
        	"constraint",
        	"deferrable",
        	deferred,
                description,
                referenced_table_name,
                referenced_table_schema;`,GET_PARTITIONS:`
        SELECT
        	inher_child.relname AS child_name,
        	inher_parent.relname AS parent_name,
                CASE WHEN inher_parent.relkind = 'p' THEN TRUE ELSE FALSE END AS is_parent_partitioned
        FROM pg_inherits
        LEFT JOIN pg_class AS inher_child ON (inher_child.oid = pg_inherits.inhrelid)
        LEFT JOIN pg_class AS inher_parent ON (inher_parent.oid = pg_inherits.inhparent)
        WHERE inher_parent.relnamespace = $1;`,GET_SEQUENCES:`
        SELECT DISTINCT ON (sequence_name)
                information_schema."sequences".sequence_name,
                information_schema."sequences".data_type,
                information_schema."sequences".start_value,
                information_schema."sequences".minimum_value,
                information_schema."sequences".maximum_value,
                information_schema."sequences"."increment",
                information_schema."sequences".cycle_option,
                pg_catalog.pg_sequences.cache_size,
                pg_class.relpersistence as rel_persistance,
                inner_pg_class.relname AS table_name,
                pg_attribute.attname AS column_name
        FROM information_schema."sequences"
        JOIN pg_class ON pg_class.relname = information_schema."sequences".sequence_name
        JOIN pg_depend ON pg_depend.objid = pg_class.oid
        LEFT JOIN pg_catalog.pg_sequences ON (pg_catalog.pg_sequences.schemaname, pg_catalog.pg_sequences.sequencename) = (information_schema."sequences".sequence_schema, information_schema."sequences".sequence_name)
        LEFT JOIN pg_class AS inner_pg_class ON pg_depend.refobjid = inner_pg_class.oid
        LEFT JOIN pg_attribute ON (pg_depend.refobjid, pg_depend.refobjsubid) = (pg_attribute.attrelid, pg_attribute.attnum)
        WHERE pg_class.relkind = 'S'
        AND information_schema."sequences".sequence_schema = $1
        ORDER BY sequence_name, column_name;
        `},fI=s(t=>(Object.entries(wm).find(([i,a])=>t===a)||[])[0]||"Custom query","getQueryName");Om.exports={getQueryName:fI,...wm}});var xm=U((Iq,Rm)=>{"use strict";var dI=Lu(),Wn=null,hs=null;Rm.exports={initializeClient(t,n){Wn=t,hs=n,Wn.on("error",i=>n.error(i))},isClientInitialized(){return!!Wn},releaseClient(){return Wn?new Promise(t=>{Wn.end(()=>{Wn=null,t()})}):Promise.resolve()},async query(t,n,i=!1){let a=dI.getQueryName(t);hs.info("Execute query",{queryName:a,params:n});let u=Date.now(),c=await Wn.query(t,n),p=Date.now()-u;hs.info("Query executed",{queryName:a,params:n,duration:p,rowsCount:c.rowCount});let d=c.rows||[];return i?d[0]:d},async queryTolerant(t,n,i=!1){try{return await this.query(t,n,i)}catch(a){return a.query=t,a.params=n,hs.error(a),null}}}});var Lm=U((wq,qm)=>{"use strict";var Dm=s(t=>{let n=t.reduce((a,u)=>u.properties?{...a,[u.name]:{...u,...Dm(u.properties)}}:{...a,[u.name]:u},{}),i=Object.entries(n).filter(([a,u])=>u.required).map(([a])=>a);return{properties:n,required:i}},"getJsonSchema");qm.exports={getJsonSchema:Dm}});var Pu=U((Rq,Pm)=>{"use strict";var On=null,mI=s(t=>{On=t.require("lodash")},"setDependencies"),Jr={column_default:"default",is_nullable:{keyword:"required",values:{YES:!1,NO:!0}},not_null:"required",data_type:"type",numeric_precision:"precision",numeric_scale:"scale",datetime_precision:"timePrecision",attribute_mode:{keyword:"timePrecision",check:(t,n)=>n!==-1&&CI(t.data_type)},interval_type:"intervalOptions",collation_name:"collationRule",column_name:"name",number_of_array_dimensions:"numberOfArrayDimensions",udt_name:"udt_name",character_maximum_length:"length",description:"description",domain_name:"domain_name"},hI=s((t,n,i)=>{var a;return(a=Jr[n])!=null&&a.check?Jr[n].check(t,i)?i:"":On.get(Jr,`${n}.values.${i}`,i)},"getColumnValue"),gI=s(t=>n=>On.chain(n).toPairs().map(([i,a])=>{var u;return[((u=Jr[i])==null?void 0:u.keyword)||Jr[i],hI(n,i,a)]}).filter(([i,a])=>i&&!On.isNil(a)).fromPairs().thru(_I(t)).value(),"mapColumnData"),_I=s(t=>n=>({...n,...yI(t,n)}),"setColumnType"),yI=s((t,n)=>n.type==="ARRAY"?EI(t,n):n.type==="USER-DEFINED"?gs(t,n.udt_name):n.domain_name?gs(t,n.domain_name):gs(t,n.type),"getType"),EI=s((t,n)=>({...gs(t,n.udt_name.slice(1)),array_type:On.fill(Array(n.numberOfArrayDimensions),"")}),"getArrayType"),gs=s((t,n)=>{switch(n){case"bigint":case"bigserial":case"smallint":case"integer":case"numeric":case"real":case"double precision":case"smallserial":case"serial":case"money":return{type:"numeric",mode:n};case"int8":return{type:"numeric",mode:"bigint"};case"int2":return{type:"numeric",mode:"smallint"};case"int4":return{type:"numeric",mode:"integer"};case"float4":return{type:"numeric",mode:"real"};case"float8":return{type:"numeric",mode:"double precision"};case"bit":case"char":case"text":case"tsvector":case"tsquery":return{type:"char",mode:n};case"bit varying":return{type:"char",mode:"varbit"};case"character":return{type:"char",mode:"char"};case"character varying":return{type:"char",mode:"varchar"};case"bpchar":return{type:"char",mode:"char"};case"point":case"line":case"lseg":case"box":case"path":case"polygon":case"circle":case"box2d":case"box3d":case"geometry":case"geometry_dump":case"geography":return{type:"geometry",mode:n};case"bytea":return{type:"binary",mode:n};case"inet":case"cidr":case"macaddr":case"macaddr8":return{type:"inet",mode:n};case"date":case"time":case"timestamp":case"interval":return{type:"datetime",mode:n};case"timestamptz":case"timestamp with time zone":return{type:"datetime",mode:"timestamp",timezone:"WITH TIME ZONE"};case"timestamp without time zone":return{type:"datetime",mode:"timestamp",timezone:"WITHOUT TIME ZONE"};case"timetz":case"time with time zone":return{type:"datetime",mode:"time",timezone:"WITH TIME ZONE"};case"time without time zone":return{type:"datetime",mode:"time",timezone:"WITHOUT TIME ZONE"};case"json":case"jsonb":return{type:"json",mode:n,subtype:"object"};case"int4range":case"int8range":case"numrange":case"daterange":case"tsrange":case"tstzrange":return{type:"range",mode:n};case"int4multirange":case"int8multirange":case"nummultirange":case"tsmultirange":case"tstzmultirange":case"datemultirange":return{type:"multirange",mode:n};case"uuid":case"xml":case"boolean":return{type:n};case"bool":return{type:"boolean"};case"oid":case"regclass":case"regcollation":case"regconfig":case"regdictionary":case"regnamespace":case"regoper":case"regoperator":case"regproc":case"regprocedure":case"regrole":case"regtype":return{type:"oid",mode:n};default:return On.some(t,{name:n})?{$ref:`#/definitions/${n}`}:{type:"char",mode:"varchar"}}},"mapType"),TI=s((t,n)=>{let i=On.first(n)||{};return t.map(a=>{if(a.type!=="json")return a;let u=i[a.name],c=SI(u),p=AI(c);return{...a,subtype:p}})},"setSubtypeFromSampledJsonValues"),SI=s(t=>{try{return JSON.parse(t)}catch{return{}}},"safeParse"),AI=s(t=>{if(Array.isArray(t))return"array";let n=typeof t;return n==="undefined"?"object":n},"getParsedJsonValueType"),CI=s(t=>On.includes(["timestamp with time zone","timestamp without time zone","time with time zone","time without time zone"],t),"canHaveTimePrecision");Pm.exports={setDependencies:mI,mapColumnData:gI,setSubtypeFromSampledJsonValues:TI}});var ei=U((Dq,Mm)=>{"use strict";var vI=["ALL","ANALYSE","ANALYZE","AND","ANY","ARRAY","ASC","ASYMMETRIC","AUTHORIZATION","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","ILIKE","IN","INITIALLY","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","NATURAL","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","OUTER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH"],_r=null,NI=s(t=>{_r=t.require("lodash")},"setDependencies"),bI=s(t=>_r.chain(t).toPairs().reject(([n,i])=>_r.isNil(i)).fromPairs().value(),"clearEmptyPropertiesInObject"),II=s(t=>n=>{var i;return(i=_r.find(t,{ordinal_position:n}))==null?void 0:i.column_name},"getColumnNameByPosition"),wI=s(t=>/\s|\W/.test(t)||_r.includes(vI,_r.toUpper(t))?`"${t}"`:t,"wrapInQuotes");Mm.exports={clearEmptyPropertiesInObject:bI,setDependencies:NI,getColumnNameByPosition:II,wrapInQuotes:wI}});var Bm=U((Lq,Um)=>{"use strict";var{getColumnNameByPosition:OI}=ei(),Mu=null,RI=s(t=>{Mu=t.require("lodash")},"setDependencies"),Fm=s(t=>{switch(t){case"a":return"NO ACTION";case"r":return"RESTRICT";case"c":return"CASCADE";case"n":return"SET NULL";case"d":return"SET DEFAULT";default:return""}},"prepareDeleteAndUpdate"),xI=s(t=>{switch(t){case"f":return"FULL";case"s":return"SIMPLE";case"p":return"PARTIAL";default:return""}},"prepareMatch"),DI=s((t,n,i,a)=>Mu.map(t,u=>({relationshipName:u.relationship_name,dbName:u.foreign_table_schema,parentCollection:u.foreign_table_name,parentField:u.foreign_columns,childDbName:i,childCollection:n,childField:Mu.map(u.table_columns_positions,OI(a)),relationshipType:"Foreign Key",relationshipInfo:{relationshipOnDelete:Fm(u.relationship_on_delete),relationshipOnUpdate:Fm(u.relationship_on_update),relationshipMatch:xI(u.relationship_match)}})),"prepareForeignKeys");Um.exports={setDependencies:RI,prepareForeignKeys:DI}});var km=U((Mq,Km)=>{"use strict";var _s=null,qI=s(t=>{_s=t.require("lodash")},"setDependencies"),$m=s(t=>_s.map(t,n=>({argumentMode:n.parameter_mode,argumentName:n.parameter_name,argumentType:LI(n.data_type,n.udt_name),defaultExpression:n.parameter_default})),"mapFunctionArgs"),LI=s((t,n)=>t==="USER-DEFINED"?n:t==="ARRAY"?n.slice(1)+"[]":t,"getArgType"),PI=s(t=>{switch(t){case"i":return"IMMUTABLE";case"s":return"STABLE";case"v":default:return"VOLATILE"}},"getVolatility"),MI=s(t=>{switch(t){case"s":return"SAFE";case"r":return"RESTICTED";case"u":return"UNSAFE";default:return""}},"getParallel"),FI=s(t=>t?"STRICT":"CALLED ON NULL INPUT","getNullArgs"),UI=s((t,n,i)=>({name:t.name,functionDescription:i==null?void 0:i.description,functionArguments:$m(n),functionReturnsSetOf:i==null?void 0:i.returns_set,functionReturnType:t.return_data_type,functionLanguage:_s.toLower(t.external_language),functionBody:t.routine_definition??(i==null?void 0:i.body),functionWindow:(i==null?void 0:i.kind)==="w",functionVolatility:PI(i==null?void 0:i.volatility),functionLeakProof:i==null?void 0:i.leak_proof,functionNullArgs:FI(i==null?void 0:i.strict),functionSqlSecurity:t.security_type,functionParallel:MI(t.parallel),functionExecutionCost:t.estimated_cost,functionExecutionRows:t.estimated_rows}),"mapFunctionData"),BI=s((t,n,i)=>({name:t.name,description:i==null?void 0:i.description,language:_s.toLower(t.external_language),inputArgs:$m(n),body:t.routine_definition}),"mapProcedureData");Km.exports={setDependencies:qI,mapFunctionData:UI,mapProcedureData:BI}});var Ym=U((Uq,Vm)=>{"use strict";var{clearEmptyPropertiesInObject:ti,getColumnNameByPosition:ys}=ei(),ye=null,$I=s(t=>{ye=t.require("lodash")},"setDependencies"),Wm=s((t,n)=>{if(!t&&!n)return null;let i=Gm(t),a=Gm(n==null?void 0:n.toast_options),u=i.fillfactor,c=i.parallel_workers,p=i.autovacuum_enabled,d=ti({vacuum_index_cleanup:i.vacuum_index_cleanup,vacuum_truncate:i.vacuum_truncate,autovacuum_vacuum_threshold:i.autovacuum_vacuum_threshold,autovacuum_vacuum_scale_factor:i.autovacuum_vacuum_scale_factor,autovacuum_vacuum_insert_threshold:i.autovacuum_vacuum_insert_threshold,autovacuum_vacuum_insert_scale_factor:i.autovacuum_vacuum_insert_scale_factor,autovacuum_analyze_threshold:i.autovacuum_analyze_threshold,autovacuum_analyze_scale_factor:i.autovacuum_analyze_scale_factor,autovacuum_vacuum_cost_delay:i.autovacuum_vacuum_cost_delay,autovacuum_vacuum_cost_limit:i.autovacuum_vacuum_cost_limit,autovacuum_freeze_min_age:i.autovacuum_freeze_min_age,autovacuum_freeze_max_age:i.autovacuum_freeze_max_age,autovacuum_freeze_table_age:i.autovacuum_freeze_table_age,autovacuum_multixact_freeze_min_age:i.autovacuum_multixact_freeze_min_age,autovacuum_multixact_freeze_max_age:i.autovacuum_multixact_freeze_max_age,autovacuum_multixact_freeze_table_age:i.autovacuum_multixact_freeze_table_age,log_autovacuum_min_duration:i.log_autovacuum_min_duration}),h=i.user_catalog_table,g=a.autovacuum_enabled,T=ti({toast_tuple_target:i.toast_tuple_target,toast_vacuum_index_cleanup:a.vacuum_index_cleanup,toast_vacuum_truncate:a.vacuum_truncate,toast_autovacuum_vacuum_threshold:a.autovacuum_vacuum_threshold,toast_autovacuum_vacuum_scale_factor:a.autovacuum_vacuum_scale_factor,toast_autovacuum_vacuum_insert_threshold:a.autovacuum_vacuum_insert_threshold,toast_autovacuum_vacuum_insert_scale_factor:a.autovacuum_vacuum_insert_scale_factor,toast_autovacuum_vacuum_cost_delay:a.autovacuum_vacuum_cost_delay,toast_autovacuum_vacuum_cost_limit:a.autovacuum_vacuum_cost_limit,toast_autovacuum_freeze_min_age:a.autovacuum_freeze_min_age,toast_autovacuum_freeze_max_age:a.autovacuum_freeze_max_age,toast_autovacuum_freeze_table_age:a.autovacuum_freeze_table_age,toast_autovacuum_multixact_freeze_min_age:a.autovacuum_multixact_freeze_min_age,toast_autovacuum_multixact_freeze_max_age:a.autovacuum_multixact_freeze_max_age,toast_autovacuum_multixact_freeze_table_age:a.autovacuum_multixact_freeze_table_age,toast_log_autovacuum_min_duration:a.log_autovacuum_min_duration}),y={fillfactor:u,parallel_workers:c,autovacuum_enabled:p,autovacuum:ye.isEmpty(d)?null:d,toast_autovacuum_enabled:g,toast:ye.isEmpty(T)?null:T,user_catalog_table:h};return ti(y)},"prepareStorageParameters"),KI=s((t,n)=>{if(!t)return null;let i=kI(t),a=ye.some(t.partition_attributes_positions,p=>p===0),u=a?"partitioning_expression":"compositePartitionKey",c=a?GI(t,n):ye.map(t.partition_attributes_positions,ys(n));return[{partitionMethod:i,partitionBy:a?"expression":"keys",[u]:c}]},"prepareTablePartition"),kI=s(t=>{switch(t.partition_method){case"h":return"HASH";case"l":return"LIST";case"r":return"RANGE";default:return""}},"getPartitionMethod"),GI=s((t,n)=>{let i=0,a=ye.split(t.expressions,",");return ye.chain(t.partition_attributes_positions).map(u=>{if(u===0){let c=a[i];return i++,c}return ys(n)(u)}).join(",").value()},"getPartitionExpression"),Hm=s(t=>ye.split(t,"="),"splitByEqualitySymbol"),WI=s(t=>ye.find(t,{type:"json"}),"checkHaveJsonTypes"),HI=s((t,n)=>{if(n.active==="absolute")return Number(n.absolute.value);let i=Math.ceil(t*n.relative.value/100);return Math.min(i,n.maxValue)},"getSampleDocSize"),VI=s((t,n,i)=>ye.reduce(t,(a,u)=>{switch(u.constraint_type){case"c":return{...a,chkConstr:[...a.chkConstr,zI(u)]};case"p":return{...a,primaryKey:[...a.primaryKey,YI(u,n)]};case"u":return{...a,uniqueKey:[...a.uniqueKey,QI(u,n,i)]};default:return a}},{chkConstr:[],uniqueKey:[],primaryKey:[]}),"prepareTableConstraints"),YI=s((t,n)=>({constraintName:t.constraint_name,compositePrimaryKey:ye.map(t.constraint_keys,ys(n)),indexStorageParameters:ye.join(t.storage_parameters,","),indexTablespace:t.tablespace}),"getPrimaryKeyConstraint"),QI=s((t,n,i)=>{let a=ye.find(i,c=>c.indexname===t.constraint_name),u=a!=null&&a.index_indnullsnotdistinct?"NULLS NOT DISTINCT":"";return{constraintName:t.constraint_name,compositeUniqueKey:ye.map(t.constraint_keys,ys(n)),indexStorageParameters:ye.join(t.storage_parameters,","),indexTablespace:t.tablespace,indexComment:t.description,...u&&{nullsDistinct:u}}},"getUniqueKeyConstraint"),zI=s(t=>({chkConstrName:t.constraint_name,constrExpression:t.expression,noInherit:t.no_inherit,constrDescription:t.description}),"getCheckConstraint"),XI=s(t=>ye.map(t,n=>{let i=ZI(n),a=ye.slice(i,0,n.number_of_keys),u=ye.chain(i).slice(n.number_of_keys).map(d=>ye.pick(d,"name")).value(),c=n.index_indnullsnotdistinct?"NULLS NOT DISTINCT":"",p={indxName:n.indexname,index_method:n.index_method,unique:n.index_unique??!1,index_tablespace_name:n.tablespace_name||"",index_storage_parameter:JI(n.storage_parameters),where:n.where_expression||"",include:u,columns:n.index_method==="btree"?a:ye.map(a,d=>ye.omit(d,"sortOrder","nullsOrder")),...c&&{nullsDistinct:c}};return ti(p)}),"prepareTableIndexes"),ZI=s(t=>ye.chain(t.columns).map((n,i)=>{if(!n)return;let a=ye.get(t,`ascendings.${i}`,!1)?"ASC":"DESC",u=jI(ye.get(t,`nulls_first.${i}`)),c=ye.get(t,`opclasses.${i}`,""),p=ye.get(t,`collations.${i}`,"");return{name:n,sortOrder:a,nullsOrder:u,opclass:c,collation:p}}).compact().value(),"mapIndexColumns"),jI=s(t=>ye.isNil(t)?"":t?"NULLS FIRST":"NULLS LAST","getNullsOrder"),JI=s(t=>{if(!t)return null;let n=ye.fromPairs(ye.map(t,a=>Hm(a))),i={index_fillfactor:n.fillfactor,deduplicate_items:n.deduplicate_items,index_buffering:n.index_buffering,fastupdate:n.fastupdate,gin_pending_list_limit:n.gin_pending_list_limit,pages_per_range:n.pages_per_range,autosummarize:n.autosummarize};return ti(i)},"getIndexStorageParameters"),ew=s((t,n)=>{let i=(t==null?void 0:t.relpersistence)==="t",a=(t==null?void 0:t.relpersistence)==="u",u=Wm(t==null?void 0:t.reloptions,n),c=t==null?void 0:t.spcname,p=t.partition_expr;return{temporary:i,unlogged:a,storage_parameter:u,table_tablespace_name:c,partitionBounds:p}},"prepareTableLevelData"),tw=s(t=>{switch(nw(t)){case"number":case"boolean":return JSON.parse(t);case"string":default:return t}},"convertValueToType"),nw=s(t=>{try{let n=typeof JSON.parse(t);return n==="object"?"string":n}catch{return"string"}},"getTypeOfValue"),Gm=s(t=>ye.chain(t).map(Hm).map(([n,i])=>[n,tw(i)]).fromPairs().value()||{},"prepareOptions"),rw=s((t,n)=>ye.map(n,({parent_table_name:i})=>({parentTable:[t,i]})),"prepareTableInheritance");Vm.exports={prepareStorageParameters:Wm,prepareTablePartition:KI,setDependencies:$I,checkHaveJsonTypes:WI,prepareTableConstraints:VI,prepareTableLevelData:ew,prepareTableIndexes:XI,getSampleDocSize:HI,prepareTableInheritance:rw}});var zm=U(($q,Qm)=>{"use strict";var{mapColumnData:iw}=Pu(),Xt=null,sw=s(t=>{Xt=t.require("lodash")},"setDependencies"),aw=s((t,n)=>Xt.chain(t).map(i=>{switch(i.type){case"e":return ow(i);case"r":return uw(i);case"c":return cw(i);default:return null}}).compact().concat(Xt.map(n,pw)).value(),"getUserDefinedTypes"),ow=s(t=>({name:t.name,type:"enum",enum:t.enum_values||[]}),"getEnumType"),uw=s(t=>({name:t.name,type:"range_udt",rangeSubtype:t.range_subtype||"",operatorClass:t.range_opclass_name||"",collation:t.range_collation_name||"",canonicalFunction:t.range_canonical_proc||"",subtypeDiffFunction:t.range_diff_proc||""}),"getRangeType"),cw=s(t=>{let n=Xt.map(t.columns,iw([]));return{name:t.name,type:"composite",properties:n}},"getCompositeType"),lw=s(t=>t.type==="c","isTypeComposite"),pw=s(t=>{var n;return{name:t.domain_name,type:"domain",underlyingType:Xt.flow(dw(t),mw(t),hw(t),gw(t))(fw(t)),collation:t.collation_name||"",default:t.domain_default||"",required:(n=Xt.first(t.constraints))==null?void 0:n.not_null,checkConstraints:Xt.map(t.constraints,_w)}},"mapDomainType"),fw=s(t=>t.data_type==="USER-DEFINED"?t.udt_name:t.data_type,"getUnderlyingType"),dw=s(t=>n=>t.character_maximum_length?`${n}(${t.character_maximum_length})`:n,"setLength"),mw=s(t=>n=>n!=="numeric"?n:Xt.isNumber(t.numeric_precision)&&Xt.isNumber(t.numeric_scale)?`${n}(${t.numeric_precision},${t.numeric_scale})`:Xt.isNumber(t.numeric_precision)?`${n}(${t.numeric_precision})`:n,"setPrecisionAndScale"),hw=s(t=>n=>t.interval_type?`${n} ${t.interval_type}`:n,"setIntervalType"),gw=s(t=>n=>Xt.isNumber(t.interval_precision)?`${n}(${t.interval_precision})`:n,"setIntervalPrecision"),_w=s(t=>({name:t.constraint_name,expression:t.expression}),"mapDomainConstraint");Qm.exports={setDependencies:sw,getUserDefinedTypes:aw,isTypeComposite:lw}});var Zm=U((kq,Xm)=>{"use strict";var{clearEmptyPropertiesInObject:yw,wrapInQuotes:Ew}=ei(),fn=null,Tw=s(t=>{fn=t.require("lodash")},"setDependencies"),Fu=" (v)",Sw=s(t=>t==="VIEW","isViewByTableType"),Aw=s(t=>fn.endsWith(t,Fu),"isViewByName"),Cw=s(t=>t.slice(0,-Fu.length),"removeViewNameSuffix"),vw=s(t=>`${t}${Fu}`,"setViewSuffix"),Nw=s((t,n,i={})=>{let a=fn.trim(n.view_definition||i.definition||"");return a?`CREATE VIEW ${Ew(t)} AS ${a}`:""},"generateCreateViewScript"),bw=s((t,n,i)=>{let a={withCheckOption:t.check_option!=="NONE"||fn.isNil(t.check_option),checkTestingScope:Iw(t.check_option),viewOptions:fn.fromPairs(fn.map(n==null?void 0:n.view_options,Ow)),temporary:(n==null?void 0:n.persistence)==="t",recursive:ww(t),description:n==null?void 0:n.description,triggers:i};return yw(a)},"prepareViewData"),Iw=s(t=>t==="NONE"?"":t,"getCheckTestingScope"),ww=s(t=>fn.startsWith(fn.trim(t.view_definition),"WITH RECURSIVE"),"isViewRecursive"),Ow=s(t=>fn.split(t,"="),"splitByEqualitySymbol");Xm.exports={setDependencies:Tw,isViewByTableType:Sw,isViewByName:Aw,removeViewNameSuffix:Cw,generateCreateViewScript:Nw,setViewSuffix:vw,prepareViewData:bw}});var Jm=U((Wq,jm)=>{"use strict";var Es=null,Rw=s(t=>{Es=t.require("lodash")},"setDependencies"),xw=s((t,n)=>Es.chain(t).map(i=>({...i,...Es.find(n,{trigger_name:i.trigger_name})||{}})).map(Dw).value(),"getTriggers"),Dw=s(t=>{var n;return{name:t.trigger_name,triggerDescription:t.description,triggerConstraint:t.constraint,triggerTable:`${t.event_object_schema}.${t.event_object_table}`,triggerReferencedTable:t.referenced_table_name?[t.referenced_table_schema,t.referenced_table_name]:[],triggerType:t.action_timing,triggerEvents:qw(t),triggerUpdateColumns:(n=t.update_attributes)==null?void 0:n.filter(Boolean),triggerDeferrable:t.deferrable,triggerTimeConstraintCheck:t.deferred?"INITIALLY DEFERRED":"INITIALLY IMMEDIATE",triggerReferencing:!!t.action_reference_old_table||!!t.action_reference_new_table,triggerBeforeImageTransitionRelation:t.action_reference_old_table||"",triggerAfterImageTransitionRelation:t.action_reference_new_table||"",triggerEachRowStatement:t.action_orientation==="ROW"?"FOR EACH ROW":"FOR EACH STATEMENT",triggerCondition:t.action_condition,triggerFunction:Lw(t.action_statement)}},"getTrigger"),qw=s(t=>Es.map(t.trigger_events,n=>({triggerEvent:n})),"getTriggerEvents"),Lw=s(t=>{var n,i,a;return((a=(i=(n=/EXECUTE (?:FUNCTION|PROCEDURE)(?<function>[\s\S]*)/.exec(t))==null?void 0:n.groups)==null?void 0:i.function)==null?void 0:a.trim())||""},"getFunctionFromTrigger");jm.exports={setDependencies:Rw,getTriggers:xw}});var nh=U((Vq,th)=>{"use strict";var Pw=s((t,n)=>[Mw,Fw].reduce(({attributes:i,entityLevel:a},u)=>u(i,a),{attributes:t,entityLevel:n}),"reorganizeConstraints"),Mw=s((t,n)=>{var c,p,d;if(((d=(p=(c=n.primaryKey)==null?void 0:c[0])==null?void 0:p.compositePrimaryKey)==null?void 0:d.length)!==1)return{attributes:t,entityLevel:n};let a=n.primaryKey[0],u=a.compositePrimaryKey[0];return{attributes:Uw(t,u,a),entityLevel:kw(n)}},"reorganizePrimaryKeys"),Fw=s((t,n)=>(n.uniqueKey||[]).reduce(({attributes:i,entityLevel:a},u)=>{if(!(u.compositeUniqueKey.length===1))return{attributes:i,entityLevel:a};let p=u.compositeUniqueKey[0];return{attributes:$w(i,p,u),entityLevel:Gw(a,u)}},{attributes:t,entityLevel:n}),"reorganizeUniqueKeys"),Uw=s((t,n,i)=>t.map(a=>a.name!==n?a:Bw(a,i)),"setAttributesPrimaryKeyData"),Bw=s((t,n)=>({...t,primaryKey:!0,primaryKeyOptions:eh(n)}),"setPrimaryKeyData"),$w=s((t,n,i)=>t.map(a=>a.name!==n?a:Kw(a,i)),"setAttributesUniqueKeyData"),Kw=s((t,n)=>({...t,unique:!0,uniqueKeyOptions:eh(n)}),"setUniqueKeyData"),eh=s(t=>[{constraintName:t.constraintName,indexInclude:t.indexInclude,indexStorageParameters:t.indexStorageParameters,indexTablespace:t.indexTablespace,indexComment:t.indexComment}],"getOptions"),kw=s(t=>({...t,primaryKey:[]}),"clearPrimaryKeys"),Gw=s((t,n)=>{let i=t.uniqueKey.filter(a=>a.constraintName!==n.constraintName);return{...t,uniqueKey:i}},"filterUniqueKeys");th.exports={reorganizeConstraints:Pw}});var Ts=U((Qq,rh)=>{"use strict";var $u=class $u{cache;cycle;dataType;ifNotExist;increment;maxValue;minValue;ownedByColumn;ownedByNone;sequenceName;start;temporary;unlogged};s($u,"Sequence");var Uu=$u,Ku=class Ku{sequence_name;increment;start;data_type;maximum_value;minimum_value;cycle_option;cache_size;rel_persistance;column_name;table_name};s(Ku,"SequenceDto");var Bu=Ku;rh.exports={Sequence:Uu,SequenceDto:Bu}});var sh=U((jq,ih)=>{"use strict";var{Sequence:Xq,SequenceDto:Zq}=Ts(),Ww=s(({sequence:t})=>t.column_name?[{entity:t.table_name,name:t.column_name}]:[],"getOwnedByColumn"),Hw=s(({sequence:t})=>({sequenceName:t.sequence_name,increment:Number(t.increment),start:Number(t.start_value),dataType:t.data_type,maxValue:Number(t.maximum_value),minValue:Number(t.minimum_value),cache:Number(t.cache_size),temporary:t.rel_persistance==="t",unlogged:t.rel_persistance==="u",cycle:t.cycle_option==="YES",ownedByColumn:Ww({sequence:t}),ownedByNone:!t.column_name}),"mapSequenceData");ih.exports={mapSequenceData:Hw}});var Wu=U((eL,uh)=>{"use strict";var{createClient:Vw}=bm(),oe=xm(),{getJsonSchema:ah}=Lm(),{setDependencies:Yw,mapColumnData:Qw,setSubtypeFromSampledJsonValues:zw}=Pu(),{setDependencies:Xw,clearEmptyPropertiesInObject:oh}=ei(),{setDependencies:Zw,prepareForeignKeys:jw}=Bm(),{setDependencies:Jw,mapFunctionData:eO,mapProcedureData:tO}=km(),{setDependencies:nO,prepareTablePartition:rO,checkHaveJsonTypes:iO,prepareTableConstraints:sO,getSampleDocSize:aO,prepareTableLevelData:oO,prepareTableIndexes:uO,prepareTableInheritance:cO}=Ym(),{setDependencies:lO,getUserDefinedTypes:pO,isTypeComposite:fO}=zm(),{setDependencies:dO,isViewByTableType:mO,isViewByName:hO,removeViewNameSuffix:gO,generateCreateViewScript:_O,setViewSuffix:yO,prepareViewData:EO}=Zm(),{setDependencies:TO,getTriggers:SO}=Jm(),ce=Lu(),{reorganizeConstraints:AO}=nh(),{mapSequenceData:CO}=sh(),ku=!1,Be=null,Tt=null,Gu=14;uh.exports={setDependencies(t){Be=t.require("lodash"),Xw(t),nO(t),Yw(t),Zw(t),dO(t),Jw(t),lO(t),TO(t)},async connect(t,n,i){oe.isClientInitialized()&&await this.disconnect(n);let{client:a,isSshTunnel:u}=await Vw(t,n,i);oe.initializeClient(a,i),ku=u,Tt=i,Gu=await this._getServerVersion()},async disconnect(t){ku&&(ku=!1,await t.closeConsumer()),await oe.releaseClient()},pingDb(){return oe.query(ce.PING)},applyScript(t){return oe.query(t)},async getDatabaseNames(){return Be.map(await oe.query(ce.GET_DATABASES),"database_name")},async logVersion(){let t=await oe.queryTolerant(ce.GET_VERSION,[],!0),n=(t==null?void 0:t.version)||"Version not retrieved";Tt.info(`PostgreSQL version: ${n}`)},async getAllSchemasNames(){return(await oe.query(ce.GET_SCHEMA_NAMES)).map(({schema_name:n})=>n).filter(n=>!vO(n))},async getTablesNames(t){let n=await oe.query(ce.GET_TABLE_NAMES,[t]),i=["FOREIGN TABLE"];return n.filter(({table_type:a})=>!Be.includes(i,a)).map(({table_name:a,table_type:u})=>mO(u)?yO(a):a)},async getDbLevelData(){var a,u,c;Tt.progress("Get database data");let t=(a=await oe.queryTolerant(ce.GET_DB_NAME,[],!0))==null?void 0:a.current_database,n=(u=await oe.queryTolerant(ce.GET_DB_ENCODING,[],!0))==null?void 0:u.server_encoding,i=(c=await oe.queryTolerant(ce.GET_DB_COLLATE_NAME,[],!0))==null?void 0:c.default_collate_name;return oh({database_name:t,encoding:n,LC_COLLATE:i,LC_CTYPE:i})},async retrieveEntitiesData(t,n,i,a=!1,u=!1){let c=await this._retrieveUserDefinedTypes(t),p=await oe.queryTolerant(ce.GET_NAMESPACE_OID,[t],!0),d=p==null?void 0:p.oid,h=a?await oe.queryTolerant(ce.GET_PARTITIONS,[d]):[],[g,T]=Be.partition(n,hO),y=T.flatMap(C=>[{tableName:C},...Be.filter(h,{parent_name:C}).map(({child_name:x,is_parent_partitioned:I})=>({isParentPartitioned:I,tableName:x}))]),E=await yr(Be.uniq(y),Be.bind(this._retrieveSingleTableData,this,i,d,t,c,u));return{views:await yr(g,Be.bind(this._retrieveSingleViewData,this,d,t,u)),tables:E,modelDefinitions:ah(c)}},async retrieveSchemaLevelData(t,n){var y;if(n)return Tt.info("Functions and procedures ignored"),{functions:[],procedures:[]};Tt.progress("Get Functions and Procedures",t);let i=(y=await oe.queryTolerant(ce.GET_NAMESPACE_OID,[t],!0))==null?void 0:y.oid,a=await oe.queryTolerant(ce.GET_FUNCTIONS_WITH_PROCEDURES,[t]),u=await oe.queryTolerant(bO(Gu),[i]),[c,p]=Be.partition(Be.filter(a,"routine_type"),{routine_type:"FUNCTION"}),d=await yr(c,async E=>{let S=await oe.queryTolerant(ce.GET_FUNCTIONS_WITH_PROCEDURES_ARGS,[E.specific_name]),C=Be.find(u,{function_name:E.name});return eO(E,S,C)}),h=await yr(p,async E=>{let S=await oe.queryTolerant(ce.GET_FUNCTIONS_WITH_PROCEDURES_ARGS,[E.specific_name]),C=Be.find(u,{function_name:E.name});return tO(E,S,C)}),T=(await oe.queryTolerant(ce.GET_SEQUENCES,[t])).map(E=>CO({sequence:E}));return{functions:d,procedures:h,sequences:T}},async _retrieveUserDefinedTypes(t){Tt.progress("Get User-Defined Types",t);let n=await oe.queryTolerant(ce.GET_USER_DEFINED_TYPES,[t]),i=await oe.queryTolerant(ce.GET_DOMAIN_TYPES,[t]),a=await yr(n,async c=>fO(c)?{...c,columns:await oe.queryTolerant(ce.GET_COMPOSITE_TYPE_COLUMNS,[c.pg_class_oid])}:c),u=await yr(i,async c=>({...c,constraints:await oe.queryTolerant(ce.GET_DOMAIN_TYPES_CONSTRAINTS,[c.domain_name,t])}));return pO(a,u)},async _retrieveSingleTableData(t,n,i,a,u,{tableName:c,isParentPartitioned:p}){var Ye;Tt.progress("Get table data",i,c);let d=await oe.queryTolerant(ce.GET_TABLE_LEVEL_DATA,[c,n],!0),h=d==null?void 0:d.oid,g=await oe.queryTolerant(ce.GET_TABLE_TOAST_OPTIONS,[c,n],!0),T=await oe.queryTolerant(ce.GET_TABLE_PARTITION_DATA,[h],!0),y=await this._getTableColumns(c,i,h),E=await oe.queryTolerant(ce.GET_DESCRIPTION_BY_OID,[h],!0),S=await oe.queryTolerant(ce.GET_INHERITS_PARENT_TABLE_NAME,[h]),C=await oe.queryTolerant(ce.GET_TABLE_CONSTRAINTS,[h]),x=await oe.queryTolerant(NO(Gu),[h]),I=await oe.queryTolerant(ce.GET_TABLE_FOREIGN_KEYS,[h]),N=await this._getTriggers(i,c,n,h,u);Tt.info("Table data retrieved",{schemaName:i,tableName:c,columnTypes:y.map(Nr=>Nr.data_type)});let F=rO(T,y),q=oO(d,g),$=IO(E),k=cO(i,S),V=sO(C,y,x),ie=uO(x),K=jw(I,c,i,y),Q={partitioning:F,description:$,triggers:N,Indxs:ie,...q,...V,...p?{partitionOf:(Ye=Be.first(k))==null?void 0:Ye.parentTable}:{inherits:k}},Ee=oh(Q),se=y.map(Qw(a)),Oe=iO(se),Gt=[];Oe&&(Gt=await this._getDocuments(i,c,se,t),se=zw(se,Gt));let{attributes:ft,entityLevel:Z}=AO(se,Ee);return{name:c,entityLevel:Z,jsonSchema:ah(ft),documents:Gt,relationships:K}},async _getTriggers(t,n,i,a,u){if(u)return Tt.info("Triggers ignored"),[];let c=await oe.queryTolerant(ce.GET_TRIGGERS,[t,n]),p=await oe.queryTolerant(ce.GET_TRIGGERS_ADDITIONAL_DATA,[i,a]);return SO(c,p)},async _getTableColumns(t,n,i){Tt.progress("Get columns",n,t);let a=await oe.query(ce.GET_TABLE_COLUMNS,[t,n]),u=await oe.queryTolerant(ce.GET_TABLE_COLUMNS_ADDITIONAL_DATA,[i]);return Be.map(a,c=>({...c,...Be.find(u,{name:c.column_name})||{}}))},async _getDocuments(t,n,i,a){var T;Tt.progress("Sampling table",t,n);let u=`${t}.${n}`,c=((T=await oe.queryTolerant(ce.GET_ROWS_COUNT(u),[],!0))==null?void 0:T.quantity)||0,p=aO(c,a),d=i.filter(({type:y})=>Be.includes(["json","jsonb"],y)),h=Be.map(d,"name").join(", "),g=await oe.queryTolerant(ce.GET_SAMPLED_DATA_SIZE(u,h),[p],!0);return Tt.info("Sampling table",{tableName:n,jsonColumnsNumber:d.length,samplingDataSize:g==null?void 0:g._hackolade_tmp_sampling_tbl_size}),await oe.queryTolerant(ce.GET_SAMPLED_DATA(u,h),[p])},async _retrieveSingleViewData(t,n,i,a){Tt.progress("Get view data",n,a),a=gO(a);let u=await oe.query(ce.GET_VIEW_DATA,[a,n],!0),c=!u.view_definition&&await oe.queryTolerant(ce.GET_VIEW_SELECT_STMT_FALLBACK,[a,n],!0),p=await oe.queryTolerant(ce.GET_VIEW_OPTIONS,[a,t],!0),d=await this._getTriggers(n,a,t,p==null?void 0:p.oid,i),h=_O(a,u,c),g=EO(u,p,d);return h?{name:a,data:g,ddl:{script:h,type:"postgres"}}:(Tt.info("View select statement was not retrieved",{schemaName:n,viewName:a}),{name:a,data:g,jsonSchema:{properties:[]}})},async _getServerVersion(){let t=await oe.queryTolerant(ce.GET_VERSION_AS_NUM,[],!0),n=Be.toNumber(t==null?void 0:t.server_version_num);return n>=1e5&&n<11e4?10:n>=11e4&&n<12e4?11:n>=12e4&&n<13e4?12:n>=13e4&&n<14e4?13:(n>=14e4&&n<15e4,14)}};var vO=s(t=>!!(Be.startsWith(t,"pg_")||Be.includes(["information_schema"],t)),"isSystemSchema"),NO=s(t=>t===10?ce.GET_TABLE_INDEXES_V_10:t>15?ce.GET_TABLE_INDEXES_V_15:ce.GET_TABLE_INDEXES,"getGetIndexesQuery"),bO=s(t=>t===10?ce.GET_FUNCTIONS_WITH_PROCEDURES_ADDITIONAL_V_10:ce.GET_FUNCTIONS_WITH_PROCEDURES_ADDITIONAL,"getGetFunctionsAdditionalDataQuery"),IO=s(t=>t==null?void 0:t.obj_description,"getDescriptionFromResult"),yr=s((t,n)=>Promise.all(Be.map(t,n)),"mapPromises")});var lh=U((nL,ch)=>{"use strict";var{createLogger:Ss}=no(),We=Wu();ch.exports={async disconnect(t,n,i,a){let u=a.require("@hackolade/ssh-service");await We.disconnect(u),i()},async testConnection(t,n,i,a){let u=a.require("@hackolade/ssh-service");try{Hu("Test connection",t,n);let c=Ss({title:"Test connection instance log",hiddenKeys:t.hiddenKeys,logger:n});We.setDependencies(a),await We.connect(t,u,c),await We.pingDb(),await We.logVersion(),i()}catch(c){n.log("error",Hn(c),"Test connection instance log"),i(Hn(c))}finally{await We.disconnect(u)}},async getDatabases(t,n,i,a){let u=a.require("@hackolade/ssh-service");try{Hu("Get databases",t,n);let c=Ss({title:"Get DB names",hiddenKeys:t.hiddenKeys,logger:n});We.setDependencies(a),await We.connect(t,u,c),await We.logVersion();let p=await We.getDatabaseNames();return n.log("info",p,"All databases list",t.hiddenKeys),i(null,p)}catch(c){return n.log("error",c),i(Hn(c))}},getDocumentKinds:function(t,n,i){i(null,[])},async getDbCollectionsNames(t,n,i,a){let u=a.require("@hackolade/ssh-service");try{Hu("Get DB table names",t,n);let c=Ss({title:"Get DB collections names",hiddenKeys:t.hiddenKeys,logger:n});We.setDependencies(a),await We.connect(t,u,c),await We.logVersion();let d=await(await We.getAllSchemasNames()).reduce(async(h,g)=>{let T=await h;try{let y=await We.getTablesNames(g);return T.concat({dbName:g,dbCollections:y,isEmpty:y.length===0})}catch(y){return c.info(`Error reading database "${g}"`),c.error(y),T.concat({dbName:g,dbCollections:[],isEmpty:!0,status:!0})}},Promise.resolve([]));i(null,d)}catch(c){n.log("error",Hn(c),"Get DB collections names"),i(Hn(c)),await We.disconnect(u)}},async getDbCollectionsData(t,n,i,a){let u=a.require("@hackolade/ssh-service");try{n.log("info",t,"Retrieve tables data:",t.hiddenKeys);let c=Ss({title:"Get DB collections data log",hiddenKeys:t.hiddenKeys,logger:n});c.progress("Start reverse engineering...");let p=t.collectionData.collections,d=t.collectionData.dataBaseNames,h=await We.getDbLevelData(),{packages:g,relationships:T}=await Promise.all(d.map(async y=>{let{tables:E,views:S,modelDefinitions:C}=await We.retrieveEntitiesData(y,p[y],t.recordSamplingSettings,t.includePartitions,t.ignoreUdfUdpTriggers),{functions:x,procedures:I,triggers:N,sequences:F}=await We.retrieveSchemaLevelData(y,t.ignoreUdfUdpTriggers);return c.progress("Schema data fetched successfully",y),{schemaName:y,tables:E,views:S,functions:x,procedures:I,modelDefinitions:C,triggers:N,sequences:F}})).then(y=>{let E=y.flatMap(({tables:C})=>C.map(x=>x.relationships)).flat();return{packages:y.flatMap(({schemaName:C,tables:x,views:I,functions:N,procedures:F,triggers:q,modelDefinitions:$,sequences:k})=>{let V={UDFs:N,Procedures:F,triggers:q,sequences:k},ie=x.map(K=>({dbName:C,collectionName:K.name,documents:K.documents,views:[],emptyBucket:!1,entityLevel:K.entityLevel,validation:{jsonSchema:K.jsonSchema},bucketInfo:V,modelDefinitions:$})).sort(K=>a.require("lodash").isEmpty(K.entityLevel.inherits)?-1:1);if(I!=null&&I.length){let K={dbName:C,views:I,emptyBucket:!1};return[...ie,K]}return ie}),relationships:E}}).then(({packages:y,relationships:E})=>({packages:wO(y),relationships:E}));c.info("The data is processed and sent to the application",{packagesLength:g==null?void 0:g.length,relationshipsLength:T==null?void 0:T.length}),i(null,g,h,T)}catch(c){n.log("error",Hn(c),"Retrieve tables data"),i(Hn(c))}finally{await We.disconnect(u)}}};var Hn=s(t=>(t=JSON.stringify(t,Object.getOwnPropertyNames(t)),t=JSON.parse(t),t),"prepareError"),Hu=s((t,n,i)=>{i.clear(),i.log("info",n,"connectionInfo",n.hiddenKeys)},"logInfo"),wO=s(t=>t.sort((n,i)=>!n.collectionName&&!i.collectionName?0:n.collectionName?i.collectionName?n.collectionName.localeCompare(i.collectionName):-1:1),"orderPackages")});var fh=U((iL,ph)=>{"use strict";var As=Wu(),OO=s(async(t,n,i)=>{try{let a=i.require("@hackolade/ssh-service");As.setDependencies(i),await As.connect(t,a,n),await As.logVersion(),await As.applyScript(RO(t.script))}catch(a){throw n.error(a),xO(a)}},"applyToInstance"),RO=s(t=>{let n=/CREATE DATABASE[^;]*;/gi;return t.replace(n,"")},"removeCreateDbScript"),xO=s(t=>(t=JSON.stringify(t,Object.getOwnPropertyNames(t)),t=JSON.parse(t),t),"prepareError");ph.exports={applyToInstance:OO}});var $e=U((aL,dh)=>{"use strict";var Qu=class Qu{script;isDropScript};s(Qu,"ModificationScript");var Vu=Qu,zu=class zu{isActivated;scripts;static getInstances(n,i,a){return(n||[]).filter(Boolean).map(u=>({isActivated:i,scripts:[{isDropScript:a,script:u}]}))}static getInstance(n,i,a){var u;if((u=n==null?void 0:n.filter(Boolean))!=null&&u.length)return{isActivated:i,scripts:n.filter(Boolean).map(c=>({isDropScript:a,script:c}))}}static getDropAndRecreateInstance(n,i,a){let u=[];if(n&&u.push({isDropScript:!0,script:n}),i&&u.push({isDropScript:!1,script:i}),!!(u!=null&&u.length))return{isActivated:a,scripts:u}}};s(zu,"AlterScriptDto");var Yu=zu;dh.exports={ModificationScript:Vu,AlterScriptDto:Yu}});var Xu=U((Er,ni)=>{(function(){var t,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",g=1,T=2,y=4,E=1,S=2,C=1,x=2,I=4,N=8,F=16,q=32,$=64,k=128,V=256,ie=512,K=30,Q="...",Ee=800,se=16,Oe=1,Gt=2,ft=3,Z=1/0,Ye=9007199254740991,Nr=17976931348623157e292,Yn=NaN,Dt=4294967295,Ls=Dt-1,Ps=Dt>>>1,Ms=[["ary",k],["bind",C],["bindKey",x],["curry",N],["curryRight",F],["flip",ie],["partial",q],["partialRight",$],["rearg",V]],dn="[object Arguments]",Qn="[object Array]",Fs="[object AsyncFunction]",mn="[object Boolean]",hn="[object Date]",Us="[object DOMException]",v="[object Error]",R="[object Function]",G="[object GeneratorFunction]",W="[object Map]",ue="[object Number]",be="[object Null]",ge="[object Object]",Re="[object Promise]",Ke="[object Proxy]",Pe="[object RegExp]",Ie="[object Set]",ke="[object String]",Ce="[object Symbol]",Ct="[object Undefined]",Je="[object WeakMap]",ot="[object WeakSet]",et="[object ArrayBuffer]",nt="[object DataView]",dt="[object Float32Array]",Ge="[object Float64Array]",vt="[object Int8Array]",Nt="[object Int16Array]",gn="[object Int32Array]",Wt="[object Uint8Array]",rt="[object Uint8ClampedArray]",xn="[object Uint16Array]",Dn="[object Uint32Array]",qn=/\b__p \+= '';/g,ai=/\b(__p \+=) '' \+/g,Bs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,br=/&(?:amp|lt|gt|quot|#39);/g,oi=/[&<>"']/g,$s=RegExp(br.source),Ks=RegExp(oi.source),ui=/<%-([\s\S]+?)%>/g,ci=/<%([\s\S]+?)%>/g,li=/<%=([\s\S]+?)%>/g,ks=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gs=/^\w*$/,Ws=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,L_=RegExp(Ht.source),Hs=/^\s+/,P_=/\s/,M_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,F_=/\{\n\/\* \[wrapped with (.+)\] \*/,U_=/,? & /,B_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$_=/[()=,{}\[\]\/\s]/,K_=/\\(\\)?/g,k_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ml=/\w*$/,G_=/^[-+]0x[0-9a-f]+$/i,W_=/^0b[01]+$/i,H_=/^\[object .+?Constructor\]$/,V_=/^0o[0-7]+$/i,Y_=/^(?:0|[1-9]\d*)$/,Q_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pi=/($^)/,z_=/['\n\r\u2028\u2029\\]/g,fi="\\ud800-\\udfff",X_="\\u0300-\\u036f",Z_="\\ufe20-\\ufe2f",j_="\\u20d0-\\u20ff",hl=X_+Z_+j_,gl="\\u2700-\\u27bf",_l="a-z\\xdf-\\xf6\\xf8-\\xff",J_="\\xac\\xb1\\xd7\\xf7",ey="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ty="\\u2000-\\u206f",ny=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yl="A-Z\\xc0-\\xd6\\xd8-\\xde",El="\\ufe0e\\ufe0f",Tl=J_+ey+ty+ny,Vs="['\u2019]",ry="["+fi+"]",Sl="["+Tl+"]",di="["+hl+"]",Al="\\d+",iy="["+gl+"]",Cl="["+_l+"]",vl="[^"+fi+Tl+Al+gl+_l+yl+"]",Ys="\\ud83c[\\udffb-\\udfff]",sy="(?:"+di+"|"+Ys+")",Nl="[^"+fi+"]",Qs="(?:\\ud83c[\\udde6-\\uddff]){2}",zs="[\\ud800-\\udbff][\\udc00-\\udfff]",zn="["+yl+"]",bl="\\u200d",Il="(?:"+Cl+"|"+vl+")",ay="(?:"+zn+"|"+vl+")",wl="(?:"+Vs+"(?:d|ll|m|re|s|t|ve))?",Ol="(?:"+Vs+"(?:D|LL|M|RE|S|T|VE))?",Rl=sy+"?",xl="["+El+"]?",oy="(?:"+bl+"(?:"+[Nl,Qs,zs].join("|")+")"+xl+Rl+")*",uy="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dl=xl+Rl+oy,ly="(?:"+[iy,Qs,zs].join("|")+")"+Dl,py="(?:"+[Nl+di+"?",di,Qs,zs,ry].join("|")+")",fy=RegExp(Vs,"g"),dy=RegExp(di,"g"),Xs=RegExp(Ys+"(?="+Ys+")|"+py+Dl,"g"),my=RegExp([zn+"?"+Cl+"+"+wl+"(?="+[Sl,zn,"$"].join("|")+")",ay+"+"+Ol+"(?="+[Sl,zn+Il,"$"].join("|")+")",zn+"?"+Il+"+"+wl,zn+"+"+Ol,cy,uy,Al,ly].join("|"),"g"),hy=RegExp("["+bl+fi+hl+El+"]"),gy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_y=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yy=-1,Ne={};Ne[dt]=Ne[Ge]=Ne[vt]=Ne[Nt]=Ne[gn]=Ne[Wt]=Ne[rt]=Ne[xn]=Ne[Dn]=!0,Ne[dn]=Ne[Qn]=Ne[et]=Ne[mn]=Ne[nt]=Ne[hn]=Ne[v]=Ne[R]=Ne[W]=Ne[ue]=Ne[ge]=Ne[Pe]=Ne[Ie]=Ne[ke]=Ne[Je]=!1;var ve={};ve[dn]=ve[Qn]=ve[et]=ve[nt]=ve[mn]=ve[hn]=ve[dt]=ve[Ge]=ve[vt]=ve[Nt]=ve[gn]=ve[W]=ve[ue]=ve[ge]=ve[Pe]=ve[Ie]=ve[ke]=ve[Ce]=ve[Wt]=ve[rt]=ve[xn]=ve[Dn]=!0,ve[v]=ve[R]=ve[Je]=!1;var Ey={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ty={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Sy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ay={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cy=parseFloat,vy=parseInt,ql=typeof global=="object"&&global&&global.Object===Object&&global,Ny=typeof self=="object"&&self&&self.Object===Object&&self,Xe=ql||Ny||Function("return this")(),Zs=typeof Er=="object"&&Er&&!Er.nodeType&&Er,Ln=Zs&&typeof ni=="object"&&ni&&!ni.nodeType&&ni,Ll=Ln&&Ln.exports===Zs,js=Ll&&ql.process,qt=function(){try{var w=Ln&&Ln.require&&Ln.require("util").types;return w||js&&js.binding&&js.binding("util")}catch{}}(),Pl=qt&&qt.isArrayBuffer,Ml=qt&&qt.isDate,Fl=qt&&qt.isMap,Ul=qt&&qt.isRegExp,Bl=qt&&qt.isSet,$l=qt&&qt.isTypedArray;function bt(w,L,D){switch(D.length){case 0:return w.call(L);case 1:return w.call(L,D[0]);case 2:return w.call(L,D[0],D[1]);case 3:return w.call(L,D[0],D[1],D[2])}return w.apply(L,D)}s(bt,"apply");function by(w,L,D,Y){for(var re=-1,_e=w==null?0:w.length;++re<_e;){var Qe=w[re];L(Y,Qe,D(Qe),w)}return Y}s(by,"arrayAggregator");function Lt(w,L){for(var D=-1,Y=w==null?0:w.length;++D<Y&&L(w[D],D,w)!==!1;);return w}s(Lt,"arrayEach");function Iy(w,L){for(var D=w==null?0:w.length;D--&&L(w[D],D,w)!==!1;);return w}s(Iy,"arrayEachRight");function Kl(w,L){for(var D=-1,Y=w==null?0:w.length;++D<Y;)if(!L(w[D],D,w))return!1;return!0}s(Kl,"arrayEvery");function _n(w,L){for(var D=-1,Y=w==null?0:w.length,re=0,_e=[];++D<Y;){var Qe=w[D];L(Qe,D,w)&&(_e[re++]=Qe)}return _e}s(_n,"arrayFilter");function mi(w,L){var D=w==null?0:w.length;return!!D&&Xn(w,L,0)>-1}s(mi,"arrayIncludes");function Js(w,L,D){for(var Y=-1,re=w==null?0:w.length;++Y<re;)if(D(L,w[Y]))return!0;return!1}s(Js,"arrayIncludesWith");function we(w,L){for(var D=-1,Y=w==null?0:w.length,re=Array(Y);++D<Y;)re[D]=L(w[D],D,w);return re}s(we,"arrayMap");function yn(w,L){for(var D=-1,Y=L.length,re=w.length;++D<Y;)w[re+D]=L[D];return w}s(yn,"arrayPush");function ea(w,L,D,Y){var re=-1,_e=w==null?0:w.length;for(Y&&_e&&(D=w[++re]);++re<_e;)D=L(D,w[re],re,w);return D}s(ea,"arrayReduce");function wy(w,L,D,Y){var re=w==null?0:w.length;for(Y&&re&&(D=w[--re]);re--;)D=L(D,w[re],re,w);return D}s(wy,"arrayReduceRight");function ta(w,L){for(var D=-1,Y=w==null?0:w.length;++D<Y;)if(L(w[D],D,w))return!0;return!1}s(ta,"arraySome");var Oy=na("length");function Ry(w){return w.split("")}s(Ry,"asciiToArray");function xy(w){return w.match(B_)||[]}s(xy,"asciiWords");function kl(w,L,D){var Y;return D(w,function(re,_e,Qe){if(L(re,_e,Qe))return Y=_e,!1}),Y}s(kl,"baseFindKey");function hi(w,L,D,Y){for(var re=w.length,_e=D+(Y?1:-1);Y?_e--:++_e<re;)if(L(w[_e],_e,w))return _e;return-1}s(hi,"baseFindIndex");function Xn(w,L,D){return L===L?Gy(w,L,D):hi(w,Gl,D)}s(Xn,"baseIndexOf");function Dy(w,L,D,Y){for(var re=D-1,_e=w.length;++re<_e;)if(Y(w[re],L))return re;return-1}s(Dy,"baseIndexOfWith");function Gl(w){return w!==w}s(Gl,"baseIsNaN");function Wl(w,L){var D=w==null?0:w.length;return D?ia(w,L)/D:Yn}s(Wl,"baseMean");function na(w){return function(L){return L==null?t:L[w]}}s(na,"baseProperty");function ra(w){return function(L){return w==null?t:w[L]}}s(ra,"basePropertyOf");function Hl(w,L,D,Y,re){return re(w,function(_e,Qe,Ae){D=Y?(Y=!1,_e):L(D,_e,Qe,Ae)}),D}s(Hl,"baseReduce");function qy(w,L){var D=w.length;for(w.sort(L);D--;)w[D]=w[D].value;return w}s(qy,"baseSortBy");function ia(w,L){for(var D,Y=-1,re=w.length;++Y<re;){var _e=L(w[Y]);_e!==t&&(D=D===t?_e:D+_e)}return D}s(ia,"baseSum");function sa(w,L){for(var D=-1,Y=Array(w);++D<w;)Y[D]=L(D);return Y}s(sa,"baseTimes");function Ly(w,L){return we(L,function(D){return[D,w[D]]})}s(Ly,"baseToPairs");function Vl(w){return w&&w.slice(0,Xl(w)+1).replace(Hs,"")}s(Vl,"baseTrim");function It(w){return function(L){return w(L)}}s(It,"baseUnary");function aa(w,L){return we(L,function(D){return w[D]})}s(aa,"baseValues");function Ir(w,L){return w.has(L)}s(Ir,"cacheHas");function Yl(w,L){for(var D=-1,Y=w.length;++D<Y&&Xn(L,w[D],0)>-1;);return D}s(Yl,"charsStartIndex");function Ql(w,L){for(var D=w.length;D--&&Xn(L,w[D],0)>-1;);return D}s(Ql,"charsEndIndex");function Py(w,L){for(var D=w.length,Y=0;D--;)w[D]===L&&++Y;return Y}s(Py,"countHolders");var My=ra(Ey),Fy=ra(Ty);function Uy(w){return"\\"+Ay[w]}s(Uy,"escapeStringChar");function By(w,L){return w==null?t:w[L]}s(By,"getValue");function Zn(w){return hy.test(w)}s(Zn,"hasUnicode");function $y(w){return gy.test(w)}s($y,"hasUnicodeWord");function Ky(w){for(var L,D=[];!(L=w.next()).done;)D.push(L.value);return D}s(Ky,"iteratorToArray");function oa(w){var L=-1,D=Array(w.size);return w.forEach(function(Y,re){D[++L]=[re,Y]}),D}s(oa,"mapToArray");function zl(w,L){return function(D){return w(L(D))}}s(zl,"overArg");function En(w,L){for(var D=-1,Y=w.length,re=0,_e=[];++D<Y;){var Qe=w[D];(Qe===L||Qe===h)&&(w[D]=h,_e[re++]=D)}return _e}s(En,"replaceHolders");function gi(w){var L=-1,D=Array(w.size);return w.forEach(function(Y){D[++L]=Y}),D}s(gi,"setToArray");function ky(w){var L=-1,D=Array(w.size);return w.forEach(function(Y){D[++L]=[Y,Y]}),D}s(ky,"setToPairs");function Gy(w,L,D){for(var Y=D-1,re=w.length;++Y<re;)if(w[Y]===L)return Y;return-1}s(Gy,"strictIndexOf");function Wy(w,L,D){for(var Y=D+1;Y--;)if(w[Y]===L)return Y;return Y}s(Wy,"strictLastIndexOf");function jn(w){return Zn(w)?Vy(w):Oy(w)}s(jn,"stringSize");function Vt(w){return Zn(w)?Yy(w):Ry(w)}s(Vt,"stringToArray");function Xl(w){for(var L=w.length;L--&&P_.test(w.charAt(L)););return L}s(Xl,"trimmedEndIndex");var Hy=ra(Sy);function Vy(w){for(var L=Xs.lastIndex=0;Xs.test(w);)++L;return L}s(Vy,"unicodeSize");function Yy(w){return w.match(Xs)||[]}s(Yy,"unicodeToArray");function Qy(w){return w.match(my)||[]}s(Qy,"unicodeWords");var zy=s(function w(L){L=L==null?Xe:Tn.defaults(Xe.Object(),L,Tn.pick(Xe,_y));var D=L.Array,Y=L.Date,re=L.Error,_e=L.Function,Qe=L.Math,Ae=L.Object,ua=L.RegExp,Xy=L.String,Pt=L.TypeError,_i=D.prototype,Zy=_e.prototype,Jn=Ae.prototype,yi=L["__core-js_shared__"],Ei=Zy.toString,Se=Jn.hasOwnProperty,jy=0,Zl=function(){var e=/[^.]+$/.exec(yi&&yi.keys&&yi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ti=Jn.toString,Jy=Ei.call(Ae),eE=Xe._,tE=ua("^"+Ei.call(Se).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Si=Ll?L.Buffer:t,Sn=L.Symbol,Ai=L.Uint8Array,jl=Si?Si.allocUnsafe:t,Ci=zl(Ae.getPrototypeOf,Ae),Jl=Ae.create,ep=Jn.propertyIsEnumerable,vi=_i.splice,tp=Sn?Sn.isConcatSpreadable:t,wr=Sn?Sn.iterator:t,Pn=Sn?Sn.toStringTag:t,Ni=function(){try{var e=$n(Ae,"defineProperty");return e({},"",{}),e}catch{}}(),nE=L.clearTimeout!==Xe.clearTimeout&&L.clearTimeout,rE=Y&&Y.now!==Xe.Date.now&&Y.now,iE=L.setTimeout!==Xe.setTimeout&&L.setTimeout,bi=Qe.ceil,Ii=Qe.floor,ca=Ae.getOwnPropertySymbols,sE=Si?Si.isBuffer:t,np=L.isFinite,aE=_i.join,oE=zl(Ae.keys,Ae),ze=Qe.max,it=Qe.min,uE=Y.now,cE=L.parseInt,rp=Qe.random,lE=_i.reverse,la=$n(L,"DataView"),Or=$n(L,"Map"),pa=$n(L,"Promise"),er=$n(L,"Set"),Rr=$n(L,"WeakMap"),xr=$n(Ae,"create"),wi=Rr&&new Rr,tr={},pE=Kn(la),fE=Kn(Or),dE=Kn(pa),mE=Kn(er),hE=Kn(Rr),Oi=Sn?Sn.prototype:t,Dr=Oi?Oi.valueOf:t,ip=Oi?Oi.toString:t;function m(e){if(Me(e)&&!ae(e)&&!(e instanceof me)){if(e instanceof Mt)return e;if(Se.call(e,"__wrapped__"))return af(e)}return new Mt(e)}s(m,"lodash");var nr=function(){function e(){}return s(e,"object"),function(r){if(!xe(r))return{};if(Jl)return Jl(r);e.prototype=r;var o=new e;return e.prototype=t,o}}();function Ri(){}s(Ri,"baseLodash");function Mt(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=t}s(Mt,"LodashWrapper"),m.templateSettings={escape:ui,evaluate:ci,interpolate:li,variable:"",imports:{_:m}},m.prototype=Ri.prototype,m.prototype.constructor=m,Mt.prototype=nr(Ri.prototype),Mt.prototype.constructor=Mt;function me(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}s(me,"LazyWrapper");function gE(){var e=new me(this.__wrapped__);return e.__actions__=mt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mt(this.__views__),e}s(gE,"lazyClone");function _E(){if(this.__filtered__){var e=new me(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}s(_E,"lazyReverse");function yE(){var e=this.__wrapped__.value(),r=this.__dir__,o=ae(e),l=r<0,f=o?e.length:0,_=RT(0,f,this.__views__),A=_.start,b=_.end,O=b-A,P=l?b:A-1,M=this.__iteratees__,B=M.length,H=0,X=it(O,this.__takeCount__);if(!o||!l&&f==O&&X==O)return wp(e,this.__actions__);var ee=[];e:for(;O--&&H<X;){P+=r;for(var pe=-1,te=e[P];++pe<B;){var de=M[pe],he=de.iteratee,Rt=de.type,lt=he(te);if(Rt==Gt)te=lt;else if(!lt){if(Rt==Oe)continue e;break e}}ee[H++]=te}return ee}s(yE,"lazyValue"),me.prototype=nr(Ri.prototype),me.prototype.constructor=me;function Mn(e){var r=-1,o=e==null?0:e.length;for(this.clear();++r<o;){var l=e[r];this.set(l[0],l[1])}}s(Mn,"Hash");function EE(){this.__data__=xr?xr(null):{},this.size=0}s(EE,"hashClear");function TE(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}s(TE,"hashDelete");function SE(e){var r=this.__data__;if(xr){var o=r[e];return o===p?t:o}return Se.call(r,e)?r[e]:t}s(SE,"hashGet");function AE(e){var r=this.__data__;return xr?r[e]!==t:Se.call(r,e)}s(AE,"hashHas");function CE(e,r){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=xr&&r===t?p:r,this}s(CE,"hashSet"),Mn.prototype.clear=EE,Mn.prototype.delete=TE,Mn.prototype.get=SE,Mn.prototype.has=AE,Mn.prototype.set=CE;function tn(e){var r=-1,o=e==null?0:e.length;for(this.clear();++r<o;){var l=e[r];this.set(l[0],l[1])}}s(tn,"ListCache");function vE(){this.__data__=[],this.size=0}s(vE,"listCacheClear");function NE(e){var r=this.__data__,o=xi(r,e);if(o<0)return!1;var l=r.length-1;return o==l?r.pop():vi.call(r,o,1),--this.size,!0}s(NE,"listCacheDelete");function bE(e){var r=this.__data__,o=xi(r,e);return o<0?t:r[o][1]}s(bE,"listCacheGet");function IE(e){return xi(this.__data__,e)>-1}s(IE,"listCacheHas");function wE(e,r){var o=this.__data__,l=xi(o,e);return l<0?(++this.size,o.push([e,r])):o[l][1]=r,this}s(wE,"listCacheSet"),tn.prototype.clear=vE,tn.prototype.delete=NE,tn.prototype.get=bE,tn.prototype.has=IE,tn.prototype.set=wE;function nn(e){var r=-1,o=e==null?0:e.length;for(this.clear();++r<o;){var l=e[r];this.set(l[0],l[1])}}s(nn,"MapCache");function OE(){this.size=0,this.__data__={hash:new Mn,map:new(Or||tn),string:new Mn}}s(OE,"mapCacheClear");function RE(e){var r=Gi(this,e).delete(e);return this.size-=r?1:0,r}s(RE,"mapCacheDelete");function xE(e){return Gi(this,e).get(e)}s(xE,"mapCacheGet");function DE(e){return Gi(this,e).has(e)}s(DE,"mapCacheHas");function qE(e,r){var o=Gi(this,e),l=o.size;return o.set(e,r),this.size+=o.size==l?0:1,this}s(qE,"mapCacheSet"),nn.prototype.clear=OE,nn.prototype.delete=RE,nn.prototype.get=xE,nn.prototype.has=DE,nn.prototype.set=qE;function Fn(e){var r=-1,o=e==null?0:e.length;for(this.__data__=new nn;++r<o;)this.add(e[r])}s(Fn,"SetCache");function LE(e){return this.__data__.set(e,p),this}s(LE,"setCacheAdd");function PE(e){return this.__data__.has(e)}s(PE,"setCacheHas"),Fn.prototype.add=Fn.prototype.push=LE,Fn.prototype.has=PE;function Yt(e){var r=this.__data__=new tn(e);this.size=r.size}s(Yt,"Stack");function ME(){this.__data__=new tn,this.size=0}s(ME,"stackClear");function FE(e){var r=this.__data__,o=r.delete(e);return this.size=r.size,o}s(FE,"stackDelete");function UE(e){return this.__data__.get(e)}s(UE,"stackGet");function BE(e){return this.__data__.has(e)}s(BE,"stackHas");function $E(e,r){var o=this.__data__;if(o instanceof tn){var l=o.__data__;if(!Or||l.length<i-1)return l.push([e,r]),this.size=++o.size,this;o=this.__data__=new nn(l)}return o.set(e,r),this.size=o.size,this}s($E,"stackSet"),Yt.prototype.clear=ME,Yt.prototype.delete=FE,Yt.prototype.get=UE,Yt.prototype.has=BE,Yt.prototype.set=$E;function sp(e,r){var o=ae(e),l=!o&&kn(e),f=!o&&!l&&bn(e),_=!o&&!l&&!f&&ar(e),A=o||l||f||_,b=A?sa(e.length,Xy):[],O=b.length;for(var P in e)(r||Se.call(e,P))&&!(A&&(P=="length"||f&&(P=="offset"||P=="parent")||_&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||on(P,O)))&&b.push(P);return b}s(sp,"arrayLikeKeys");function ap(e){var r=e.length;return r?e[Aa(0,r-1)]:t}s(ap,"arraySample");function KE(e,r){return Wi(mt(e),Un(r,0,e.length))}s(KE,"arraySampleSize");function kE(e){return Wi(mt(e))}s(kE,"arrayShuffle");function fa(e,r,o){(o!==t&&!Qt(e[r],o)||o===t&&!(r in e))&&rn(e,r,o)}s(fa,"assignMergeValue");function qr(e,r,o){var l=e[r];(!(Se.call(e,r)&&Qt(l,o))||o===t&&!(r in e))&&rn(e,r,o)}s(qr,"assignValue");function xi(e,r){for(var o=e.length;o--;)if(Qt(e[o][0],r))return o;return-1}s(xi,"assocIndexOf");function GE(e,r,o,l){return An(e,function(f,_,A){r(l,f,o(f),A)}),l}s(GE,"baseAggregator");function op(e,r){return e&&Jt(r,Ze(r),e)}s(op,"baseAssign");function WE(e,r){return e&&Jt(r,gt(r),e)}s(WE,"baseAssignIn");function rn(e,r,o){r=="__proto__"&&Ni?Ni(e,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[r]=o}s(rn,"baseAssignValue");function da(e,r){for(var o=-1,l=r.length,f=D(l),_=e==null;++o<l;)f[o]=_?t:Ya(e,r[o]);return f}s(da,"baseAt");function Un(e,r,o){return e===e&&(o!==t&&(e=e<=o?e:o),r!==t&&(e=e>=r?e:r)),e}s(Un,"baseClamp");function Ft(e,r,o,l,f,_){var A,b=r&g,O=r&T,P=r&y;if(o&&(A=f?o(e,l,f,_):o(e)),A!==t)return A;if(!xe(e))return e;var M=ae(e);if(M){if(A=DT(e),!b)return mt(e,A)}else{var B=st(e),H=B==R||B==G;if(bn(e))return xp(e,b);if(B==ge||B==dn||H&&!f){if(A=O||H?{}:Xp(e),!b)return O?ST(e,WE(A,e)):TT(e,op(A,e))}else{if(!ve[B])return f?e:{};A=qT(e,B,b)}}_||(_=new Yt);var X=_.get(e);if(X)return X;_.set(e,A),bf(e)?e.forEach(function(te){A.add(Ft(te,r,o,te,e,_))}):vf(e)&&e.forEach(function(te,de){A.set(de,Ft(te,r,o,de,e,_))});var ee=P?O?qa:Da:O?gt:Ze,pe=M?t:ee(e);return Lt(pe||e,function(te,de){pe&&(de=te,te=e[de]),qr(A,de,Ft(te,r,o,de,e,_))}),A}s(Ft,"baseClone");function HE(e){var r=Ze(e);return function(o){return up(o,e,r)}}s(HE,"baseConforms");function up(e,r,o){var l=o.length;if(e==null)return!l;for(e=Ae(e);l--;){var f=o[l],_=r[f],A=e[f];if(A===t&&!(f in e)||!_(A))return!1}return!0}s(up,"baseConformsTo");function cp(e,r,o){if(typeof e!="function")throw new Pt(u);return $r(function(){e.apply(t,o)},r)}s(cp,"baseDelay");function Lr(e,r,o,l){var f=-1,_=mi,A=!0,b=e.length,O=[],P=r.length;if(!b)return O;o&&(r=we(r,It(o))),l?(_=Js,A=!1):r.length>=i&&(_=Ir,A=!1,r=new Fn(r));e:for(;++f<b;){var M=e[f],B=o==null?M:o(M);if(M=l||M!==0?M:0,A&&B===B){for(var H=P;H--;)if(r[H]===B)continue e;O.push(M)}else _(r,B,l)||O.push(M)}return O}s(Lr,"baseDifference");var An=Mp(jt),lp=Mp(ha,!0);function VE(e,r){var o=!0;return An(e,function(l,f,_){return o=!!r(l,f,_),o}),o}s(VE,"baseEvery");function Di(e,r,o){for(var l=-1,f=e.length;++l<f;){var _=e[l],A=r(_);if(A!=null&&(b===t?A===A&&!Ot(A):o(A,b)))var b=A,O=_}return O}s(Di,"baseExtremum");function YE(e,r,o,l){var f=e.length;for(o=le(o),o<0&&(o=-o>f?0:f+o),l=l===t||l>f?f:le(l),l<0&&(l+=f),l=o>l?0:wf(l);o<l;)e[o++]=r;return e}s(YE,"baseFill");function pp(e,r){var o=[];return An(e,function(l,f,_){r(l,f,_)&&o.push(l)}),o}s(pp,"baseFilter");function tt(e,r,o,l,f){var _=-1,A=e.length;for(o||(o=PT),f||(f=[]);++_<A;){var b=e[_];r>0&&o(b)?r>1?tt(b,r-1,o,l,f):yn(f,b):l||(f[f.length]=b)}return f}s(tt,"baseFlatten");var ma=Fp(),fp=Fp(!0);function jt(e,r){return e&&ma(e,r,Ze)}s(jt,"baseForOwn");function ha(e,r){return e&&fp(e,r,Ze)}s(ha,"baseForOwnRight");function qi(e,r){return _n(r,function(o){return un(e[o])})}s(qi,"baseFunctions");function Bn(e,r){r=vn(r,e);for(var o=0,l=r.length;e!=null&&o<l;)e=e[en(r[o++])];return o&&o==l?e:t}s(Bn,"baseGet");function dp(e,r,o){var l=r(e);return ae(e)?l:yn(l,o(e))}s(dp,"baseGetAllKeys");function ut(e){return e==null?e===t?Ct:be:Pn&&Pn in Ae(e)?OT(e):kT(e)}s(ut,"baseGetTag");function ga(e,r){return e>r}s(ga,"baseGt");function QE(e,r){return e!=null&&Se.call(e,r)}s(QE,"baseHas");function zE(e,r){return e!=null&&r in Ae(e)}s(zE,"baseHasIn");function XE(e,r,o){return e>=it(r,o)&&e<ze(r,o)}s(XE,"baseInRange");function _a(e,r,o){for(var l=o?Js:mi,f=e[0].length,_=e.length,A=_,b=D(_),O=1/0,P=[];A--;){var M=e[A];A&&r&&(M=we(M,It(r))),O=it(M.length,O),b[A]=!o&&(r||f>=120&&M.length>=120)?new Fn(A&&M):t}M=e[0];var B=-1,H=b[0];e:for(;++B<f&&P.length<O;){var X=M[B],ee=r?r(X):X;if(X=o||X!==0?X:0,!(H?Ir(H,ee):l(P,ee,o))){for(A=_;--A;){var pe=b[A];if(!(pe?Ir(pe,ee):l(e[A],ee,o)))continue e}H&&H.push(ee),P.push(X)}}return P}s(_a,"baseIntersection");function ZE(e,r,o,l){return jt(e,function(f,_,A){r(l,o(f),_,A)}),l}s(ZE,"baseInverter");function Pr(e,r,o){r=vn(r,e),e=ef(e,r);var l=e==null?e:e[en(Bt(r))];return l==null?t:bt(l,e,o)}s(Pr,"baseInvoke");function mp(e){return Me(e)&&ut(e)==dn}s(mp,"baseIsArguments");function jE(e){return Me(e)&&ut(e)==et}s(jE,"baseIsArrayBuffer");function JE(e){return Me(e)&&ut(e)==hn}s(JE,"baseIsDate");function Mr(e,r,o,l,f){return e===r?!0:e==null||r==null||!Me(e)&&!Me(r)?e!==e&&r!==r:eT(e,r,o,l,Mr,f)}s(Mr,"baseIsEqual");function eT(e,r,o,l,f,_){var A=ae(e),b=ae(r),O=A?Qn:st(e),P=b?Qn:st(r);O=O==dn?ge:O,P=P==dn?ge:P;var M=O==ge,B=P==ge,H=O==P;if(H&&bn(e)){if(!bn(r))return!1;A=!0,M=!1}if(H&&!M)return _||(_=new Yt),A||ar(e)?Yp(e,r,o,l,f,_):IT(e,r,O,o,l,f,_);if(!(o&E)){var X=M&&Se.call(e,"__wrapped__"),ee=B&&Se.call(r,"__wrapped__");if(X||ee){var pe=X?e.value():e,te=ee?r.value():r;return _||(_=new Yt),f(pe,te,o,l,_)}}return H?(_||(_=new Yt),wT(e,r,o,l,f,_)):!1}s(eT,"baseIsEqualDeep");function tT(e){return Me(e)&&st(e)==W}s(tT,"baseIsMap");function ya(e,r,o,l){var f=o.length,_=f,A=!l;if(e==null)return!_;for(e=Ae(e);f--;){var b=o[f];if(A&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++f<_;){b=o[f];var O=b[0],P=e[O],M=b[1];if(A&&b[2]){if(P===t&&!(O in e))return!1}else{var B=new Yt;if(l)var H=l(P,M,O,e,r,B);if(!(H===t?Mr(M,P,E|S,l,B):H))return!1}}return!0}s(ya,"baseIsMatch");function hp(e){if(!xe(e)||FT(e))return!1;var r=un(e)?tE:H_;return r.test(Kn(e))}s(hp,"baseIsNative");function nT(e){return Me(e)&&ut(e)==Pe}s(nT,"baseIsRegExp");function rT(e){return Me(e)&&st(e)==Ie}s(rT,"baseIsSet");function iT(e){return Me(e)&&Xi(e.length)&&!!Ne[ut(e)]}s(iT,"baseIsTypedArray");function gp(e){return typeof e=="function"?e:e==null?_t:typeof e=="object"?ae(e)?Ep(e[0],e[1]):yp(e):Bf(e)}s(gp,"baseIteratee");function Ea(e){if(!Br(e))return oE(e);var r=[];for(var o in Ae(e))Se.call(e,o)&&o!="constructor"&&r.push(o);return r}s(Ea,"baseKeys");function sT(e){if(!xe(e))return KT(e);var r=Br(e),o=[];for(var l in e)l=="constructor"&&(r||!Se.call(e,l))||o.push(l);return o}s(sT,"baseKeysIn");function Ta(e,r){return e<r}s(Ta,"baseLt");function _p(e,r){var o=-1,l=ht(e)?D(e.length):[];return An(e,function(f,_,A){l[++o]=r(f,_,A)}),l}s(_p,"baseMap");function yp(e){var r=Pa(e);return r.length==1&&r[0][2]?jp(r[0][0],r[0][1]):function(o){return o===e||ya(o,e,r)}}s(yp,"baseMatches");function Ep(e,r){return Fa(e)&&Zp(r)?jp(en(e),r):function(o){var l=Ya(o,e);return l===t&&l===r?Qa(o,e):Mr(r,l,E|S)}}s(Ep,"baseMatchesProperty");function Li(e,r,o,l,f){e!==r&&ma(r,function(_,A){if(f||(f=new Yt),xe(_))aT(e,r,A,o,Li,l,f);else{var b=l?l(Ba(e,A),_,A+"",e,r,f):t;b===t&&(b=_),fa(e,A,b)}},gt)}s(Li,"baseMerge");function aT(e,r,o,l,f,_,A){var b=Ba(e,o),O=Ba(r,o),P=A.get(O);if(P){fa(e,o,P);return}var M=_?_(b,O,o+"",e,r,A):t,B=M===t;if(B){var H=ae(O),X=!H&&bn(O),ee=!H&&!X&&ar(O);M=O,H||X||ee?ae(b)?M=b:Fe(b)?M=mt(b):X?(B=!1,M=xp(O,!0)):ee?(B=!1,M=Dp(O,!0)):M=[]:Kr(O)||kn(O)?(M=b,kn(b)?M=Of(b):(!xe(b)||un(b))&&(M=Xp(O))):B=!1}B&&(A.set(O,M),f(M,O,l,_,A),A.delete(O)),fa(e,o,M)}s(aT,"baseMergeDeep");function Tp(e,r){var o=e.length;if(o)return r+=r<0?o:0,on(r,o)?e[r]:t}s(Tp,"baseNth");function Sp(e,r,o){r.length?r=we(r,function(_){return ae(_)?function(A){return Bn(A,_.length===1?_[0]:_)}:_}):r=[_t];var l=-1;r=we(r,It(J()));var f=_p(e,function(_,A,b){var O=we(r,function(P){return P(_)});return{criteria:O,index:++l,value:_}});return qy(f,function(_,A){return ET(_,A,o)})}s(Sp,"baseOrderBy");function oT(e,r){return Ap(e,r,function(o,l){return Qa(e,l)})}s(oT,"basePick");function Ap(e,r,o){for(var l=-1,f=r.length,_={};++l<f;){var A=r[l],b=Bn(e,A);o(b,A)&&Fr(_,vn(A,e),b)}return _}s(Ap,"basePickBy");function uT(e){return function(r){return Bn(r,e)}}s(uT,"basePropertyDeep");function Sa(e,r,o,l){var f=l?Dy:Xn,_=-1,A=r.length,b=e;for(e===r&&(r=mt(r)),o&&(b=we(e,It(o)));++_<A;)for(var O=0,P=r[_],M=o?o(P):P;(O=f(b,M,O,l))>-1;)b!==e&&vi.call(b,O,1),vi.call(e,O,1);return e}s(Sa,"basePullAll");function Cp(e,r){for(var o=e?r.length:0,l=o-1;o--;){var f=r[o];if(o==l||f!==_){var _=f;on(f)?vi.call(e,f,1):Na(e,f)}}return e}s(Cp,"basePullAt");function Aa(e,r){return e+Ii(rp()*(r-e+1))}s(Aa,"baseRandom");function cT(e,r,o,l){for(var f=-1,_=ze(bi((r-e)/(o||1)),0),A=D(_);_--;)A[l?_:++f]=e,e+=o;return A}s(cT,"baseRange");function Ca(e,r){var o="";if(!e||r<1||r>Ye)return o;do r%2&&(o+=e),r=Ii(r/2),r&&(e+=e);while(r);return o}s(Ca,"baseRepeat");function fe(e,r){return $a(Jp(e,r,_t),e+"")}s(fe,"baseRest");function lT(e){return ap(or(e))}s(lT,"baseSample");function pT(e,r){var o=or(e);return Wi(o,Un(r,0,o.length))}s(pT,"baseSampleSize");function Fr(e,r,o,l){if(!xe(e))return e;r=vn(r,e);for(var f=-1,_=r.length,A=_-1,b=e;b!=null&&++f<_;){var O=en(r[f]),P=o;if(O==="__proto__"||O==="constructor"||O==="prototype")return e;if(f!=A){var M=b[O];P=l?l(M,O,b):t,P===t&&(P=xe(M)?M:on(r[f+1])?[]:{})}qr(b,O,P),b=b[O]}return e}s(Fr,"baseSet");var vp=wi?function(e,r){return wi.set(e,r),e}:_t,fT=Ni?function(e,r){return Ni(e,"toString",{configurable:!0,enumerable:!1,value:Xa(r),writable:!0})}:_t;function dT(e){return Wi(or(e))}s(dT,"baseShuffle");function Ut(e,r,o){var l=-1,f=e.length;r<0&&(r=-r>f?0:f+r),o=o>f?f:o,o<0&&(o+=f),f=r>o?0:o-r>>>0,r>>>=0;for(var _=D(f);++l<f;)_[l]=e[l+r];return _}s(Ut,"baseSlice");function mT(e,r){var o;return An(e,function(l,f,_){return o=r(l,f,_),!o}),!!o}s(mT,"baseSome");function Pi(e,r,o){var l=0,f=e==null?l:e.length;if(typeof r=="number"&&r===r&&f<=Ps){for(;l<f;){var _=l+f>>>1,A=e[_];A!==null&&!Ot(A)&&(o?A<=r:A<r)?l=_+1:f=_}return f}return va(e,r,_t,o)}s(Pi,"baseSortedIndex");function va(e,r,o,l){var f=0,_=e==null?0:e.length;if(_===0)return 0;r=o(r);for(var A=r!==r,b=r===null,O=Ot(r),P=r===t;f<_;){var M=Ii((f+_)/2),B=o(e[M]),H=B!==t,X=B===null,ee=B===B,pe=Ot(B);if(A)var te=l||ee;else P?te=ee&&(l||H):b?te=ee&&H&&(l||!X):O?te=ee&&H&&!X&&(l||!pe):X||pe?te=!1:te=l?B<=r:B<r;te?f=M+1:_=M}return it(_,Ls)}s(va,"baseSortedIndexBy");function Np(e,r){for(var o=-1,l=e.length,f=0,_=[];++o<l;){var A=e[o],b=r?r(A):A;if(!o||!Qt(b,O)){var O=b;_[f++]=A===0?0:A}}return _}s(Np,"baseSortedUniq");function bp(e){return typeof e=="number"?e:Ot(e)?Yn:+e}s(bp,"baseToNumber");function wt(e){if(typeof e=="string")return e;if(ae(e))return we(e,wt)+"";if(Ot(e))return ip?ip.call(e):"";var r=e+"";return r=="0"&&1/e==-Z?"-0":r}s(wt,"baseToString");function Cn(e,r,o){var l=-1,f=mi,_=e.length,A=!0,b=[],O=b;if(o)A=!1,f=Js;else if(_>=i){var P=r?null:NT(e);if(P)return gi(P);A=!1,f=Ir,O=new Fn}else O=r?[]:b;e:for(;++l<_;){var M=e[l],B=r?r(M):M;if(M=o||M!==0?M:0,A&&B===B){for(var H=O.length;H--;)if(O[H]===B)continue e;r&&O.push(B),b.push(M)}else f(O,B,o)||(O!==b&&O.push(B),b.push(M))}return b}s(Cn,"baseUniq");function Na(e,r){return r=vn(r,e),e=ef(e,r),e==null||delete e[en(Bt(r))]}s(Na,"baseUnset");function Ip(e,r,o,l){return Fr(e,r,o(Bn(e,r)),l)}s(Ip,"baseUpdate");function Mi(e,r,o,l){for(var f=e.length,_=l?f:-1;(l?_--:++_<f)&&r(e[_],_,e););return o?Ut(e,l?0:_,l?_+1:f):Ut(e,l?_+1:0,l?f:_)}s(Mi,"baseWhile");function wp(e,r){var o=e;return o instanceof me&&(o=o.value()),ea(r,function(l,f){return f.func.apply(f.thisArg,yn([l],f.args))},o)}s(wp,"baseWrapperValue");function ba(e,r,o){var l=e.length;if(l<2)return l?Cn(e[0]):[];for(var f=-1,_=D(l);++f<l;)for(var A=e[f],b=-1;++b<l;)b!=f&&(_[f]=Lr(_[f]||A,e[b],r,o));return Cn(tt(_,1),r,o)}s(ba,"baseXor");function Op(e,r,o){for(var l=-1,f=e.length,_=r.length,A={};++l<f;){var b=l<_?r[l]:t;o(A,e[l],b)}return A}s(Op,"baseZipObject");function Ia(e){return Fe(e)?e:[]}s(Ia,"castArrayLikeObject");function wa(e){return typeof e=="function"?e:_t}s(wa,"castFunction");function vn(e,r){return ae(e)?e:Fa(e,r)?[e]:sf(Te(e))}s(vn,"castPath");var hT=fe;function Nn(e,r,o){var l=e.length;return o=o===t?l:o,!r&&o>=l?e:Ut(e,r,o)}s(Nn,"castSlice");var Rp=nE||function(e){return Xe.clearTimeout(e)};function xp(e,r){if(r)return e.slice();var o=e.length,l=jl?jl(o):new e.constructor(o);return e.copy(l),l}s(xp,"cloneBuffer");function Oa(e){var r=new e.constructor(e.byteLength);return new Ai(r).set(new Ai(e)),r}s(Oa,"cloneArrayBuffer");function gT(e,r){var o=r?Oa(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}s(gT,"cloneDataView");function _T(e){var r=new e.constructor(e.source,ml.exec(e));return r.lastIndex=e.lastIndex,r}s(_T,"cloneRegExp");function yT(e){return Dr?Ae(Dr.call(e)):{}}s(yT,"cloneSymbol");function Dp(e,r){var o=r?Oa(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}s(Dp,"cloneTypedArray");function qp(e,r){if(e!==r){var o=e!==t,l=e===null,f=e===e,_=Ot(e),A=r!==t,b=r===null,O=r===r,P=Ot(r);if(!b&&!P&&!_&&e>r||_&&A&&O&&!b&&!P||l&&A&&O||!o&&O||!f)return 1;if(!l&&!_&&!P&&e<r||P&&o&&f&&!l&&!_||b&&o&&f||!A&&f||!O)return-1}return 0}s(qp,"compareAscending");function ET(e,r,o){for(var l=-1,f=e.criteria,_=r.criteria,A=f.length,b=o.length;++l<A;){var O=qp(f[l],_[l]);if(O){if(l>=b)return O;var P=o[l];return O*(P=="desc"?-1:1)}}return e.index-r.index}s(ET,"compareMultiple");function Lp(e,r,o,l){for(var f=-1,_=e.length,A=o.length,b=-1,O=r.length,P=ze(_-A,0),M=D(O+P),B=!l;++b<O;)M[b]=r[b];for(;++f<A;)(B||f<_)&&(M[o[f]]=e[f]);for(;P--;)M[b++]=e[f++];return M}s(Lp,"composeArgs");function Pp(e,r,o,l){for(var f=-1,_=e.length,A=-1,b=o.length,O=-1,P=r.length,M=ze(_-b,0),B=D(M+P),H=!l;++f<M;)B[f]=e[f];for(var X=f;++O<P;)B[X+O]=r[O];for(;++A<b;)(H||f<_)&&(B[X+o[A]]=e[f++]);return B}s(Pp,"composeArgsRight");function mt(e,r){var o=-1,l=e.length;for(r||(r=D(l));++o<l;)r[o]=e[o];return r}s(mt,"copyArray");function Jt(e,r,o,l){var f=!o;o||(o={});for(var _=-1,A=r.length;++_<A;){var b=r[_],O=l?l(o[b],e[b],b,o,e):t;O===t&&(O=e[b]),f?rn(o,b,O):qr(o,b,O)}return o}s(Jt,"copyObject");function TT(e,r){return Jt(e,Ma(e),r)}s(TT,"copySymbols");function ST(e,r){return Jt(e,Qp(e),r)}s(ST,"copySymbolsIn");function Fi(e,r){return function(o,l){var f=ae(o)?by:GE,_=r?r():{};return f(o,e,J(l,2),_)}}s(Fi,"createAggregator");function rr(e){return fe(function(r,o){var l=-1,f=o.length,_=f>1?o[f-1]:t,A=f>2?o[2]:t;for(_=e.length>3&&typeof _=="function"?(f--,_):t,A&&ct(o[0],o[1],A)&&(_=f<3?t:_,f=1),r=Ae(r);++l<f;){var b=o[l];b&&e(r,b,l,_)}return r})}s(rr,"createAssigner");function Mp(e,r){return function(o,l){if(o==null)return o;if(!ht(o))return e(o,l);for(var f=o.length,_=r?f:-1,A=Ae(o);(r?_--:++_<f)&&l(A[_],_,A)!==!1;);return o}}s(Mp,"createBaseEach");function Fp(e){return function(r,o,l){for(var f=-1,_=Ae(r),A=l(r),b=A.length;b--;){var O=A[e?b:++f];if(o(_[O],O,_)===!1)break}return r}}s(Fp,"createBaseFor");function AT(e,r,o){var l=r&C,f=Ur(e);function _(){var A=this&&this!==Xe&&this instanceof _?f:e;return A.apply(l?o:this,arguments)}return s(_,"wrapper"),_}s(AT,"createBind");function Up(e){return function(r){r=Te(r);var o=Zn(r)?Vt(r):t,l=o?o[0]:r.charAt(0),f=o?Nn(o,1).join(""):r.slice(1);return l[e]()+f}}s(Up,"createCaseFirst");function ir(e){return function(r){return ea(Ff(Mf(r).replace(fy,"")),e,"")}}s(ir,"createCompounder");function Ur(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var o=nr(e.prototype),l=e.apply(o,r);return xe(l)?l:o}}s(Ur,"createCtor");function CT(e,r,o){var l=Ur(e);function f(){for(var _=arguments.length,A=D(_),b=_,O=sr(f);b--;)A[b]=arguments[b];var P=_<3&&A[0]!==O&&A[_-1]!==O?[]:En(A,O);if(_-=P.length,_<o)return Gp(e,r,Ui,f.placeholder,t,A,P,t,t,o-_);var M=this&&this!==Xe&&this instanceof f?l:e;return bt(M,this,A)}return s(f,"wrapper"),f}s(CT,"createCurry");function Bp(e){return function(r,o,l){var f=Ae(r);if(!ht(r)){var _=J(o,3);r=Ze(r),o=s(function(b){return _(f[b],b,f)},"predicate")}var A=e(r,o,l);return A>-1?f[_?r[A]:A]:t}}s(Bp,"createFind");function $p(e){return an(function(r){var o=r.length,l=o,f=Mt.prototype.thru;for(e&&r.reverse();l--;){var _=r[l];if(typeof _!="function")throw new Pt(u);if(f&&!A&&ki(_)=="wrapper")var A=new Mt([],!0)}for(l=A?l:o;++l<o;){_=r[l];var b=ki(_),O=b=="wrapper"?La(_):t;O&&Ua(O[0])&&O[1]==(k|N|q|V)&&!O[4].length&&O[9]==1?A=A[ki(O[0])].apply(A,O[3]):A=_.length==1&&Ua(_)?A[b]():A.thru(_)}return function(){var P=arguments,M=P[0];if(A&&P.length==1&&ae(M))return A.plant(M).value();for(var B=0,H=o?r[B].apply(this,P):M;++B<o;)H=r[B].call(this,H);return H}})}s($p,"createFlow");function Ui(e,r,o,l,f,_,A,b,O,P){var M=r&k,B=r&C,H=r&x,X=r&(N|F),ee=r&ie,pe=H?t:Ur(e);function te(){for(var de=arguments.length,he=D(de),Rt=de;Rt--;)he[Rt]=arguments[Rt];if(X)var lt=sr(te),xt=Py(he,lt);if(l&&(he=Lp(he,l,f,X)),_&&(he=Pp(he,_,A,X)),de-=xt,X&&de<P){var Ue=En(he,lt);return Gp(e,r,Ui,te.placeholder,o,he,Ue,b,O,P-de)}var zt=B?o:this,ln=H?zt[e]:e;return de=he.length,b?he=GT(he,b):ee&&de>1&&he.reverse(),M&&O<de&&(he.length=O),this&&this!==Xe&&this instanceof te&&(ln=pe||Ur(ln)),ln.apply(zt,he)}return s(te,"wrapper"),te}s(Ui,"createHybrid");function Kp(e,r){return function(o,l){return ZE(o,e,r(l),{})}}s(Kp,"createInverter");function Bi(e,r){return function(o,l){var f;if(o===t&&l===t)return r;if(o!==t&&(f=o),l!==t){if(f===t)return l;typeof o=="string"||typeof l=="string"?(o=wt(o),l=wt(l)):(o=bp(o),l=bp(l)),f=e(o,l)}return f}}s(Bi,"createMathOperation");function Ra(e){return an(function(r){return r=we(r,It(J())),fe(function(o){var l=this;return e(r,function(f){return bt(f,l,o)})})})}s(Ra,"createOver");function $i(e,r){r=r===t?" ":wt(r);var o=r.length;if(o<2)return o?Ca(r,e):r;var l=Ca(r,bi(e/jn(r)));return Zn(r)?Nn(Vt(l),0,e).join(""):l.slice(0,e)}s($i,"createPadding");function vT(e,r,o,l){var f=r&C,_=Ur(e);function A(){for(var b=-1,O=arguments.length,P=-1,M=l.length,B=D(M+O),H=this&&this!==Xe&&this instanceof A?_:e;++P<M;)B[P]=l[P];for(;O--;)B[P++]=arguments[++b];return bt(H,f?o:this,B)}return s(A,"wrapper"),A}s(vT,"createPartial");function kp(e){return function(r,o,l){return l&&typeof l!="number"&&ct(r,o,l)&&(o=l=t),r=cn(r),o===t?(o=r,r=0):o=cn(o),l=l===t?r<o?1:-1:cn(l),cT(r,o,l,e)}}s(kp,"createRange");function Ki(e){return function(r,o){return typeof r=="string"&&typeof o=="string"||(r=$t(r),o=$t(o)),e(r,o)}}s(Ki,"createRelationalOperation");function Gp(e,r,o,l,f,_,A,b,O,P){var M=r&N,B=M?A:t,H=M?t:A,X=M?_:t,ee=M?t:_;r|=M?q:$,r&=~(M?$:q),r&I||(r&=~(C|x));var pe=[e,r,f,X,B,ee,H,b,O,P],te=o.apply(t,pe);return Ua(e)&&tf(te,pe),te.placeholder=l,nf(te,e,r)}s(Gp,"createRecurry");function xa(e){var r=Qe[e];return function(o,l){if(o=$t(o),l=l==null?0:it(le(l),292),l&&np(o)){var f=(Te(o)+"e").split("e"),_=r(f[0]+"e"+(+f[1]+l));return f=(Te(_)+"e").split("e"),+(f[0]+"e"+(+f[1]-l))}return r(o)}}s(xa,"createRound");var NT=er&&1/gi(new er([,-0]))[1]==Z?function(e){return new er(e)}:Ja;function Wp(e){return function(r){var o=st(r);return o==W?oa(r):o==Ie?ky(r):Ly(r,e(r))}}s(Wp,"createToPairs");function sn(e,r,o,l,f,_,A,b){var O=r&x;if(!O&&typeof e!="function")throw new Pt(u);var P=l?l.length:0;if(P||(r&=~(q|$),l=f=t),A=A===t?A:ze(le(A),0),b=b===t?b:le(b),P-=f?f.length:0,r&$){var M=l,B=f;l=f=t}var H=O?t:La(e),X=[e,r,o,l,f,M,B,_,A,b];if(H&&$T(X,H),e=X[0],r=X[1],o=X[2],l=X[3],f=X[4],b=X[9]=X[9]===t?O?0:e.length:ze(X[9]-P,0),!b&&r&(N|F)&&(r&=~(N|F)),!r||r==C)var ee=AT(e,r,o);else r==N||r==F?ee=CT(e,r,b):(r==q||r==(C|q))&&!f.length?ee=vT(e,r,o,l):ee=Ui.apply(t,X);var pe=H?vp:tf;return nf(pe(ee,X),e,r)}s(sn,"createWrap");function Hp(e,r,o,l){return e===t||Qt(e,Jn[o])&&!Se.call(l,o)?r:e}s(Hp,"customDefaultsAssignIn");function Vp(e,r,o,l,f,_){return xe(e)&&xe(r)&&(_.set(r,e),Li(e,r,t,Vp,_),_.delete(r)),e}s(Vp,"customDefaultsMerge");function bT(e){return Kr(e)?t:e}s(bT,"customOmitClone");function Yp(e,r,o,l,f,_){var A=o&E,b=e.length,O=r.length;if(b!=O&&!(A&&O>b))return!1;var P=_.get(e),M=_.get(r);if(P&&M)return P==r&&M==e;var B=-1,H=!0,X=o&S?new Fn:t;for(_.set(e,r),_.set(r,e);++B<b;){var ee=e[B],pe=r[B];if(l)var te=A?l(pe,ee,B,r,e,_):l(ee,pe,B,e,r,_);if(te!==t){if(te)continue;H=!1;break}if(X){if(!ta(r,function(de,he){if(!Ir(X,he)&&(ee===de||f(ee,de,o,l,_)))return X.push(he)})){H=!1;break}}else if(!(ee===pe||f(ee,pe,o,l,_))){H=!1;break}}return _.delete(e),_.delete(r),H}s(Yp,"equalArrays");function IT(e,r,o,l,f,_,A){switch(o){case nt:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case et:return!(e.byteLength!=r.byteLength||!_(new Ai(e),new Ai(r)));case mn:case hn:case ue:return Qt(+e,+r);case v:return e.name==r.name&&e.message==r.message;case Pe:case ke:return e==r+"";case W:var b=oa;case Ie:var O=l&E;if(b||(b=gi),e.size!=r.size&&!O)return!1;var P=A.get(e);if(P)return P==r;l|=S,A.set(e,r);var M=Yp(b(e),b(r),l,f,_,A);return A.delete(e),M;case Ce:if(Dr)return Dr.call(e)==Dr.call(r)}return!1}s(IT,"equalByTag");function wT(e,r,o,l,f,_){var A=o&E,b=Da(e),O=b.length,P=Da(r),M=P.length;if(O!=M&&!A)return!1;for(var B=O;B--;){var H=b[B];if(!(A?H in r:Se.call(r,H)))return!1}var X=_.get(e),ee=_.get(r);if(X&&ee)return X==r&&ee==e;var pe=!0;_.set(e,r),_.set(r,e);for(var te=A;++B<O;){H=b[B];var de=e[H],he=r[H];if(l)var Rt=A?l(he,de,H,r,e,_):l(de,he,H,e,r,_);if(!(Rt===t?de===he||f(de,he,o,l,_):Rt)){pe=!1;break}te||(te=H=="constructor")}if(pe&&!te){var lt=e.constructor,xt=r.constructor;lt!=xt&&"constructor"in e&&"constructor"in r&&!(typeof lt=="function"&&lt instanceof lt&&typeof xt=="function"&&xt instanceof xt)&&(pe=!1)}return _.delete(e),_.delete(r),pe}s(wT,"equalObjects");function an(e){return $a(Jp(e,t,cf),e+"")}s(an,"flatRest");function Da(e){return dp(e,Ze,Ma)}s(Da,"getAllKeys");function qa(e){return dp(e,gt,Qp)}s(qa,"getAllKeysIn");var La=wi?function(e){return wi.get(e)}:Ja;function ki(e){for(var r=e.name+"",o=tr[r],l=Se.call(tr,r)?o.length:0;l--;){var f=o[l],_=f.func;if(_==null||_==e)return f.name}return r}s(ki,"getFuncName");function sr(e){var r=Se.call(m,"placeholder")?m:e;return r.placeholder}s(sr,"getHolder");function J(){var e=m.iteratee||Za;return e=e===Za?gp:e,arguments.length?e(arguments[0],arguments[1]):e}s(J,"getIteratee");function Gi(e,r){var o=e.__data__;return MT(r)?o[typeof r=="string"?"string":"hash"]:o.map}s(Gi,"getMapData");function Pa(e){for(var r=Ze(e),o=r.length;o--;){var l=r[o],f=e[l];r[o]=[l,f,Zp(f)]}return r}s(Pa,"getMatchData");function $n(e,r){var o=By(e,r);return hp(o)?o:t}s($n,"getNative");function OT(e){var r=Se.call(e,Pn),o=e[Pn];try{e[Pn]=t;var l=!0}catch{}var f=Ti.call(e);return l&&(r?e[Pn]=o:delete e[Pn]),f}s(OT,"getRawTag");var Ma=ca?function(e){return e==null?[]:(e=Ae(e),_n(ca(e),function(r){return ep.call(e,r)}))}:eo,Qp=ca?function(e){for(var r=[];e;)yn(r,Ma(e)),e=Ci(e);return r}:eo,st=ut;(la&&st(new la(new ArrayBuffer(1)))!=nt||Or&&st(new Or)!=W||pa&&st(pa.resolve())!=Re||er&&st(new er)!=Ie||Rr&&st(new Rr)!=Je)&&(st=s(function(e){var r=ut(e),o=r==ge?e.constructor:t,l=o?Kn(o):"";if(l)switch(l){case pE:return nt;case fE:return W;case dE:return Re;case mE:return Ie;case hE:return Je}return r},"getTag"));function RT(e,r,o){for(var l=-1,f=o.length;++l<f;){var _=o[l],A=_.size;switch(_.type){case"drop":e+=A;break;case"dropRight":r-=A;break;case"take":r=it(r,e+A);break;case"takeRight":e=ze(e,r-A);break}}return{start:e,end:r}}s(RT,"getView");function xT(e){var r=e.match(F_);return r?r[1].split(U_):[]}s(xT,"getWrapDetails");function zp(e,r,o){r=vn(r,e);for(var l=-1,f=r.length,_=!1;++l<f;){var A=en(r[l]);if(!(_=e!=null&&o(e,A)))break;e=e[A]}return _||++l!=f?_:(f=e==null?0:e.length,!!f&&Xi(f)&&on(A,f)&&(ae(e)||kn(e)))}s(zp,"hasPath");function DT(e){var r=e.length,o=new e.constructor(r);return r&&typeof e[0]=="string"&&Se.call(e,"index")&&(o.index=e.index,o.input=e.input),o}s(DT,"initCloneArray");function Xp(e){return typeof e.constructor=="function"&&!Br(e)?nr(Ci(e)):{}}s(Xp,"initCloneObject");function qT(e,r,o){var l=e.constructor;switch(r){case et:return Oa(e);case mn:case hn:return new l(+e);case nt:return gT(e,o);case dt:case Ge:case vt:case Nt:case gn:case Wt:case rt:case xn:case Dn:return Dp(e,o);case W:return new l;case ue:case ke:return new l(e);case Pe:return _T(e);case Ie:return new l;case Ce:return yT(e)}}s(qT,"initCloneByTag");function LT(e,r){var o=r.length;if(!o)return e;var l=o-1;return r[l]=(o>1?"& ":"")+r[l],r=r.join(o>2?", ":" "),e.replace(M_,`{
/* [wrapped with `+r+`] */
`)}s(LT,"insertWrapDetails");function PT(e){return ae(e)||kn(e)||!!(tp&&e&&e[tp])}s(PT,"isFlattenable");function on(e,r){var o=typeof e;return r=r??Ye,!!r&&(o=="number"||o!="symbol"&&Y_.test(e))&&e>-1&&e%1==0&&e<r}s(on,"isIndex");function ct(e,r,o){if(!xe(o))return!1;var l=typeof r;return(l=="number"?ht(o)&&on(r,o.length):l=="string"&&r in o)?Qt(o[r],e):!1}s(ct,"isIterateeCall");function Fa(e,r){if(ae(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||Ot(e)?!0:Gs.test(e)||!ks.test(e)||r!=null&&e in Ae(r)}s(Fa,"isKey");function MT(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}s(MT,"isKeyable");function Ua(e){var r=ki(e),o=m[r];if(typeof o!="function"||!(r in me.prototype))return!1;if(e===o)return!0;var l=La(o);return!!l&&e===l[0]}s(Ua,"isLaziable");function FT(e){return!!Zl&&Zl in e}s(FT,"isMasked");var UT=yi?un:to;function Br(e){var r=e&&e.constructor,o=typeof r=="function"&&r.prototype||Jn;return e===o}s(Br,"isPrototype");function Zp(e){return e===e&&!xe(e)}s(Zp,"isStrictComparable");function jp(e,r){return function(o){return o==null?!1:o[e]===r&&(r!==t||e in Ae(o))}}s(jp,"matchesStrictComparable");function BT(e){var r=Qi(e,function(l){return o.size===d&&o.clear(),l}),o=r.cache;return r}s(BT,"memoizeCapped");function $T(e,r){var o=e[1],l=r[1],f=o|l,_=f<(C|x|k),A=l==k&&o==N||l==k&&o==V&&e[7].length<=r[8]||l==(k|V)&&r[7].length<=r[8]&&o==N;if(!(_||A))return e;l&C&&(e[2]=r[2],f|=o&C?0:I);var b=r[3];if(b){var O=e[3];e[3]=O?Lp(O,b,r[4]):b,e[4]=O?En(e[3],h):r[4]}return b=r[5],b&&(O=e[5],e[5]=O?Pp(O,b,r[6]):b,e[6]=O?En(e[5],h):r[6]),b=r[7],b&&(e[7]=b),l&k&&(e[8]=e[8]==null?r[8]:it(e[8],r[8])),e[9]==null&&(e[9]=r[9]),e[0]=r[0],e[1]=f,e}s($T,"mergeData");function KT(e){var r=[];if(e!=null)for(var o in Ae(e))r.push(o);return r}s(KT,"nativeKeysIn");function kT(e){return Ti.call(e)}s(kT,"objectToString");function Jp(e,r,o){return r=ze(r===t?e.length-1:r,0),function(){for(var l=arguments,f=-1,_=ze(l.length-r,0),A=D(_);++f<_;)A[f]=l[r+f];f=-1;for(var b=D(r+1);++f<r;)b[f]=l[f];return b[r]=o(A),bt(e,this,b)}}s(Jp,"overRest");function ef(e,r){return r.length<2?e:Bn(e,Ut(r,0,-1))}s(ef,"parent");function GT(e,r){for(var o=e.length,l=it(r.length,o),f=mt(e);l--;){var _=r[l];e[l]=on(_,o)?f[_]:t}return e}s(GT,"reorder");function Ba(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}s(Ba,"safeGet");var tf=rf(vp),$r=iE||function(e,r){return Xe.setTimeout(e,r)},$a=rf(fT);function nf(e,r,o){var l=r+"";return $a(e,LT(l,WT(xT(l),o)))}s(nf,"setWrapToString");function rf(e){var r=0,o=0;return function(){var l=uE(),f=se-(l-o);if(o=l,f>0){if(++r>=Ee)return arguments[0]}else r=0;return e.apply(t,arguments)}}s(rf,"shortOut");function Wi(e,r){var o=-1,l=e.length,f=l-1;for(r=r===t?l:r;++o<r;){var _=Aa(o,f),A=e[_];e[_]=e[o],e[o]=A}return e.length=r,e}s(Wi,"shuffleSelf");var sf=BT(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Ws,function(o,l,f,_){r.push(f?_.replace(K_,"$1"):l||o)}),r});function en(e){if(typeof e=="string"||Ot(e))return e;var r=e+"";return r=="0"&&1/e==-Z?"-0":r}s(en,"toKey");function Kn(e){if(e!=null){try{return Ei.call(e)}catch{}try{return e+""}catch{}}return""}s(Kn,"toSource");function WT(e,r){return Lt(Ms,function(o){var l="_."+o[0];r&o[1]&&!mi(e,l)&&e.push(l)}),e.sort()}s(WT,"updateWrapDetails");function af(e){if(e instanceof me)return e.clone();var r=new Mt(e.__wrapped__,e.__chain__);return r.__actions__=mt(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}s(af,"wrapperClone");function HT(e,r,o){(o?ct(e,r,o):r===t)?r=1:r=ze(le(r),0);var l=e==null?0:e.length;if(!l||r<1)return[];for(var f=0,_=0,A=D(bi(l/r));f<l;)A[_++]=Ut(e,f,f+=r);return A}s(HT,"chunk");function VT(e){for(var r=-1,o=e==null?0:e.length,l=0,f=[];++r<o;){var _=e[r];_&&(f[l++]=_)}return f}s(VT,"compact");function YT(){var e=arguments.length;if(!e)return[];for(var r=D(e-1),o=arguments[0],l=e;l--;)r[l-1]=arguments[l];return yn(ae(o)?mt(o):[o],tt(r,1))}s(YT,"concat");var QT=fe(function(e,r){return Fe(e)?Lr(e,tt(r,1,Fe,!0)):[]}),zT=fe(function(e,r){var o=Bt(r);return Fe(o)&&(o=t),Fe(e)?Lr(e,tt(r,1,Fe,!0),J(o,2)):[]}),XT=fe(function(e,r){var o=Bt(r);return Fe(o)&&(o=t),Fe(e)?Lr(e,tt(r,1,Fe,!0),t,o):[]});function ZT(e,r,o){var l=e==null?0:e.length;return l?(r=o||r===t?1:le(r),Ut(e,r<0?0:r,l)):[]}s(ZT,"drop");function jT(e,r,o){var l=e==null?0:e.length;return l?(r=o||r===t?1:le(r),r=l-r,Ut(e,0,r<0?0:r)):[]}s(jT,"dropRight");function JT(e,r){return e&&e.length?Mi(e,J(r,3),!0,!0):[]}s(JT,"dropRightWhile");function eS(e,r){return e&&e.length?Mi(e,J(r,3),!0):[]}s(eS,"dropWhile");function tS(e,r,o,l){var f=e==null?0:e.length;return f?(o&&typeof o!="number"&&ct(e,r,o)&&(o=0,l=f),YE(e,r,o,l)):[]}s(tS,"fill");function of(e,r,o){var l=e==null?0:e.length;if(!l)return-1;var f=o==null?0:le(o);return f<0&&(f=ze(l+f,0)),hi(e,J(r,3),f)}s(of,"findIndex");function uf(e,r,o){var l=e==null?0:e.length;if(!l)return-1;var f=l-1;return o!==t&&(f=le(o),f=o<0?ze(l+f,0):it(f,l-1)),hi(e,J(r,3),f,!0)}s(uf,"findLastIndex");function cf(e){var r=e==null?0:e.length;return r?tt(e,1):[]}s(cf,"flatten");function nS(e){var r=e==null?0:e.length;return r?tt(e,Z):[]}s(nS,"flattenDeep");function rS(e,r){var o=e==null?0:e.length;return o?(r=r===t?1:le(r),tt(e,r)):[]}s(rS,"flattenDepth");function iS(e){for(var r=-1,o=e==null?0:e.length,l={};++r<o;){var f=e[r];l[f[0]]=f[1]}return l}s(iS,"fromPairs");function lf(e){return e&&e.length?e[0]:t}s(lf,"head");function sS(e,r,o){var l=e==null?0:e.length;if(!l)return-1;var f=o==null?0:le(o);return f<0&&(f=ze(l+f,0)),Xn(e,r,f)}s(sS,"indexOf");function aS(e){var r=e==null?0:e.length;return r?Ut(e,0,-1):[]}s(aS,"initial");var oS=fe(function(e){var r=we(e,Ia);return r.length&&r[0]===e[0]?_a(r):[]}),uS=fe(function(e){var r=Bt(e),o=we(e,Ia);return r===Bt(o)?r=t:o.pop(),o.length&&o[0]===e[0]?_a(o,J(r,2)):[]}),cS=fe(function(e){var r=Bt(e),o=we(e,Ia);return r=typeof r=="function"?r:t,r&&o.pop(),o.length&&o[0]===e[0]?_a(o,t,r):[]});function lS(e,r){return e==null?"":aE.call(e,r)}s(lS,"join");function Bt(e){var r=e==null?0:e.length;return r?e[r-1]:t}s(Bt,"last");function pS(e,r,o){var l=e==null?0:e.length;if(!l)return-1;var f=l;return o!==t&&(f=le(o),f=f<0?ze(l+f,0):it(f,l-1)),r===r?Wy(e,r,f):hi(e,Gl,f,!0)}s(pS,"lastIndexOf");function fS(e,r){return e&&e.length?Tp(e,le(r)):t}s(fS,"nth");var dS=fe(pf);function pf(e,r){return e&&e.length&&r&&r.length?Sa(e,r):e}s(pf,"pullAll");function mS(e,r,o){return e&&e.length&&r&&r.length?Sa(e,r,J(o,2)):e}s(mS,"pullAllBy");function hS(e,r,o){return e&&e.length&&r&&r.length?Sa(e,r,t,o):e}s(hS,"pullAllWith");var gS=an(function(e,r){var o=e==null?0:e.length,l=da(e,r);return Cp(e,we(r,function(f){return on(f,o)?+f:f}).sort(qp)),l});function _S(e,r){var o=[];if(!(e&&e.length))return o;var l=-1,f=[],_=e.length;for(r=J(r,3);++l<_;){var A=e[l];r(A,l,e)&&(o.push(A),f.push(l))}return Cp(e,f),o}s(_S,"remove");function Ka(e){return e==null?e:lE.call(e)}s(Ka,"reverse");function yS(e,r,o){var l=e==null?0:e.length;return l?(o&&typeof o!="number"&&ct(e,r,o)?(r=0,o=l):(r=r==null?0:le(r),o=o===t?l:le(o)),Ut(e,r,o)):[]}s(yS,"slice");function ES(e,r){return Pi(e,r)}s(ES,"sortedIndex");function TS(e,r,o){return va(e,r,J(o,2))}s(TS,"sortedIndexBy");function SS(e,r){var o=e==null?0:e.length;if(o){var l=Pi(e,r);if(l<o&&Qt(e[l],r))return l}return-1}s(SS,"sortedIndexOf");function AS(e,r){return Pi(e,r,!0)}s(AS,"sortedLastIndex");function CS(e,r,o){return va(e,r,J(o,2),!0)}s(CS,"sortedLastIndexBy");function vS(e,r){var o=e==null?0:e.length;if(o){var l=Pi(e,r,!0)-1;if(Qt(e[l],r))return l}return-1}s(vS,"sortedLastIndexOf");function NS(e){return e&&e.length?Np(e):[]}s(NS,"sortedUniq");function bS(e,r){return e&&e.length?Np(e,J(r,2)):[]}s(bS,"sortedUniqBy");function IS(e){var r=e==null?0:e.length;return r?Ut(e,1,r):[]}s(IS,"tail");function wS(e,r,o){return e&&e.length?(r=o||r===t?1:le(r),Ut(e,0,r<0?0:r)):[]}s(wS,"take");function OS(e,r,o){var l=e==null?0:e.length;return l?(r=o||r===t?1:le(r),r=l-r,Ut(e,r<0?0:r,l)):[]}s(OS,"takeRight");function RS(e,r){return e&&e.length?Mi(e,J(r,3),!1,!0):[]}s(RS,"takeRightWhile");function xS(e,r){return e&&e.length?Mi(e,J(r,3)):[]}s(xS,"takeWhile");var DS=fe(function(e){return Cn(tt(e,1,Fe,!0))}),qS=fe(function(e){var r=Bt(e);return Fe(r)&&(r=t),Cn(tt(e,1,Fe,!0),J(r,2))}),LS=fe(function(e){var r=Bt(e);return r=typeof r=="function"?r:t,Cn(tt(e,1,Fe,!0),t,r)});function PS(e){return e&&e.length?Cn(e):[]}s(PS,"uniq");function MS(e,r){return e&&e.length?Cn(e,J(r,2)):[]}s(MS,"uniqBy");function FS(e,r){return r=typeof r=="function"?r:t,e&&e.length?Cn(e,t,r):[]}s(FS,"uniqWith");function ka(e){if(!(e&&e.length))return[];var r=0;return e=_n(e,function(o){if(Fe(o))return r=ze(o.length,r),!0}),sa(r,function(o){return we(e,na(o))})}s(ka,"unzip");function ff(e,r){if(!(e&&e.length))return[];var o=ka(e);return r==null?o:we(o,function(l){return bt(r,t,l)})}s(ff,"unzipWith");var US=fe(function(e,r){return Fe(e)?Lr(e,r):[]}),BS=fe(function(e){return ba(_n(e,Fe))}),$S=fe(function(e){var r=Bt(e);return Fe(r)&&(r=t),ba(_n(e,Fe),J(r,2))}),KS=fe(function(e){var r=Bt(e);return r=typeof r=="function"?r:t,ba(_n(e,Fe),t,r)}),kS=fe(ka);function GS(e,r){return Op(e||[],r||[],qr)}s(GS,"zipObject");function WS(e,r){return Op(e||[],r||[],Fr)}s(WS,"zipObjectDeep");var HS=fe(function(e){var r=e.length,o=r>1?e[r-1]:t;return o=typeof o=="function"?(e.pop(),o):t,ff(e,o)});function df(e){var r=m(e);return r.__chain__=!0,r}s(df,"chain");function VS(e,r){return r(e),e}s(VS,"tap");function Hi(e,r){return r(e)}s(Hi,"thru");var YS=an(function(e){var r=e.length,o=r?e[0]:0,l=this.__wrapped__,f=s(function(_){return da(_,e)},"interceptor");return r>1||this.__actions__.length||!(l instanceof me)||!on(o)?this.thru(f):(l=l.slice(o,+o+(r?1:0)),l.__actions__.push({func:Hi,args:[f],thisArg:t}),new Mt(l,this.__chain__).thru(function(_){return r&&!_.length&&_.push(t),_}))});function QS(){return df(this)}s(QS,"wrapperChain");function zS(){return new Mt(this.value(),this.__chain__)}s(zS,"wrapperCommit");function XS(){this.__values__===t&&(this.__values__=If(this.value()));var e=this.__index__>=this.__values__.length,r=e?t:this.__values__[this.__index__++];return{done:e,value:r}}s(XS,"wrapperNext");function ZS(){return this}s(ZS,"wrapperToIterator");function jS(e){for(var r,o=this;o instanceof Ri;){var l=af(o);l.__index__=0,l.__values__=t,r?f.__wrapped__=l:r=l;var f=l;o=o.__wrapped__}return f.__wrapped__=e,r}s(jS,"wrapperPlant");function JS(){var e=this.__wrapped__;if(e instanceof me){var r=e;return this.__actions__.length&&(r=new me(this)),r=r.reverse(),r.__actions__.push({func:Hi,args:[Ka],thisArg:t}),new Mt(r,this.__chain__)}return this.thru(Ka)}s(JS,"wrapperReverse");function eA(){return wp(this.__wrapped__,this.__actions__)}s(eA,"wrapperValue");var tA=Fi(function(e,r,o){Se.call(e,o)?++e[o]:rn(e,o,1)});function nA(e,r,o){var l=ae(e)?Kl:VE;return o&&ct(e,r,o)&&(r=t),l(e,J(r,3))}s(nA,"every");function rA(e,r){var o=ae(e)?_n:pp;return o(e,J(r,3))}s(rA,"filter");var iA=Bp(of),sA=Bp(uf);function aA(e,r){return tt(Vi(e,r),1)}s(aA,"flatMap");function oA(e,r){return tt(Vi(e,r),Z)}s(oA,"flatMapDeep");function uA(e,r,o){return o=o===t?1:le(o),tt(Vi(e,r),o)}s(uA,"flatMapDepth");function mf(e,r){var o=ae(e)?Lt:An;return o(e,J(r,3))}s(mf,"forEach");function hf(e,r){var o=ae(e)?Iy:lp;return o(e,J(r,3))}s(hf,"forEachRight");var cA=Fi(function(e,r,o){Se.call(e,o)?e[o].push(r):rn(e,o,[r])});function lA(e,r,o,l){e=ht(e)?e:or(e),o=o&&!l?le(o):0;var f=e.length;return o<0&&(o=ze(f+o,0)),Zi(e)?o<=f&&e.indexOf(r,o)>-1:!!f&&Xn(e,r,o)>-1}s(lA,"includes");var pA=fe(function(e,r,o){var l=-1,f=typeof r=="function",_=ht(e)?D(e.length):[];return An(e,function(A){_[++l]=f?bt(r,A,o):Pr(A,r,o)}),_}),fA=Fi(function(e,r,o){rn(e,o,r)});function Vi(e,r){var o=ae(e)?we:_p;return o(e,J(r,3))}s(Vi,"map");function dA(e,r,o,l){return e==null?[]:(ae(r)||(r=r==null?[]:[r]),o=l?t:o,ae(o)||(o=o==null?[]:[o]),Sp(e,r,o))}s(dA,"orderBy");var mA=Fi(function(e,r,o){e[o?0:1].push(r)},function(){return[[],[]]});function hA(e,r,o){var l=ae(e)?ea:Hl,f=arguments.length<3;return l(e,J(r,4),o,f,An)}s(hA,"reduce");function gA(e,r,o){var l=ae(e)?wy:Hl,f=arguments.length<3;return l(e,J(r,4),o,f,lp)}s(gA,"reduceRight");function _A(e,r){var o=ae(e)?_n:pp;return o(e,zi(J(r,3)))}s(_A,"reject");function yA(e){var r=ae(e)?ap:lT;return r(e)}s(yA,"sample");function EA(e,r,o){(o?ct(e,r,o):r===t)?r=1:r=le(r);var l=ae(e)?KE:pT;return l(e,r)}s(EA,"sampleSize");function TA(e){var r=ae(e)?kE:dT;return r(e)}s(TA,"shuffle");function SA(e){if(e==null)return 0;if(ht(e))return Zi(e)?jn(e):e.length;var r=st(e);return r==W||r==Ie?e.size:Ea(e).length}s(SA,"size");function AA(e,r,o){var l=ae(e)?ta:mT;return o&&ct(e,r,o)&&(r=t),l(e,J(r,3))}s(AA,"some");var CA=fe(function(e,r){if(e==null)return[];var o=r.length;return o>1&&ct(e,r[0],r[1])?r=[]:o>2&&ct(r[0],r[1],r[2])&&(r=[r[0]]),Sp(e,tt(r,1),[])}),Yi=rE||function(){return Xe.Date.now()};function vA(e,r){if(typeof r!="function")throw new Pt(u);return e=le(e),function(){if(--e<1)return r.apply(this,arguments)}}s(vA,"after");function gf(e,r,o){return r=o?t:r,r=e&&r==null?e.length:r,sn(e,k,t,t,t,t,r)}s(gf,"ary");function _f(e,r){var o;if(typeof r!="function")throw new Pt(u);return e=le(e),function(){return--e>0&&(o=r.apply(this,arguments)),e<=1&&(r=t),o}}s(_f,"before");var Ga=fe(function(e,r,o){var l=C;if(o.length){var f=En(o,sr(Ga));l|=q}return sn(e,l,r,o,f)}),yf=fe(function(e,r,o){var l=C|x;if(o.length){var f=En(o,sr(yf));l|=q}return sn(r,l,e,o,f)});function Ef(e,r,o){r=o?t:r;var l=sn(e,N,t,t,t,t,t,r);return l.placeholder=Ef.placeholder,l}s(Ef,"curry");function Tf(e,r,o){r=o?t:r;var l=sn(e,F,t,t,t,t,t,r);return l.placeholder=Tf.placeholder,l}s(Tf,"curryRight");function Sf(e,r,o){var l,f,_,A,b,O,P=0,M=!1,B=!1,H=!0;if(typeof e!="function")throw new Pt(u);r=$t(r)||0,xe(o)&&(M=!!o.leading,B="maxWait"in o,_=B?ze($t(o.maxWait)||0,r):_,H="trailing"in o?!!o.trailing:H);function X(Ue){var zt=l,ln=f;return l=f=t,P=Ue,A=e.apply(ln,zt),A}s(X,"invokeFunc");function ee(Ue){return P=Ue,b=$r(de,r),M?X(Ue):A}s(ee,"leadingEdge");function pe(Ue){var zt=Ue-O,ln=Ue-P,$f=r-zt;return B?it($f,_-ln):$f}s(pe,"remainingWait");function te(Ue){var zt=Ue-O,ln=Ue-P;return O===t||zt>=r||zt<0||B&&ln>=_}s(te,"shouldInvoke");function de(){var Ue=Yi();if(te(Ue))return he(Ue);b=$r(de,pe(Ue))}s(de,"timerExpired");function he(Ue){return b=t,H&&l?X(Ue):(l=f=t,A)}s(he,"trailingEdge");function Rt(){b!==t&&Rp(b),P=0,l=O=f=b=t}s(Rt,"cancel");function lt(){return b===t?A:he(Yi())}s(lt,"flush");function xt(){var Ue=Yi(),zt=te(Ue);if(l=arguments,f=this,O=Ue,zt){if(b===t)return ee(O);if(B)return Rp(b),b=$r(de,r),X(O)}return b===t&&(b=$r(de,r)),A}return s(xt,"debounced"),xt.cancel=Rt,xt.flush=lt,xt}s(Sf,"debounce");var NA=fe(function(e,r){return cp(e,1,r)}),bA=fe(function(e,r,o){return cp(e,$t(r)||0,o)});function IA(e){return sn(e,ie)}s(IA,"flip");function Qi(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new Pt(u);var o=s(function(){var l=arguments,f=r?r.apply(this,l):l[0],_=o.cache;if(_.has(f))return _.get(f);var A=e.apply(this,l);return o.cache=_.set(f,A)||_,A},"memoized");return o.cache=new(Qi.Cache||nn),o}s(Qi,"memoize"),Qi.Cache=nn;function zi(e){if(typeof e!="function")throw new Pt(u);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}s(zi,"negate");function wA(e){return _f(2,e)}s(wA,"once");var OA=hT(function(e,r){r=r.length==1&&ae(r[0])?we(r[0],It(J())):we(tt(r,1),It(J()));var o=r.length;return fe(function(l){for(var f=-1,_=it(l.length,o);++f<_;)l[f]=r[f].call(this,l[f]);return bt(e,this,l)})}),Wa=fe(function(e,r){var o=En(r,sr(Wa));return sn(e,q,t,r,o)}),Af=fe(function(e,r){var o=En(r,sr(Af));return sn(e,$,t,r,o)}),RA=an(function(e,r){return sn(e,V,t,t,t,r)});function xA(e,r){if(typeof e!="function")throw new Pt(u);return r=r===t?r:le(r),fe(e,r)}s(xA,"rest");function DA(e,r){if(typeof e!="function")throw new Pt(u);return r=r==null?0:ze(le(r),0),fe(function(o){var l=o[r],f=Nn(o,0,r);return l&&yn(f,l),bt(e,this,f)})}s(DA,"spread");function qA(e,r,o){var l=!0,f=!0;if(typeof e!="function")throw new Pt(u);return xe(o)&&(l="leading"in o?!!o.leading:l,f="trailing"in o?!!o.trailing:f),Sf(e,r,{leading:l,maxWait:r,trailing:f})}s(qA,"throttle");function LA(e){return gf(e,1)}s(LA,"unary");function PA(e,r){return Wa(wa(r),e)}s(PA,"wrap");function MA(){if(!arguments.length)return[];var e=arguments[0];return ae(e)?e:[e]}s(MA,"castArray");function FA(e){return Ft(e,y)}s(FA,"clone");function UA(e,r){return r=typeof r=="function"?r:t,Ft(e,y,r)}s(UA,"cloneWith");function BA(e){return Ft(e,g|y)}s(BA,"cloneDeep");function $A(e,r){return r=typeof r=="function"?r:t,Ft(e,g|y,r)}s($A,"cloneDeepWith");function KA(e,r){return r==null||up(e,r,Ze(r))}s(KA,"conformsTo");function Qt(e,r){return e===r||e!==e&&r!==r}s(Qt,"eq");var kA=Ki(ga),GA=Ki(function(e,r){return e>=r}),kn=mp(function(){return arguments}())?mp:function(e){return Me(e)&&Se.call(e,"callee")&&!ep.call(e,"callee")},ae=D.isArray,WA=Pl?It(Pl):jE;function ht(e){return e!=null&&Xi(e.length)&&!un(e)}s(ht,"isArrayLike");function Fe(e){return Me(e)&&ht(e)}s(Fe,"isArrayLikeObject");function HA(e){return e===!0||e===!1||Me(e)&&ut(e)==mn}s(HA,"isBoolean");var bn=sE||to,VA=Ml?It(Ml):JE;function YA(e){return Me(e)&&e.nodeType===1&&!Kr(e)}s(YA,"isElement");function QA(e){if(e==null)return!0;if(ht(e)&&(ae(e)||typeof e=="string"||typeof e.splice=="function"||bn(e)||ar(e)||kn(e)))return!e.length;var r=st(e);if(r==W||r==Ie)return!e.size;if(Br(e))return!Ea(e).length;for(var o in e)if(Se.call(e,o))return!1;return!0}s(QA,"isEmpty");function zA(e,r){return Mr(e,r)}s(zA,"isEqual");function XA(e,r,o){o=typeof o=="function"?o:t;var l=o?o(e,r):t;return l===t?Mr(e,r,t,o):!!l}s(XA,"isEqualWith");function Ha(e){if(!Me(e))return!1;var r=ut(e);return r==v||r==Us||typeof e.message=="string"&&typeof e.name=="string"&&!Kr(e)}s(Ha,"isError");function ZA(e){return typeof e=="number"&&np(e)}s(ZA,"isFinite");function un(e){if(!xe(e))return!1;var r=ut(e);return r==R||r==G||r==Fs||r==Ke}s(un,"isFunction");function Cf(e){return typeof e=="number"&&e==le(e)}s(Cf,"isInteger");function Xi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ye}s(Xi,"isLength");function xe(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}s(xe,"isObject");function Me(e){return e!=null&&typeof e=="object"}s(Me,"isObjectLike");var vf=Fl?It(Fl):tT;function jA(e,r){return e===r||ya(e,r,Pa(r))}s(jA,"isMatch");function JA(e,r,o){return o=typeof o=="function"?o:t,ya(e,r,Pa(r),o)}s(JA,"isMatchWith");function eC(e){return Nf(e)&&e!=+e}s(eC,"isNaN");function tC(e){if(UT(e))throw new re(a);return hp(e)}s(tC,"isNative");function nC(e){return e===null}s(nC,"isNull");function rC(e){return e==null}s(rC,"isNil");function Nf(e){return typeof e=="number"||Me(e)&&ut(e)==ue}s(Nf,"isNumber");function Kr(e){if(!Me(e)||ut(e)!=ge)return!1;var r=Ci(e);if(r===null)return!0;var o=Se.call(r,"constructor")&&r.constructor;return typeof o=="function"&&o instanceof o&&Ei.call(o)==Jy}s(Kr,"isPlainObject");var Va=Ul?It(Ul):nT;function iC(e){return Cf(e)&&e>=-Ye&&e<=Ye}s(iC,"isSafeInteger");var bf=Bl?It(Bl):rT;function Zi(e){return typeof e=="string"||!ae(e)&&Me(e)&&ut(e)==ke}s(Zi,"isString");function Ot(e){return typeof e=="symbol"||Me(e)&&ut(e)==Ce}s(Ot,"isSymbol");var ar=$l?It($l):iT;function sC(e){return e===t}s(sC,"isUndefined");function aC(e){return Me(e)&&st(e)==Je}s(aC,"isWeakMap");function oC(e){return Me(e)&&ut(e)==ot}s(oC,"isWeakSet");var uC=Ki(Ta),cC=Ki(function(e,r){return e<=r});function If(e){if(!e)return[];if(ht(e))return Zi(e)?Vt(e):mt(e);if(wr&&e[wr])return Ky(e[wr]());var r=st(e),o=r==W?oa:r==Ie?gi:or;return o(e)}s(If,"toArray");function cn(e){if(!e)return e===0?e:0;if(e=$t(e),e===Z||e===-Z){var r=e<0?-1:1;return r*Nr}return e===e?e:0}s(cn,"toFinite");function le(e){var r=cn(e),o=r%1;return r===r?o?r-o:r:0}s(le,"toInteger");function wf(e){return e?Un(le(e),0,Dt):0}s(wf,"toLength");function $t(e){if(typeof e=="number")return e;if(Ot(e))return Yn;if(xe(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=xe(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Vl(e);var o=W_.test(e);return o||V_.test(e)?vy(e.slice(2),o?2:8):G_.test(e)?Yn:+e}s($t,"toNumber");function Of(e){return Jt(e,gt(e))}s(Of,"toPlainObject");function lC(e){return e?Un(le(e),-Ye,Ye):e===0?e:0}s(lC,"toSafeInteger");function Te(e){return e==null?"":wt(e)}s(Te,"toString");var pC=rr(function(e,r){if(Br(r)||ht(r)){Jt(r,Ze(r),e);return}for(var o in r)Se.call(r,o)&&qr(e,o,r[o])}),Rf=rr(function(e,r){Jt(r,gt(r),e)}),ji=rr(function(e,r,o,l){Jt(r,gt(r),e,l)}),fC=rr(function(e,r,o,l){Jt(r,Ze(r),e,l)}),dC=an(da);function mC(e,r){var o=nr(e);return r==null?o:op(o,r)}s(mC,"create");var hC=fe(function(e,r){e=Ae(e);var o=-1,l=r.length,f=l>2?r[2]:t;for(f&&ct(r[0],r[1],f)&&(l=1);++o<l;)for(var _=r[o],A=gt(_),b=-1,O=A.length;++b<O;){var P=A[b],M=e[P];(M===t||Qt(M,Jn[P])&&!Se.call(e,P))&&(e[P]=_[P])}return e}),gC=fe(function(e){return e.push(t,Vp),bt(xf,t,e)});function _C(e,r){return kl(e,J(r,3),jt)}s(_C,"findKey");function yC(e,r){return kl(e,J(r,3),ha)}s(yC,"findLastKey");function EC(e,r){return e==null?e:ma(e,J(r,3),gt)}s(EC,"forIn");function TC(e,r){return e==null?e:fp(e,J(r,3),gt)}s(TC,"forInRight");function SC(e,r){return e&&jt(e,J(r,3))}s(SC,"forOwn");function AC(e,r){return e&&ha(e,J(r,3))}s(AC,"forOwnRight");function CC(e){return e==null?[]:qi(e,Ze(e))}s(CC,"functions");function vC(e){return e==null?[]:qi(e,gt(e))}s(vC,"functionsIn");function Ya(e,r,o){var l=e==null?t:Bn(e,r);return l===t?o:l}s(Ya,"get");function NC(e,r){return e!=null&&zp(e,r,QE)}s(NC,"has");function Qa(e,r){return e!=null&&zp(e,r,zE)}s(Qa,"hasIn");var bC=Kp(function(e,r,o){r!=null&&typeof r.toString!="function"&&(r=Ti.call(r)),e[r]=o},Xa(_t)),IC=Kp(function(e,r,o){r!=null&&typeof r.toString!="function"&&(r=Ti.call(r)),Se.call(e,r)?e[r].push(o):e[r]=[o]},J),wC=fe(Pr);function Ze(e){return ht(e)?sp(e):Ea(e)}s(Ze,"keys");function gt(e){return ht(e)?sp(e,!0):sT(e)}s(gt,"keysIn");function OC(e,r){var o={};return r=J(r,3),jt(e,function(l,f,_){rn(o,r(l,f,_),l)}),o}s(OC,"mapKeys");function RC(e,r){var o={};return r=J(r,3),jt(e,function(l,f,_){rn(o,f,r(l,f,_))}),o}s(RC,"mapValues");var xC=rr(function(e,r,o){Li(e,r,o)}),xf=rr(function(e,r,o,l){Li(e,r,o,l)}),DC=an(function(e,r){var o={};if(e==null)return o;var l=!1;r=we(r,function(_){return _=vn(_,e),l||(l=_.length>1),_}),Jt(e,qa(e),o),l&&(o=Ft(o,g|T|y,bT));for(var f=r.length;f--;)Na(o,r[f]);return o});function qC(e,r){return Df(e,zi(J(r)))}s(qC,"omitBy");var LC=an(function(e,r){return e==null?{}:oT(e,r)});function Df(e,r){if(e==null)return{};var o=we(qa(e),function(l){return[l]});return r=J(r),Ap(e,o,function(l,f){return r(l,f[0])})}s(Df,"pickBy");function PC(e,r,o){r=vn(r,e);var l=-1,f=r.length;for(f||(f=1,e=t);++l<f;){var _=e==null?t:e[en(r[l])];_===t&&(l=f,_=o),e=un(_)?_.call(e):_}return e}s(PC,"result");function MC(e,r,o){return e==null?e:Fr(e,r,o)}s(MC,"set");function FC(e,r,o,l){return l=typeof l=="function"?l:t,e==null?e:Fr(e,r,o,l)}s(FC,"setWith");var qf=Wp(Ze),Lf=Wp(gt);function UC(e,r,o){var l=ae(e),f=l||bn(e)||ar(e);if(r=J(r,4),o==null){var _=e&&e.constructor;f?o=l?new _:[]:xe(e)?o=un(_)?nr(Ci(e)):{}:o={}}return(f?Lt:jt)(e,function(A,b,O){return r(o,A,b,O)}),o}s(UC,"transform");function BC(e,r){return e==null?!0:Na(e,r)}s(BC,"unset");function $C(e,r,o){return e==null?e:Ip(e,r,wa(o))}s($C,"update");function KC(e,r,o,l){return l=typeof l=="function"?l:t,e==null?e:Ip(e,r,wa(o),l)}s(KC,"updateWith");function or(e){return e==null?[]:aa(e,Ze(e))}s(or,"values");function kC(e){return e==null?[]:aa(e,gt(e))}s(kC,"valuesIn");function GC(e,r,o){return o===t&&(o=r,r=t),o!==t&&(o=$t(o),o=o===o?o:0),r!==t&&(r=$t(r),r=r===r?r:0),Un($t(e),r,o)}s(GC,"clamp");function WC(e,r,o){return r=cn(r),o===t?(o=r,r=0):o=cn(o),e=$t(e),XE(e,r,o)}s(WC,"inRange");function HC(e,r,o){if(o&&typeof o!="boolean"&&ct(e,r,o)&&(r=o=t),o===t&&(typeof r=="boolean"?(o=r,r=t):typeof e=="boolean"&&(o=e,e=t)),e===t&&r===t?(e=0,r=1):(e=cn(e),r===t?(r=e,e=0):r=cn(r)),e>r){var l=e;e=r,r=l}if(o||e%1||r%1){var f=rp();return it(e+f*(r-e+Cy("1e-"+((f+"").length-1))),r)}return Aa(e,r)}s(HC,"random");var VC=ir(function(e,r,o){return r=r.toLowerCase(),e+(o?Pf(r):r)});function Pf(e){return za(Te(e).toLowerCase())}s(Pf,"capitalize");function Mf(e){return e=Te(e),e&&e.replace(Q_,My).replace(dy,"")}s(Mf,"deburr");function YC(e,r,o){e=Te(e),r=wt(r);var l=e.length;o=o===t?l:Un(le(o),0,l);var f=o;return o-=r.length,o>=0&&e.slice(o,f)==r}s(YC,"endsWith");function QC(e){return e=Te(e),e&&Ks.test(e)?e.replace(oi,Fy):e}s(QC,"escape");function zC(e){return e=Te(e),e&&L_.test(e)?e.replace(Ht,"\\$&"):e}s(zC,"escapeRegExp");var XC=ir(function(e,r,o){return e+(o?"-":"")+r.toLowerCase()}),ZC=ir(function(e,r,o){return e+(o?" ":"")+r.toLowerCase()}),jC=Up("toLowerCase");function JC(e,r,o){e=Te(e),r=le(r);var l=r?jn(e):0;if(!r||l>=r)return e;var f=(r-l)/2;return $i(Ii(f),o)+e+$i(bi(f),o)}s(JC,"pad");function ev(e,r,o){e=Te(e),r=le(r);var l=r?jn(e):0;return r&&l<r?e+$i(r-l,o):e}s(ev,"padEnd");function tv(e,r,o){e=Te(e),r=le(r);var l=r?jn(e):0;return r&&l<r?$i(r-l,o)+e:e}s(tv,"padStart");function nv(e,r,o){return o||r==null?r=0:r&&(r=+r),cE(Te(e).replace(Hs,""),r||0)}s(nv,"parseInt");function rv(e,r,o){return(o?ct(e,r,o):r===t)?r=1:r=le(r),Ca(Te(e),r)}s(rv,"repeat");function iv(){var e=arguments,r=Te(e[0]);return e.length<3?r:r.replace(e[1],e[2])}s(iv,"replace");var sv=ir(function(e,r,o){return e+(o?"_":"")+r.toLowerCase()});function av(e,r,o){return o&&typeof o!="number"&&ct(e,r,o)&&(r=o=t),o=o===t?Dt:o>>>0,o?(e=Te(e),e&&(typeof r=="string"||r!=null&&!Va(r))&&(r=wt(r),!r&&Zn(e))?Nn(Vt(e),0,o):e.split(r,o)):[]}s(av,"split");var ov=ir(function(e,r,o){return e+(o?" ":"")+za(r)});function uv(e,r,o){return e=Te(e),o=o==null?0:Un(le(o),0,e.length),r=wt(r),e.slice(o,o+r.length)==r}s(uv,"startsWith");function cv(e,r,o){var l=m.templateSettings;o&&ct(e,r,o)&&(r=t),e=Te(e),r=ji({},r,l,Hp);var f=ji({},r.imports,l.imports,Hp),_=Ze(f),A=aa(f,_),b,O,P=0,M=r.interpolate||pi,B="__p += '",H=ua((r.escape||pi).source+"|"+M.source+"|"+(M===li?k_:pi).source+"|"+(r.evaluate||pi).source+"|$","g"),X="//# sourceURL="+(Se.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yy+"]")+`
`;e.replace(H,function(te,de,he,Rt,lt,xt){return he||(he=Rt),B+=e.slice(P,xt).replace(z_,Uy),de&&(b=!0,B+=`' +
__e(`+de+`) +
'`),lt&&(O=!0,B+=`';
`+lt+`;
__p += '`),he&&(B+=`' +
((__t = (`+he+`)) == null ? '' : __t) +
'`),P=xt+te.length,te}),B+=`';
`;var ee=Se.call(r,"variable")&&r.variable;if(!ee)B=`with (obj) {
`+B+`
}
`;else if($_.test(ee))throw new re(c);B=(O?B.replace(qn,""):B).replace(ai,"$1").replace(Bs,"$1;"),B="function("+(ee||"obj")+`) {
`+(ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(O?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var pe=Uf(function(){return _e(_,X+"return "+B).apply(t,A)});if(pe.source=B,Ha(pe))throw pe;return pe}s(cv,"template");function lv(e){return Te(e).toLowerCase()}s(lv,"toLower");function pv(e){return Te(e).toUpperCase()}s(pv,"toUpper");function fv(e,r,o){if(e=Te(e),e&&(o||r===t))return Vl(e);if(!e||!(r=wt(r)))return e;var l=Vt(e),f=Vt(r),_=Yl(l,f),A=Ql(l,f)+1;return Nn(l,_,A).join("")}s(fv,"trim");function dv(e,r,o){if(e=Te(e),e&&(o||r===t))return e.slice(0,Xl(e)+1);if(!e||!(r=wt(r)))return e;var l=Vt(e),f=Ql(l,Vt(r))+1;return Nn(l,0,f).join("")}s(dv,"trimEnd");function mv(e,r,o){if(e=Te(e),e&&(o||r===t))return e.replace(Hs,"");if(!e||!(r=wt(r)))return e;var l=Vt(e),f=Yl(l,Vt(r));return Nn(l,f).join("")}s(mv,"trimStart");function hv(e,r){var o=K,l=Q;if(xe(r)){var f="separator"in r?r.separator:f;o="length"in r?le(r.length):o,l="omission"in r?wt(r.omission):l}e=Te(e);var _=e.length;if(Zn(e)){var A=Vt(e);_=A.length}if(o>=_)return e;var b=o-jn(l);if(b<1)return l;var O=A?Nn(A,0,b).join(""):e.slice(0,b);if(f===t)return O+l;if(A&&(b+=O.length-b),Va(f)){if(e.slice(b).search(f)){var P,M=O;for(f.global||(f=ua(f.source,Te(ml.exec(f))+"g")),f.lastIndex=0;P=f.exec(M);)var B=P.index;O=O.slice(0,B===t?b:B)}}else if(e.indexOf(wt(f),b)!=b){var H=O.lastIndexOf(f);H>-1&&(O=O.slice(0,H))}return O+l}s(hv,"truncate");function gv(e){return e=Te(e),e&&$s.test(e)?e.replace(br,Hy):e}s(gv,"unescape");var _v=ir(function(e,r,o){return e+(o?" ":"")+r.toUpperCase()}),za=Up("toUpperCase");function Ff(e,r,o){return e=Te(e),r=o?t:r,r===t?$y(e)?Qy(e):xy(e):e.match(r)||[]}s(Ff,"words");var Uf=fe(function(e,r){try{return bt(e,t,r)}catch(o){return Ha(o)?o:new re(o)}}),yv=an(function(e,r){return Lt(r,function(o){o=en(o),rn(e,o,Ga(e[o],e))}),e});function Ev(e){var r=e==null?0:e.length,o=J();return e=r?we(e,function(l){if(typeof l[1]!="function")throw new Pt(u);return[o(l[0]),l[1]]}):[],fe(function(l){for(var f=-1;++f<r;){var _=e[f];if(bt(_[0],this,l))return bt(_[1],this,l)}})}s(Ev,"cond");function Tv(e){return HE(Ft(e,g))}s(Tv,"conforms");function Xa(e){return function(){return e}}s(Xa,"constant");function Sv(e,r){return e==null||e!==e?r:e}s(Sv,"defaultTo");var Av=$p(),Cv=$p(!0);function _t(e){return e}s(_t,"identity");function Za(e){return gp(typeof e=="function"?e:Ft(e,g))}s(Za,"iteratee");function vv(e){return yp(Ft(e,g))}s(vv,"matches");function Nv(e,r){return Ep(e,Ft(r,g))}s(Nv,"matchesProperty");var bv=fe(function(e,r){return function(o){return Pr(o,e,r)}}),Iv=fe(function(e,r){return function(o){return Pr(e,o,r)}});function ja(e,r,o){var l=Ze(r),f=qi(r,l);o==null&&!(xe(r)&&(f.length||!l.length))&&(o=r,r=e,e=this,f=qi(r,Ze(r)));var _=!(xe(o)&&"chain"in o)||!!o.chain,A=un(e);return Lt(f,function(b){var O=r[b];e[b]=O,A&&(e.prototype[b]=function(){var P=this.__chain__;if(_||P){var M=e(this.__wrapped__),B=M.__actions__=mt(this.__actions__);return B.push({func:O,args:arguments,thisArg:e}),M.__chain__=P,M}return O.apply(e,yn([this.value()],arguments))})}),e}s(ja,"mixin");function wv(){return Xe._===this&&(Xe._=eE),this}s(wv,"noConflict");function Ja(){}s(Ja,"noop");function Ov(e){return e=le(e),fe(function(r){return Tp(r,e)})}s(Ov,"nthArg");var Rv=Ra(we),xv=Ra(Kl),Dv=Ra(ta);function Bf(e){return Fa(e)?na(en(e)):uT(e)}s(Bf,"property");function qv(e){return function(r){return e==null?t:Bn(e,r)}}s(qv,"propertyOf");var Lv=kp(),Pv=kp(!0);function eo(){return[]}s(eo,"stubArray");function to(){return!1}s(to,"stubFalse");function Mv(){return{}}s(Mv,"stubObject");function Fv(){return""}s(Fv,"stubString");function Uv(){return!0}s(Uv,"stubTrue");function Bv(e,r){if(e=le(e),e<1||e>Ye)return[];var o=Dt,l=it(e,Dt);r=J(r),e-=Dt;for(var f=sa(l,r);++o<e;)r(o);return f}s(Bv,"times");function $v(e){return ae(e)?we(e,en):Ot(e)?[e]:mt(sf(Te(e)))}s($v,"toPath");function Kv(e){var r=++jy;return Te(e)+r}s(Kv,"uniqueId");var kv=Bi(function(e,r){return e+r},0),Gv=xa("ceil"),Wv=Bi(function(e,r){return e/r},1),Hv=xa("floor");function Vv(e){return e&&e.length?Di(e,_t,ga):t}s(Vv,"max");function Yv(e,r){return e&&e.length?Di(e,J(r,2),ga):t}s(Yv,"maxBy");function Qv(e){return Wl(e,_t)}s(Qv,"mean");function zv(e,r){return Wl(e,J(r,2))}s(zv,"meanBy");function Xv(e){return e&&e.length?Di(e,_t,Ta):t}s(Xv,"min");function Zv(e,r){return e&&e.length?Di(e,J(r,2),Ta):t}s(Zv,"minBy");var jv=Bi(function(e,r){return e*r},1),Jv=xa("round"),eN=Bi(function(e,r){return e-r},0);function tN(e){return e&&e.length?ia(e,_t):0}s(tN,"sum");function nN(e,r){return e&&e.length?ia(e,J(r,2)):0}return s(nN,"sumBy"),m.after=vA,m.ary=gf,m.assign=pC,m.assignIn=Rf,m.assignInWith=ji,m.assignWith=fC,m.at=dC,m.before=_f,m.bind=Ga,m.bindAll=yv,m.bindKey=yf,m.castArray=MA,m.chain=df,m.chunk=HT,m.compact=VT,m.concat=YT,m.cond=Ev,m.conforms=Tv,m.constant=Xa,m.countBy=tA,m.create=mC,m.curry=Ef,m.curryRight=Tf,m.debounce=Sf,m.defaults=hC,m.defaultsDeep=gC,m.defer=NA,m.delay=bA,m.difference=QT,m.differenceBy=zT,m.differenceWith=XT,m.drop=ZT,m.dropRight=jT,m.dropRightWhile=JT,m.dropWhile=eS,m.fill=tS,m.filter=rA,m.flatMap=aA,m.flatMapDeep=oA,m.flatMapDepth=uA,m.flatten=cf,m.flattenDeep=nS,m.flattenDepth=rS,m.flip=IA,m.flow=Av,m.flowRight=Cv,m.fromPairs=iS,m.functions=CC,m.functionsIn=vC,m.groupBy=cA,m.initial=aS,m.intersection=oS,m.intersectionBy=uS,m.intersectionWith=cS,m.invert=bC,m.invertBy=IC,m.invokeMap=pA,m.iteratee=Za,m.keyBy=fA,m.keys=Ze,m.keysIn=gt,m.map=Vi,m.mapKeys=OC,m.mapValues=RC,m.matches=vv,m.matchesProperty=Nv,m.memoize=Qi,m.merge=xC,m.mergeWith=xf,m.method=bv,m.methodOf=Iv,m.mixin=ja,m.negate=zi,m.nthArg=Ov,m.omit=DC,m.omitBy=qC,m.once=wA,m.orderBy=dA,m.over=Rv,m.overArgs=OA,m.overEvery=xv,m.overSome=Dv,m.partial=Wa,m.partialRight=Af,m.partition=mA,m.pick=LC,m.pickBy=Df,m.property=Bf,m.propertyOf=qv,m.pull=dS,m.pullAll=pf,m.pullAllBy=mS,m.pullAllWith=hS,m.pullAt=gS,m.range=Lv,m.rangeRight=Pv,m.rearg=RA,m.reject=_A,m.remove=_S,m.rest=xA,m.reverse=Ka,m.sampleSize=EA,m.set=MC,m.setWith=FC,m.shuffle=TA,m.slice=yS,m.sortBy=CA,m.sortedUniq=NS,m.sortedUniqBy=bS,m.split=av,m.spread=DA,m.tail=IS,m.take=wS,m.takeRight=OS,m.takeRightWhile=RS,m.takeWhile=xS,m.tap=VS,m.throttle=qA,m.thru=Hi,m.toArray=If,m.toPairs=qf,m.toPairsIn=Lf,m.toPath=$v,m.toPlainObject=Of,m.transform=UC,m.unary=LA,m.union=DS,m.unionBy=qS,m.unionWith=LS,m.uniq=PS,m.uniqBy=MS,m.uniqWith=FS,m.unset=BC,m.unzip=ka,m.unzipWith=ff,m.update=$C,m.updateWith=KC,m.values=or,m.valuesIn=kC,m.without=US,m.words=Ff,m.wrap=PA,m.xor=BS,m.xorBy=$S,m.xorWith=KS,m.zip=kS,m.zipObject=GS,m.zipObjectDeep=WS,m.zipWith=HS,m.entries=qf,m.entriesIn=Lf,m.extend=Rf,m.extendWith=ji,ja(m,m),m.add=kv,m.attempt=Uf,m.camelCase=VC,m.capitalize=Pf,m.ceil=Gv,m.clamp=GC,m.clone=FA,m.cloneDeep=BA,m.cloneDeepWith=$A,m.cloneWith=UA,m.conformsTo=KA,m.deburr=Mf,m.defaultTo=Sv,m.divide=Wv,m.endsWith=YC,m.eq=Qt,m.escape=QC,m.escapeRegExp=zC,m.every=nA,m.find=iA,m.findIndex=of,m.findKey=_C,m.findLast=sA,m.findLastIndex=uf,m.findLastKey=yC,m.floor=Hv,m.forEach=mf,m.forEachRight=hf,m.forIn=EC,m.forInRight=TC,m.forOwn=SC,m.forOwnRight=AC,m.get=Ya,m.gt=kA,m.gte=GA,m.has=NC,m.hasIn=Qa,m.head=lf,m.identity=_t,m.includes=lA,m.indexOf=sS,m.inRange=WC,m.invoke=wC,m.isArguments=kn,m.isArray=ae,m.isArrayBuffer=WA,m.isArrayLike=ht,m.isArrayLikeObject=Fe,m.isBoolean=HA,m.isBuffer=bn,m.isDate=VA,m.isElement=YA,m.isEmpty=QA,m.isEqual=zA,m.isEqualWith=XA,m.isError=Ha,m.isFinite=ZA,m.isFunction=un,m.isInteger=Cf,m.isLength=Xi,m.isMap=vf,m.isMatch=jA,m.isMatchWith=JA,m.isNaN=eC,m.isNative=tC,m.isNil=rC,m.isNull=nC,m.isNumber=Nf,m.isObject=xe,m.isObjectLike=Me,m.isPlainObject=Kr,m.isRegExp=Va,m.isSafeInteger=iC,m.isSet=bf,m.isString=Zi,m.isSymbol=Ot,m.isTypedArray=ar,m.isUndefined=sC,m.isWeakMap=aC,m.isWeakSet=oC,m.join=lS,m.kebabCase=XC,m.last=Bt,m.lastIndexOf=pS,m.lowerCase=ZC,m.lowerFirst=jC,m.lt=uC,m.lte=cC,m.max=Vv,m.maxBy=Yv,m.mean=Qv,m.meanBy=zv,m.min=Xv,m.minBy=Zv,m.stubArray=eo,m.stubFalse=to,m.stubObject=Mv,m.stubString=Fv,m.stubTrue=Uv,m.multiply=jv,m.nth=fS,m.noConflict=wv,m.noop=Ja,m.now=Yi,m.pad=JC,m.padEnd=ev,m.padStart=tv,m.parseInt=nv,m.random=HC,m.reduce=hA,m.reduceRight=gA,m.repeat=rv,m.replace=iv,m.result=PC,m.round=Jv,m.runInContext=w,m.sample=yA,m.size=SA,m.snakeCase=sv,m.some=AA,m.sortedIndex=ES,m.sortedIndexBy=TS,m.sortedIndexOf=SS,m.sortedLastIndex=AS,m.sortedLastIndexBy=CS,m.sortedLastIndexOf=vS,m.startCase=ov,m.startsWith=uv,m.subtract=eN,m.sum=tN,m.sumBy=nN,m.template=cv,m.times=Bv,m.toFinite=cn,m.toInteger=le,m.toLength=wf,m.toLower=lv,m.toNumber=$t,m.toSafeInteger=lC,m.toString=Te,m.toUpper=pv,m.trim=fv,m.trimEnd=dv,m.trimStart=mv,m.truncate=hv,m.unescape=gv,m.uniqueId=Kv,m.upperCase=_v,m.upperFirst=za,m.each=mf,m.eachRight=hf,m.first=lf,ja(m,function(){var e={};return jt(m,function(r,o){Se.call(m.prototype,o)||(e[o]=r)}),e}(),{chain:!1}),m.VERSION=n,Lt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){m[e].placeholder=m}),Lt(["drop","take"],function(e,r){me.prototype[e]=function(o){o=o===t?1:ze(le(o),0);var l=this.__filtered__&&!r?new me(this):this.clone();return l.__filtered__?l.__takeCount__=it(o,l.__takeCount__):l.__views__.push({size:it(o,Dt),type:e+(l.__dir__<0?"Right":"")}),l},me.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),Lt(["filter","map","takeWhile"],function(e,r){var o=r+1,l=o==Oe||o==ft;me.prototype[e]=function(f){var _=this.clone();return _.__iteratees__.push({iteratee:J(f,3),type:o}),_.__filtered__=_.__filtered__||l,_}}),Lt(["head","last"],function(e,r){var o="take"+(r?"Right":"");me.prototype[e]=function(){return this[o](1).value()[0]}}),Lt(["initial","tail"],function(e,r){var o="drop"+(r?"":"Right");me.prototype[e]=function(){return this.__filtered__?new me(this):this[o](1)}}),me.prototype.compact=function(){return this.filter(_t)},me.prototype.find=function(e){return this.filter(e).head()},me.prototype.findLast=function(e){return this.reverse().find(e)},me.prototype.invokeMap=fe(function(e,r){return typeof e=="function"?new me(this):this.map(function(o){return Pr(o,e,r)})}),me.prototype.reject=function(e){return this.filter(zi(J(e)))},me.prototype.slice=function(e,r){e=le(e);var o=this;return o.__filtered__&&(e>0||r<0)?new me(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),r!==t&&(r=le(r),o=r<0?o.dropRight(-r):o.take(r-e)),o)},me.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},me.prototype.toArray=function(){return this.take(Dt)},jt(me.prototype,function(e,r){var o=/^(?:filter|find|map|reject)|While$/.test(r),l=/^(?:head|last)$/.test(r),f=m[l?"take"+(r=="last"?"Right":""):r],_=l||/^find/.test(r);f&&(m.prototype[r]=function(){var A=this.__wrapped__,b=l?[1]:arguments,O=A instanceof me,P=b[0],M=O||ae(A),B=s(function(de){var he=f.apply(m,yn([de],b));return l&&H?he[0]:he},"interceptor");M&&o&&typeof P=="function"&&P.length!=1&&(O=M=!1);var H=this.__chain__,X=!!this.__actions__.length,ee=_&&!H,pe=O&&!X;if(!_&&M){A=pe?A:new me(this);var te=e.apply(A,b);return te.__actions__.push({func:Hi,args:[B],thisArg:t}),new Mt(te,H)}return ee&&pe?e.apply(this,b):(te=this.thru(B),ee?l?te.value()[0]:te.value():te)})}),Lt(["pop","push","shift","sort","splice","unshift"],function(e){var r=_i[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);m.prototype[e]=function(){var f=arguments;if(l&&!this.__chain__){var _=this.value();return r.apply(ae(_)?_:[],f)}return this[o](function(A){return r.apply(ae(A)?A:[],f)})}}),jt(me.prototype,function(e,r){var o=m[r];if(o){var l=o.name+"";Se.call(tr,l)||(tr[l]=[]),tr[l].push({name:r,func:o})}}),tr[Ui(t,x).name]=[{name:"wrapper",func:t}],me.prototype.clone=gE,me.prototype.reverse=_E,me.prototype.value=yE,m.prototype.at=YS,m.prototype.chain=QS,m.prototype.commit=zS,m.prototype.next=XS,m.prototype.plant=jS,m.prototype.reverse=JS,m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=eA,m.prototype.first=m.prototype.head,wr&&(m.prototype[wr]=ZS),m},"runInContext"),Tn=zy();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Xe._=Tn,define(function(){return Tn})):Ln?((Ln.exports=Tn)._=Tn,Zs._=Tn):Xe._=Tn}).call(Er)});var rc=U((cL,mh)=>{"use strict";var ec=class ec{sortOrder;nullsOrder;isActivated;keyId;collation;opclass};s(ec,"AlterIndexColumnDto");var Zu=ec,tc=class tc{keyId};s(tc,"AlterIndexIncludeColumnDto");var ju=tc,nc=class nc{id;isActivated;index_method;ifNotExist;only;index_tablespace_name;indxName;columns;include;index_storage_parameter};s(nc,"AlterIndexDto");var Ju=nc;mh.exports={AlterIndexDto:Ju,AlterIndexColumnDto:Zu,AlterIndexIncludeColumnDto:ju}});var Rn=U((fL,hh)=>{"use strict";var{AlterIndexDto:pL}=rc(),pc=class pc{id;constraintName;indexStorageParameters;indexTablespace;indexInclude};s(pc,"AlterCollectionColumnKeyOptionDto");var ri=pc,fc=class fc{type;isActivated;primaryKey;unique;mode;length;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;primaryKeyOptions;triggerUpdateColumns;compMod;GUID};s(fc,"AlterCollectionColumnDto");var ic=fc,dc=class dc extends ri{compositePrimaryKey};s(dc,"AlterCollectionRoleCompModPKDto");var sc=dc,mc=class mc extends ri{compositeUniqueKey};s(mc,"AlterCollectionRoleCompModUniqueKeyDto");var ac=mc,hc=class hc{new;old};s(hc,"AlterCollectionRoleCompModPrimaryKey");var oc=hc,gc=class gc{new;old};s(gc,"AlterCollectionRoleCompModUniqueKey");var uc=gc,_c=class _c{id;type;collectionName;properties;definitions;isActivated;additionalProperties;memory_optimized;collectionUsers;ifNotExist;on_commit;table_tablespace_name;bucketId;compMod;name;roleType;patternProperties};s(_c,"AlterCollectionRoleDto");var cc=_c,yc=class yc{type;isActivated;unique;subtype;properties;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};s(yc,"AlterCollectionDto");var lc=yc;hh.exports={AlterCollectionDto:lc,AlterCollectionRoleDto:cc,AlterCollectionColumnDto:ic,AlterCollectionColumnKeyOptionDto:ri,AlterCollectionRoleCompModPrimaryKey:oc,AlterCollectionRoleCompModPKDto:sc,AlterCollectionRoleCompModUniqueKeyDto:ac,AlterCollectionRoleCompModUniqueKey:uc}});var _h=U((mL,gh)=>{"use strict";var DO=Object.freeze({ALL:"ALL",ANALYSE:"ANALYSE",ANALYZE:"ANALYZE",AND:"AND",ANY:"ANY",ARRAY:"ARRAY",ASC:"ASC",ASYMMETRIC:"ASYMMETRIC",AUTHORIZATION:"AUTHORIZATION",BINARY:"BINARY",BOTH:"BOTH",CASE:"CASE",CAST:"CAST",CHECK:"CHECK",COLLATE:"COLLATE",COLUMN:"COLUMN",CONCURRENTLY:"CONCURRENTLY",CONSTRAINT:"CONSTRAINT",CREATE:"CREATE",CROSS:"CROSS",CURRENT_CATALOG:"CURRENT_CATALOG",CURRENT_DATE:"CURRENT_DATE",CURRENT_ROLE:"CURRENT_ROLE",CURRENT_SCHEMA:"CURRENT_SCHEMA",CURRENT_TIME:"CURRENT_TIME",CURRENT_TIMESTAMP:"CURRENT_TIMESTAMP",CURRENT_USER:"CURRENT_USER",DEFAULT:"DEFAULT",DEFERRABLE:"DEFERRABLE",DESC:"DESC",DISTINCT:"DISTINCT",DO:"DO",ELSE:"ELSE",END:"END",EXCEPT:"EXCEPT",FALSE:"FALSE",FOR:"FOR",FOREIGN:"FOREIGN",FREEZE:"FREEZE",FROM:"FROM",FULL:"FULL",GRANT:"GRANT",GROUP:"GROUP",HAVING:"HAVING",ILIKE:"ILIKE",IN:"IN",INITIALLY:"INITIALLY",INTERSECT:"INTERSECT",INTO:"INTO",IS:"IS",ISNULL:"ISNULL",JOIN:"JOIN",LATERAL:"LATERAL",LEADING:"LEADING",LEFT:"LEFT",LIKE:"LIKE",LIMIT:"LIMIT",LOCALTIME:"LOCALTIME",LOCALTIMESTAMP:"LOCALTIMESTAMP",NATURAL:"NATURAL",NOT:"NOT",NULL:"NULL",OFFSET:"OFFSET",ON:"ON",ONLY:"ONLY",OR:"OR",ORDER:"ORDER",OUTER:"OUTER",OVERLAPS:"OVERLAPS",PLACING:"PLACING",PRIMARY:"PRIMARY",REFERENCES:"REFERENCES",RETURNING:"RETURNING",RIGHT:"RIGHT",SELECT:"SELECT",SESSION_USER:"SESSION_USER",SIMILAR:"SIMILAR",SOME:"SOME",SYMMETRIC:"SYMMETRIC",TABLE:"TABLE",TABLESAMPLE:"TABLESAMPLE",THEN:"THEN",TO:"TO",TRAILING:"TRAILING",TRUE:"TRUE",UNION:"UNION",UNIQUE:"UNIQUE",USER:"USER",USING:"USING",VARIADIC:"VARIADIC",VERBOSE:"VERBOSE",WHEN:"WHEN",WHERE:"WHERE",WINDOW:"WINDOW",WITH:"WITH"}),qO=Object.values(DO);gh.exports={ReservedWordsAsArray:qO}});var j=U((_L,bh)=>{"use strict";var He=Xu(),{AlterCollectionDto:hL,AlterCollectionRoleDto:gL}=Rn(),{ReservedWordsAsArray:LO}=_h(),PO=/\t|\n|'|\f|\r/gm,Eh=s(t=>He.get(t,"[0].code")||He.get(t,"[0].name",""),"getDbName"),Ec=s(t=>t&&(t.code||t.collectionName)||"","getEntityName"),Th=s(t=>t&&(t.code||t.name)||"","getViewName"),MO=s(t=>Object.assign({},He.get(t,"[0]",{}),{name:Eh(t)}),"getDbData"),FO=s(t=>He.get(t,"[0].viewOn"),"getViewOn"),UO=s((t,n="	")=>t.split(`
`).map(i=>n+i).join(`
`),"tab"),BO=s((t,n)=>Object.keys(t).map(He.toLower).includes(He.toLower(n)),"hasType"),$O=s(t=>({...t,...He.omit(t==null?void 0:t.role,"properties")||{}}),"getSchemaOfAlterCollection"),KO=s(t=>{var a;let n=Ec(t),i=(a=t.compMod)==null?void 0:a.keyspaceName;return Cs(n,i)},"getFullCollectionName"),kO=s(t=>Object.entries(t).filter(([n,i])=>!He.isNil(i)).reduce((n,[i,a])=>({...n,[i]:a}),{}),"clean"),GO=s(t=>t.every(n=>He.get(n,"isActivated",!0)),"checkAllKeysActivated"),WO=s(t=>t.length?t.every(n=>!He.get(n,"isActivated",!0)):!1,"checkAllKeysDeactivated"),Sh=s((t,n)=>{let i=t.filter(u=>He.get(u,"isActivated",!0)).map(n),a=t.filter(u=>!He.get(u,"isActivated",!0)).map(n);return{activatedItems:i,deactivatedItems:a}},"divideIntoActivatedAndDeactivated"),Ah=s((t,{isActivated:n,isPartOfLine:i,inlineComment:a="--"})=>t?n!==!1?t:i?"/* "+t+" */":t.includes(`
`)?`/*
`+t+` */
`:a+" "+t:"","commentIfDeactivated"),HO=s((t,n="'",i="'")=>{let a=t[0];return t[t.length-1]===n&&a===i?t:`${n}${t}${i}`},"wrap"),VO=s((t,n)=>n.some(i=>(t==null?void 0:t.oldField[i])!==(t==null?void 0:t.newField[i])),"checkFieldPropertiesChanged"),Ch=s(t=>{let n={...t,...He.omit(t==null?void 0:t.role,"properties")||{}},i=Ec(n),a=vh({collection:n});return Cs(i,a)},"getFullTableName"),vh=s(({collection:t})=>{var n;return(n=t.compMod)==null?void 0:n.keyspaceName},"getSchemaNameFromCollection"),YO=s((t,n)=>`${Ch(t)}.${Zt(n)}`,"getFullColumnName"),QO=s(t=>{var u;let n={...t,...He.omit(t==null?void 0:t.role,"properties")||{}},i=Th(n),a=(u=n.compMod)==null?void 0:u.keyspaceName;return Cs(i,a)},"getFullViewName"),zO=s(t=>t.code||t.name,"getUdtName"),XO=s((t="")=>{let n=t.match(/\d+/);return Number(He.get(n,[0],0))},"getDbVersion"),ZO=s((t="")=>t.replace(PO,n=>`\\${n}`),"prepareComment"),jO=s(t=>`E'${ZO(JSON.stringify(t)).slice(1,-1)}'`,"wrapComment"),JO=s(t=>He.map(t,n=>{let i=n.defaultExpression?`DEFAULT ${n.defaultExpression}`:"";return He.trim(`${n.argumentMode} ${n.argumentName||""} ${n.argumentType} ${i}`)}).join(", "),"getFunctionArguments"),Cs=s((t,n)=>n?`${Zt(n)}.${Zt(t)}`:Zt(t),"getNamePrefixedWithSchemaName"),Nh=s(({name:t})=>/\s|\W/.test(t)||He.includes(LO,He.toUpper(t)),"shouldNameBeEscaped"),Zt=s(t=>Nh({name:t})?`"${t}"`:t,"wrapInQuotes"),eR=s(({name:t})=>Nh({name:t})?`'${t}'`:t,"wrapInSingleQuotes"),tR=s(({name:t})=>Zt(t),"columnMapToString"),nR=s((t,n,i,a=tR)=>{var p;let u=Sh(t,a),c=(p=u==null?void 0:u.deactivatedItems)!=null&&p.length?Ah(u.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!n&&i?" ("+u.activatedItems.join(", ")+c+")":" ("+t.map(a).join(", ")+")"},"getColumnsList"),yh=s(t=>t?t.alias?`${Zt(t.name)} as ${Zt(t.alias)}`:Zt(t.name):"","getKeyWithAlias"),rR=s(t=>Array.isArray(t)?t.reduce((n,i)=>{if(!i.tableName)return n.columns.push(yh(i)),n;let a=`${Zt(i.dbName)}.${Zt(i.tableName)}`;return n.tables.includes(a)||n.tables.push(a),n.columns.push({statement:`${a}.${yh(i)}`,isActivated:i.isActivated}),n},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData"),iR=s(({newItems:t=[],oldItems:n=[]})=>{let i=t.filter(c=>!n.some(p=>p.id===c.id)),a=[],u=[];return n.forEach(c=>{let p=t.find(d=>d.id===c.id);p?He.isEqual(p,c)||u.push(p):a.push(c)}),{added:i,removed:a,modified:u}},"getGroupItemsByCompMode");bh.exports={getDbName:Eh,getDbData:MO,getEntityName:Ec,getViewName:Th,getViewOn:FO,tab:UO,hasType:BO,clean:kO,checkAllKeysActivated:GO,checkAllKeysDeactivated:WO,divideIntoActivatedAndDeactivated:Sh,commentIfDeactivated:Ah,wrap:HO,checkFieldPropertiesChanged:VO,getFullTableName:Ch,getFullColumnName:YO,getFullViewName:QO,getUdtName:zO,getDbVersion:XO,wrapComment:jO,getFunctionArguments:JO,getNamePrefixedWithSchemaName:Cs,wrapInQuotes:Zt,getColumnsList:nR,getViewData:rR,getSchemaOfAlterCollection:$O,getFullCollectionName:KO,getSchemaNameFromCollection:vh,getGroupItemsByCompMode:iR,wrapInSingleQuotes:eR}});var Rh=U((EL,Oh)=>{"use strict";var{AlterScriptDto:Ih}=$e(),wh=s(t=>{var n,i;return((i=(n=t==null?void 0:t.role)==null?void 0:n.compMod)==null?void 0:i.description)||{}},"extractDescription"),sR=s((t,n)=>i=>{let{wrapComment:a,wrapInQuotes:u}=j(),c=wh(i);if(c.new&&c.new!==c.old){let p=a(c.new),d=u(i.role.name),h=n.updateSchemaComment(d,p);return Ih.getInstance([h],!0,!1)}},"getUpsertCommentsScriptDto"),aR=s((t,n)=>i=>{let{wrapInQuotes:a}=j(),u=wh(i);if(u.old&&!u.new){let c=a(i.role.name),p=n.dropSchemaComment(c);return Ih.getInstance([p],!0,!0)}},"getDropCommentsScriptDto"),oR=s((t,n)=>i=>{let a=sR(t,n)(i),u=aR(t,n)(i);return[a,u].filter(Boolean)},"getModifySchemaCommentsScriptDtos");Oh.exports={getModifySchemaCommentsScriptDtos:oR}});var Dh=U((SL,xh)=>{"use strict";xh.exports={number:"numeric",string:"text",date:"date",timestamp:"timestamp",binary:"bytea",boolean:"boolean",document:"jsonb",array:"jsonb",objectId:"uuid",default:"char"}});var Lh=U((AL,qh)=>{"use strict";qh.exports={char:{size:1},varchar:{mode:"varying"},text:{mode:"text"},bit:{size:1,mode:"bit"},varbit:{size:1,mode:"varying"},tsvector:{mode:"text"},tsquery:{mode:"text"},smallint:{capacity:2},integer:{capacity:4},bigint:{capacity:8},numeric:{capacity:12,mode:"decimal"},real:{capacity:4,mode:"floating"},"double precision":{capacity:8,mode:"floating"},smallserial:{capacity:2},serial:{capacity:4},bigserial:{capacity:8},money:{capacity:8,mode:"decimal"},bytea:{size:4,mode:"binary"},date:{format:"YYYY-MM-DD"},time:{format:"hh:mm:ss.nnnnnn"},timestamp:{format:"YYYY-MM-DD hh:mm:ss"},interval:{format:"PnYnMnDTnHnMnS"},boolean:{mode:"boolean"},int4range:{mode:"range",modeType:"integer",capacity:4},int8range:{mode:"range",modeType:"integer",capacity:8},numrange:{mode:"range",modeType:"decimal",capacity:12},daterange:{mode:"range",modeType:"date",format:"YYYY-MM-DD"},tsrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},int4multirange:{mode:"multirange",modeType:"integer",capacity:4},int8multirange:{mode:"multirange",modeType:"integer",capacity:8},nummultirange:{mode:"multirange",modeType:"decimal",capacity:12},datemultirange:{mode:"multirange",modeType:"date",format:"YYYY-MM-DD"},tsmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},geometry:{format:"euclidian",mode:"geospatial"},geography:{format:"euclidian",mode:"geospatial"},box2d:{format:"euclidian",mode:"geospatial"},box3d:{format:"euclidian",mode:"geospatial"},geometry_dump:{format:"euclidian",mode:"geospatial"},point:{format:"euclidian",mode:"geospatial"},line:{format:"euclidian",mode:"geospatial"},lseg:{format:"euclidian",mode:"geospatial"},box:{format:"euclidian",mode:"geospatial"},path:{format:"euclidian",mode:"geospatial"},polygon:{format:"euclidian",mode:"geospatial"},circle:{format:"euclidian",mode:"geospatial"},inet:{mode:"ip"},cidr:{mode:"ip"},macaddr:{},macaddr8:{},uuid:{mode:"uuid"},oid:{mode:"uuid"},regclass:{},regcollation:{},regconfig:{},regdictionary:{},regnamespace:{},regoper:{},regoperator:{},regproc:{},regprocedure:{},regrole:{},regtype:{},xml:{mode:"xml"},json:{format:"semi-structured"},jsonb:{format:"semi-structured"},composite:{format:"semi-structured",mode:"object"},enum:{mode:"enum"},range_udt:{mode:"range"},domain:{mode:"domain"}}});var Mh=U((CL,Ph)=>{"use strict";Ph.exports={createDatabase:"CREATE DATABASE ${name}${template}${encoding}${locale}${collate}${characterClassification}${tablespace};\n",createSchema:"CREATE SCHEMA${ifNotExist} ${name};\nSET search_path TO ${name};\n\n${comment}\n",comment:"COMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${temporary} TABLE${ifNotExist} ${name} (\n${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n)${options};\n\n${comment}${columnDescriptions}",createTablePartitionOf:"CREATE${temporary} TABLE${ifNotExist} ${name}\n${partitionOf} ${openParenthesis}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n${closeParenthesis}${options};\n\n${comment}${columnDescriptions}",generatedColumnClause:" GENERATED ALWAYS AS (${generationExpression}) STORED",columnDefinition:"${name} ${type}${collation}${generatedColumnClause}${primaryKey}${uniqueKey}${defaultValue}${notNull}",checkConstraint:"${name} CHECK (${expression})${noInherit}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${match}${onDelete}${onUpdate}${deferrable}${deferrableConstraintCheckTime}",createKeyConstraint:"${constraintName}${keyType}${columns}${includeNonKey}${storageParameters}${tablespace}${deferrable}${deferrableConstraintCheckTime}",alterColumnType:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET DATA TYPE ${dataType};",addNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET NOT NULL;",dropNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} DROP NOT NULL;",renameColumn:"ALTER TABLE IF EXISTS ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",addCheckConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD CONSTRAINT ${constraintName} CHECK (${expression});",dropConstraint:"ALTER TABLE IF EXISTS ${tableName} DROP CONSTRAINT IF EXISTS ${constraintName};",createForeignKey:"ALTER TABLE IF EXISTS ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable}(${primaryKey})${match}${onDelete}${onUpdate}${deferrable}${deferrableConstraintCheckTime};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",addPkConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD ${constraintStatement};",dropTable:"DROP TABLE IF EXISTS ${tableName};",addColumn:"ALTER TABLE IF EXISTS ${tableName} ADD COLUMN IF NOT EXISTS ${columnDefinition};",dropColumn:"ALTER TABLE IF EXISTS ${tableName} DROP COLUMN IF EXISTS ${columnName};",dropDomain:"DROP DOMAIN IF EXISTS ${udtName};",dropType:"DROP TYPE IF EXISTS ${udtName};",alterTypeAddAttribute:"ALTER TYPE ${udtName} ADD ATTRIBUTE ${columnDefinition};",alterTypeDropAttribute:"ALTER TYPE ${udtName} DROP ATTRIBUTE IF EXISTS ${attributeName};",alterTypeRenameAttribute:"ALTER TYPE ${udtName} RENAME ATTRIBUTE ${oldAttributeName} TO ${newAttributeName};",alterTypeChangeAttributeType:"ALTER TYPE ${udtName} ALTER ATTRIBUTE ${attributeName} SET DATA TYPE ${newDataType};",updateCommentOnTable:"COMMENT ON TABLE ${tableName} IS ${comment};",updateCommentOnColumn:"COMMENT ON COLUMN ${columnName} IS ${comment};",updateCommentOnSchema:"COMMENT ON SCHEMA ${schemaName} IS ${comment};",updateCommentOnView:"COMMENT ON VIEW ${viewName} IS ${comment};",createSchemaOnly:"CREATE SCHEMA IF NOT EXISTS ${schemaName};",dropSchema:"DROP SCHEMA IF EXISTS ${schemaName};",index:"CREATE${unique} INDEX${concurrently}${ifNotExist} ${name}\n ON${only} ${tableName}${using}${keys}${nullsDistinct}${options};\n",dropIndex:"DROP INDEX IF EXISTS ${indexName};\n",alterIndexRename:"ALTER INDEX IF EXISTS ${oldIndexName} RENAME TO ${newIndexName};\n",alterIndexTablespace:"ALTER INDEX IF EXISTS ${indexName} SET TABLESPACE ${tablespaceName};\n",alterIndexStorageParams:`ALTER INDEX IF EXISTS \${indexName} SET (
	\${options}
);
`,reindexIndex:"REINDEX INDEX ${indexName};\n",createView:"CREATE${orReplace}${temporary} VIEW ${name}${withOptions}\nAS ${selectStatement}${checkOption};\n\n${comment}\n",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",dropView:"DROP VIEW IF EXISTS ${viewName};",createFunction:"CREATE${orReplace} FUNCTION ${name}\n	(${parameters})\n	RETURNS ${returnType}\n	LANGUAGE ${language}\n${properties}AS $BODY$\n${definition}\n$BODY$;\n",createProcedure:"CREATE${orReplace} PROCEDURE ${name} (${parameters})\n	LANGUAGE ${language}\nAS $BODY$\n${body}\n$BODY$;\n",createCompositeType:`CREATE TYPE \${name} AS (
	\${columnDefinitions}
);

\${comment}`,createEnumType:"CREATE TYPE ${name} AS ENUM (${values});\n\n${comment}",createRangeType:"CREATE TYPE ${name} AS RANGE (\n	SUBTYPE=${subtype}${options}\n);\n\n${comment}",createDomainType:"CREATE DOMAIN ${name} AS ${underlyingType}${notNull}${collate}${default}${constraints};\n\n${comment}",createTrigger:"CREATE${orReplace}${constraint} TRIGGER ${name} ${actionTiming} ${events}\n	ON ${tableName}\n${options}	EXECUTE ${functionKey} ${functionName};\n",createSequence:"CREATE${sequenceType} SEQUENCE${ifNotExists} ${name}${options};\n",dropSequence:"DROP SEQUENCE IF EXISTS ${name};\n",renameSequence:"ALTER SEQUENCE IF EXISTS ${name} RENAME TO ${newName};\n",setSequenceType:"ALTER SEQUENCE IF EXISTS ${name} SET ${sequenceType};\n",alterSequence:"ALTER SEQUENCE IF EXISTS ${name}${options};\n",updateColumnDefaultValue:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET DEFAULT ${defaultValue};",dropColumnDefaultValue:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} DROP DEFAULT;"}});var Bh=U((vL,Uh)=>{"use strict";var Fh=s((t="")=>new RegExp("\\$\\{(.*?)\\}",t),"template"),uR=s(t=>t.match(Fh("gi"))||[],"getAllTemplates"),cR=s(t=>(t.match(Fh("i"))||[])[1],"parseTemplate"),lR=s((t,n)=>uR(t).reduce((i,a)=>{let u=cR(a);return i.replace(a,()=>n[u]||n[u]===0?n[u]:"")},t),"assignTemplates");Uh.exports=lR});var Kh=U((bL,$h)=>{"use strict";$h.exports=({_:t,commentIfDeactivated:n,checkAllKeysDeactivated:i,assignTemplates:a,wrapInQuotes:u,getColumnsList:c})=>({generateConstraintsString:s((E,S)=>{var N,F;let C=n(((E==null?void 0:E.deactivatedItems)||[]).join(`,
	`),{isActivated:!S,isPartOfLine:!0}),x=(N=E==null?void 0:E.activatedItems)!=null&&N.length?`,
	`+E.activatedItems.join(`,
	`):"",I=(F=E==null?void 0:E.deactivatedItems)!=null&&F.length?`
	`+C:"";return x+I},"generateConstraintsString"),foreignKeysToString:s(E=>{if(Array.isArray(E)){let S=E.filter(I=>t.get(I,"isActivated",!0)).map(I=>u(t.trim(I.name))),C=E.filter(I=>!t.get(I,"isActivated",!0)).map(I=>u(t.trim(I.name))),x=C.length?n(C,{isActivated:!1,isPartOfLine:!0}):"";return S.join(", ")+x}return E},"foreignKeysToString"),foreignActiveKeysToString:s(E=>E.map(S=>t.trim(S.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:s((E,S)=>C=>{let x=u(t.trim(C.name)),I=i(C.columns||[]),N=t.isEmpty(C.columns)?"":c(C.columns,I,S),F=C.include.length?` INCLUDE${c(C.include,I,S)}`:"",q=C.storageParameters?` WITH (${C.storageParameters})`:"",$=C.tablespace?` USING INDEX TABLESPACE ${u(C.tablespace)}`:"",k=C!=null&&C.deferrable?` ${C.deferrable}`:"",V=(C==null?void 0:C.deferrable)==="DEFERRABLE"&&(C!=null&&C.deferrableConstraintCheckTime)?` ${C==null?void 0:C.deferrableConstraintCheckTime}`:"";return{statement:a(E.createKeyConstraint,{constraintName:C.name?`CONSTRAINT ${x} `:"",keyType:C.keyType,columns:N,includeNonKey:F,storageParameters:q,tablespace:$,deferrable:k,deferrableConstraintCheckTime:V}),isActivated:!I}},"createKeyConstraint"),getConstraintsWarnings:s((E=[])=>t.isEmpty(E)?"":`
	`+E.map(S=>{let C=S.name?` [constraint name: ${S.name}]`:"";return`-- ${S.errorMessage}${C}`}).join(`
	`),"getConstraintsWarnings"),additionalPropertiesForForeignKey:s(E=>{let S=t.get(E,"relationshipOnDelete",""),C=t.get(E,"relationshipOnUpdate",""),x=t.get(E,"relationshipMatch",""),I=t.get(E,"deferrable",""),N=t.get(E,"deferrableConstraintCheckTime","");return{foreignOnDelete:S,foreignOnUpdate:C,foreignMatch:x,deferrable:I,deferrableConstraintCheckTime:N}},"additionalPropertiesForForeignKey")})});var vs=U((wL,kh)=>{"use strict";kh.exports=(t,n)=>{let i=s((I,N)=>Object.entries(I.properties).map(N),"mapProperties"),a=s(I=>I.compositeUniqueKey?!1:!!I.unique,"isUniqueKey"),u=s(I=>{var N,F;return a(I)&&(((N=I.uniqueKeyOptions)==null?void 0:N.length)===1&&!((F=t.first(I.uniqueKeyOptions))!=null&&F.constraintName)||t.isEmpty(I.uniqueKeyOptions))},"isInlineUnique"),c=s(I=>I.compositeUniqueKey||I.compositePrimaryKey?!1:!!I.primaryKey,"isPrimaryKey"),p=s(I=>{var N;return c(I)&&!((N=t.first(I.primaryKeyOptions))!=null&&N.constraintName)},"isInlinePrimaryKey"),d=s((I,N)=>{let F=I.nullsDistinct;return`UNIQUE${N>=15&&F?` ${F}`:""}`},"getUniqueKeyType"),h=s(({options:I,columnName:N,isActivated:F,jsonSchema:q,dbVersion:$})=>n({keyType:d(I,$),name:I.constraintName,columns:[{name:N,isActivated:F}],include:E(I.indexInclude||[],q),storageParameters:I.indexStorageParameters,comment:I.indexComment,tablespace:I.indexTablespace,nullsDistinct:I.nullsDistinct,deferrable:I.deferrable,deferrableConstraintCheckTime:I.deferrableConstraintCheckTime}),"hydrateUniqueOptions"),g=s((I,N,F,q)=>n({keyType:"PRIMARY KEY",name:I.constraintName,columns:[{name:N,isActivated:F}],include:E(I.indexInclude||[],q),storageParameters:I.indexStorageParameters,comment:I.indexComment,tablespace:I.indexTablespace,deferrable:I.deferrable,deferrableConstraintCheckTime:I.deferrableConstraintCheckTime}),"hydratePrimaryKeyOptions"),T=s((I,N)=>Object.keys(N).find(F=>N[F].GUID===I),"findName"),y=s((I,N)=>t.get(Object.values(N).find(F=>F.GUID===I),"isActivated",!0),"checkIfActivated"),E=s((I,N)=>t.map(I,F=>({name:T(F.keyId,N.properties),isActivated:y(F.keyId,N.properties)})),"getKeys"),S=s(I=>Array.isArray(I.primaryKey)?I.primaryKey.map(N=>t.isEmpty(N.compositePrimaryKey)?{name:N.constraintName,errorMessage:"A primary key constraint cannot be created without any primary key selected"}:{...g(N,null,null,I),columns:E(N.compositePrimaryKey,I)}):[],"getCompositePrimaryKeys"),C=s((I,N)=>Array.isArray(I.uniqueKey)?I.uniqueKey.map(F=>t.isEmpty(F.compositeUniqueKey)?{name:F.constraintName,errorMessage:"A unique key constraint cannot be created without any unique key selected"}:{...h({options:F,columnName:null,isActivated:null,jsonSchema:I,dbVersion:N}),columns:E(F.compositeUniqueKey,I)}):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:s((I,N)=>{if(!I.properties)return[];let F=i(I,([$,k])=>{if(!(!c(k)||p(k)))return g(t.first(k.primaryKeyOptions),$,k.isActivated,I)}).filter(Boolean),q=t.flatten(i(I,([$,k])=>!a(k)||u(k)?[]:(k.uniqueKeyOptions||[]).map(V=>h({options:V,columnName:$,isActivated:k.isActivated,jsonSchema:I,dbVersion:N})))).filter(Boolean);return[...F,...S(I),...q,...C(I,N)]},"getTableKeyConstraints"),isInlineUnique:u,isInlinePrimaryKey:p,getKeys:E,hydratePrimaryKeyOptions:g,hydrateUniqueOptions:h,getUniqueKeyType:d}}});var Wh=U((RL,Gh)=>{"use strict";Gh.exports=({_:t,templates:n,assignTemplates:i,getFunctionArguments:a,getNamePrefixedWithSchemaName:u,wrapComment:c})=>{let p=s((q,$)=>t.map($,k=>{let V=k.functionOrReplace?" OR REPLACE":"",ie=i(n.createFunction,{name:u(k.name,q),orReplace:V,parameters:a(k.functionArguments),returnType:k.functionReturnsSetOf?`SETOF ${k.functionReturnType}`:k.functionReturnType,language:k.functionLanguage,properties:d(k),definition:k.functionBody}),K=k.functionDescription?i(n.comment,{object:"FUNCTION",objectName:u(k.name,q),comment:c(k.functionDescription)}):"";return[ie,K].filter(Boolean).join(`
`)}).join(`
`),"getFunctionsScript"),d=s(q=>{let $=s(k=>k?`	${k}
`:"","wrap");return[{key:"functionWindow",getValue:h},{key:"functionVolatility",getValue:g},{key:"functionLeakProof",getValue:T},{key:"functionNullArgs",getValue:y},{key:"functionSqlSecurity",getValue:E},{key:"functionParallel",getValue:S},{key:"functionExecutionCost",getValue:C},{key:"functionExecutionRows",getValue:x},{key:"functionSupportFunction",getValue:I},{key:"functionConfigurationParameters",getValue:N}].map(k=>$(k.getValue(q[k.key],q))).filter(Boolean).join("")},"getProperties"),h=s((q,$)=>$.language!=="c"||!q?"":"WINDOW","getWindow"),g=s(q=>q,"getVolatility"),T=s(q=>q?"LEAKPROOF":"NOT LEAKPROOF","getLeakProof"),y=s(q=>q,"getNullArgs"),E=s(q=>{if(q)return`SECURITY ${q}`},"getSqlSecurity"),S=s(q=>{if(q)return`PARALLEL ${q}`},"getParallel"),C=s(q=>{if(q)return`COST ${q}`},"getExecutionCost"),x=s((q,$)=>!q||!$.functionReturnsSetOf&&!F($)?"":`ROWS ${q}`,"getExecutionRows"),I=s(q=>{if(q)return`SUPPORT ${q}`},"getSupportFunction"),N=s(q=>{if(q)return`SET ${q}`},"getConfigurationParameters"),F=s(q=>(q.functionReturnType||"").trim().toUpperCase().startsWith("TABLE"),"isFunctionReturnsTable");return{getFunctionsScript:p}}});var Vh=U((DL,Hh)=>{"use strict";Hh.exports=({_:t,templates:n,assignTemplates:i,getFunctionArguments:a,getNamePrefixedWithSchemaName:u})=>({getProceduresScript:s((p,d)=>t.map(d,h=>{let g=h.orReplace?" OR REPLACE":"";return i(n.createProcedure,{name:u(h.name,p),orReplace:g,parameters:a(h.inputArgs),language:h.language,body:h.body})}).join(`
`),"getProceduresScript")})});var Qh=U((PL,Yh)=>{"use strict";var{Sequence:LL}=Ts();Yh.exports=({_:t,templates:n,assignTemplates:i,getNamePrefixedWithSchemaName:a,wrapInQuotes:u})=>{let c=s(({schemaName:q,sequences:$})=>t.map($,k=>p({schemaName:q,sequence:k})).join(`
`),"getSequencesScript"),p=s(({schemaName:q,sequence:$})=>{let k=$.temporary?"":q,V=a($.sequenceName,k),ie=S({sequence:$}),K=C({sequence:$}),Q=g({sequence:$,schemaName:q});return i(n.createSequence,{name:V,ifNotExists:ie,sequenceType:K,options:Q})},"createSequenceScript"),d=s(({schemaName:q,sequence:$,oldSequence:k})=>{let V=$.temporary?"":q,ie=k.sequenceName||$.sequenceName,K=a(ie,V),Q=F({sequence:$,oldSequence:k}),Ee=g({schemaName:q,sequence:Q}),se=x({sequence:Q}),Oe=Q.sequenceName;return[{key:"options",value:Ee,template:n.alterSequence},{key:"sequenceType",value:se,template:n.setSequenceType},{key:"newName",value:Oe,template:n.renameSequence}].filter(ft=>ft.value).map(ft=>i(ft.template,{[ft.key]:ft.value,name:K})).join(`
`)},"alterSequenceScript"),h=s(({schemaName:q,sequence:$})=>{let k=$.temporary?"":q,V=a($.sequenceName,k);return i(n.dropSequence,{name:V})},"dropSequenceScript"),g=s(({schemaName:q,sequence:$})=>{let V=[{getOption:T,key:"dataType",clause:"AS"},{getOption:T,key:"increment",clause:"INCREMENT BY"},{getOption:T,key:"start",clause:"START WITH"},{getOption:T,key:"restart",clause:"RESTART WITH"},{getOption:T,key:"minValue",clause:"MINVALUE"},{getOption:T,key:"maxValue",clause:"MAXVALUE"},{getOption:T,key:"cache",clause:"CACHE"},{getOption:I,key:"cycle"},{getOption:N,key:"ownedByColumn"}].map(ie=>{let K=ie.getOption({sequence:$,schemaName:q,config:ie});return y({option:K})}).filter(Boolean).join("");return V&&E({options:V})},"getSequenceOptions"),T=s(({sequence:q,config:$})=>{let k=q[$.key];return k||k===0?`${$.clause} ${k}`:""},"getOption"),y=s(({option:q})=>q?`	${q}
`:"","wrapOption"),E=s(({options:q})=>`
`+q.replace(/\n$/,""),"wrapOptionsBlock"),S=s(({sequence:q})=>q.ifNotExist?" IF NOT EXISTS":"","getIfNotExists"),C=s(({sequence:q})=>q.temporary?" TEMPORARY":q.unlogged?" UNLOGGED":"","getSequenceType"),x=s(({sequence:q})=>q.temporary?"":q.unlogged===!0?"UNLOGGED":q.unlogged===!1?"LOGGED":"","getAlterSequenceType"),I=s(({sequence:q})=>q.cycle===!0?"CYCLE":q.cycle===!1?"NO CYCLE":"","getCycle"),N=s(({sequence:q,schemaName:$})=>{var V,ie;if(q.ownedByNone)return"OWNED BY NONE";let k=(V=q.ownedByColumn)==null?void 0:V[0];if(k){let[K,Q]=((ie=k.name)==null?void 0:ie.split("."))||[];return`OWNED BY ${[$,K,Q].filter(Boolean).map(u).join(".")}`}return""},"getOwnedBy"),F=s(({sequence:q,oldSequence:$})=>{let k=t.omitBy(q,(V,ie)=>t.isEqual(V,$[ie]));return q.minValue>$.minValue?{...k,restart:q.start}:k},"getModifiedSequence");return{getSequencesScript:c,createSequenceScript:p,dropSequenceScript:h,alterSequenceScript:d}}});var Xh=U((FL,zh)=>{"use strict";zh.exports=({_:t,getColumnsList:n,checkAllKeysDeactivated:i})=>{let a=s((y,E)=>y?" TEMPORARY":E?" UNLOGGED":"","getTableTemporaryValue"),u=s(y=>{let E=s(C=>C?`${C}
`:"","wrap"),S=[{key:"inherits",getValue:h("INHERITS")},{key:"partitionBounds",getValue:h("")},{key:"partitioning",getValue:c},{key:"usingMethod",getValue:h("USING")},{key:"storage_parameter",getValue:T},{key:"on_commit",getValue:d},{key:"table_tablespace_name",getValue:h("TABLESPACE")},{key:"selectStatement",getValue:h("AS")}].map(C=>E(C.getValue(y[C.key],y))).filter(Boolean).join("");return t.trim(S)?` ${t.trim(S)}`:""},"getTableOptions"),c=s((y,{isActivated:E})=>{if(y&&y.partitionMethod){let S=y.partitionBy==="keys"?p(y,E):` (${y.partitioning_expression})`;return`PARTITION BY ${y.partitionMethod}${S}`}},"getPartitioning"),p=s((y,E)=>{let S=i(y.compositePartitionKey);return n(y.compositePartitionKey,S,E)},"getPartitionKeys"),d=s((y,E)=>{if(y&&E.temporary)return`ON COMMIT ${y}`},"getOnCommit"),h=s(y=>E=>{if(E)return`${y} ${E}`},"getBasicValue"),g=["toast_autovacuum_enabled","toast_vacuum_index_cleanup","toast_vacuum_truncate","toast_autovacuum_vacuum_threshold","toast_autovacuum_vacuum_scale_factor","toast_autovacuum_vacuum_insert_threshold","toast_autovacuum_vacuum_insert_scale_factor","toast_autovacuum_vacuum_cost_delay","toast_autovacuum_vacuum_cost_limit","toast_autovacuum_freeze_min_age","toast_autovacuum_freeze_max_age","toast_autovacuum_freeze_table_age","toast_autovacuum_multixact_freeze_min_age","toast_autovacuum_multixact_freeze_max_age","toast_autovacuum_multixact_freeze_table_age","toast_log_autovacuum_min_duration"],T=s(y=>{if(t.isEmpty(y))return"";let E=["autovacuum","toast","id"];return t.chain(y).toPairs().flatMap(([S,C])=>S==="autovacuum"||S==="toast"?t.toPairs(C):[[S,C]]).reject(([S])=>t.includes(E,S)).map(([S,C])=>{if(!(!C&&C!==0))return t.includes(g,S)?`toast.${S.slice(6)}=${C}`:`${S}=${C}`}).compact().join(`,
	`).trim().thru(S=>{if(S)return`WITH (
	${S}
)`}).value()},"getStorageParameters");return{getTableTemporaryValue:a,getTableOptions:u}}});var jh=U((BL,Zh)=>{"use strict";Zh.exports=({_:t,commentIfDeactivated:n,assignTemplates:i,templates:a,getNamePrefixedWithSchemaName:u,wrapComment:c})=>{let p=["composite","enum","range_udt","domain"],d=s((S,C)=>{let x=u(S.name,S.schemaName),I=i(a.comment,{object:"TYPE",objectName:x,comment:c(S.comment)});switch(S.type){case"composite":return i(a.createCompositeType,{name:x,columnDefinitions:t.join(C,`,
	`),comment:S.comment?I:""});case"enum":return i(a.createEnumType,{name:x,values:t.map(S.enum,N=>`'${N}'`).join(", "),comment:S.comment?I:""});case"range_udt":return i(a.createRangeType,{name:x,subtype:S.rangeSubtype,options:g(S),comment:S.comment?I:""});case"domain":{let N=i(a.comment,{object:"DOMAIN",objectName:x,comment:c(S.comment)});return i(a.createDomainType,{name:x,underlyingType:S.underlyingType,notNull:S.nullable?"":" NOT NULL",collate:S.collation?`
	COLLATE ${S.collation}`:"",default:S.default?`
	DEFAULT ${S.default}`:"",constraints:T(S),comment:S.comment?N:""})}default:return""}},"getPlainUdt"),h=s(S=>p.includes(S.type),"isNotPlainType"),g=s(S=>{let C=s(I=>I?`	${I}`:"","wrap"),x=[{key:"operatorClass",getValue:y("SUBTYPE_OPCLASS")},{key:"collation",getValue:y("COLLATION")},{key:"canonicalFunction",getValue:y("CANONICAL")},{key:"subtypeDiffFunction",getValue:y("SUBTYPE_DIFF")},{key:"multiRangeType",getValue:y("MULTIRANGE_TYPE_NAME")}].map(I=>C(I.getValue(S[I.key]))).filter(Boolean).join(`,
`);return t.trim(x)?`,
	`+t.trim(x):""},"getRangeOptions"),T=s(S=>t.map(S.checkConstraints,C=>C.name?`
	CONSTRAINT ${C.name} CHECK (${C.expression})`:`
	CHECK (${C.expression})`).join(""),"getDomainConstraints"),y=s(S=>C=>{if(C)return`${S}=${C}`},"getBasicValue");return{getUserDefinedType:s((S,C)=>n(d(S,C),{isActivated:S.isActivated}),"getUserDefinedType"),isNotPlainType:h}}});var eg=U((KL,Jh)=>{"use strict";Jh.exports=({_:t,wrapInQuotes:n,checkAllKeysDeactivated:i,getColumnsList:a})=>{let u=s(({name:T,sortOrder:y,nullsOrder:E,collation:S,opclass:C})=>{let x=y?` ${y}`:"",I=E?` ${E}`:"",N=t.includes(S,'"')?S:`"${S}"`,F=S?` COLLATE ${N}`:"",q=C?` ${C}`:"";return`${n(T)}${F}${q}${x}${I}`},"mapIndexKey"),c=s((T=[],y)=>{let E=i(T);return a(T,E,y,u)},"getIndexKeys"),p=s((T,y)=>{var F;let E=a(T.include||[],i(T.include||[]),y),S=(F=T.include)!=null&&F.length?` INCLUDE ${t.trim(E)}`:"",C=h(T),x=C?` WITH (
	${C})`:"",I=T.index_tablespace_name?` TABLESPACE ${T.index_tablespace_name}`:"",N=T.where?` WHERE ${T.where}`:"";return t.compact([" ",S,x,I,N]).join(`
`)},"getIndexOptions"),d={btree:{index_fillfactor:"fillfactor",deduplicate_items:"deduplicate_items"},hash:{index_fillfactor:"fillfactor"},spgist:{index_fillfactor:"fillfactor"},gist:{index_fillfactor:"fillfactor",index_buffering:"buffering"},gin:{fastupdate:"fastupdate",gin_pending_list_limit:"gin_pending_list_limit"},brin:{pages_per_range:"pages_per_range",autosummarize:"autosummarize"}},h=s(T=>{let y=d[T.index_method];return t.chain(y).toPairs().map(([E,S])=>{let C=(T.index_storage_parameter||{})[E];if(!(t.isNil(C)||C===""))return`${S}=${g(C)}`}).compact().join(`,
	`).value()},"getWithOptions"),g=s(T=>t.isBoolean(T)?T?"ON":"OFF":T,"getValue");return{getIndexKeys:c,getIndexOptions:p,getWithOptions:h}}});var ng=U((GL,tg)=>{"use strict";tg.exports=({_:t,assignTemplates:n,templates:i,commentIfDeactivated:a,wrapComment:u,wrapInQuotes:c})=>{let p=s((K,Q)=>`${K}(${Q})`,"addLength"),d=s((K,Q,Ee)=>t.isNumber(Ee)?`${K}(${Q},${Ee})`:`${K}(${Q})`,"addScalePrecision"),h=s((K,Q)=>t.isNumber(Q)?`${K}(${Q})`:K,"addPrecision"),g=s((K,Q)=>Q?`${K} ${Q}`:K,"addWithTimezone"),T=s(({type:K,typeModifier:Q,srid:Ee})=>{let se=Ee?`, ${Ee}`:"";return Q&&Q!==""?`${K}(${Q}${se})`:K},"addTypeModifier"),y=s((K,Q)=>{let Ee=(Q==null?void 0:Q.map(se=>`[${(se==null?void 0:se.array_size_limit)??""}]`).join("").trim())||"";return`${K}${Ee}`},"addArrayDecorator"),E=s(K=>["char","varchar","bit","varbit"].includes(K),"canHaveLength"),S=s(K=>K==="numeric","canHavePrecision"),C=s(K=>["time","timestamp"].includes(K),"canHaveTimePrecision"),x=s(K=>K==="numeric","canHaveScale"),I=s(K=>["geography","geometry"].includes(K),"canHaveTypeModifier"),N=s((K,Q)=>(E(K)&&t.isNumber(Q.length)?K=p(K,Q.length):S(K)&&x(K)&&t.isNumber(Q.precision)?K=d(K,Q.precision,Q.scale):S(K)&&t.isNumber(Q.precision)?K=h(K,Q.precision):I(K)?K=T({type:K,typeModifier:Q.typeModifier,srid:Q.srid}):C(K)&&(t.isNumber(Q.timePrecision)||Q.timezone)&&(K=g(h(K,Q.timePrecision),Q.timezone)),y(K,Q.array_type)),"decorateType"),F=s(K=>["char","varchar","text","bit","varbit"].includes(K),"isString"),q=s(K=>["date","time","timestamp","interval"].includes(K),"isDateTime"),$=s((K,Q,Ee)=>{let se=["current_timestamp","null"];return(F(K)||q(K))&&!se.includes(t.toLower(Q))&&!Ee?u(Q):Q},"decorateDefault"),k=s((K,Q)=>t.chain(Q).filter("comment").map(Ee=>{let se=n(i.comment,{object:"COLUMN",objectName:`${K}.${c(Ee.name)}`,comment:u(Ee.comment)});return a(se,Ee)}).join(`
`).value(),"getColumnComments"),V={"v13.x":{int4multirange:"int4range",int8multirange:"int8range",nummultirange:"numrange",datemultirange:"daterange",tsmultirange:"tsrange",tstzmultirange:"tstzrange"},"v12.x":{int4multirange:"int4range",int8multirange:"int8range",nummultirange:"numrange",datemultirange:"daterange",tsmultirange:"tsrange",tstzmultirange:"tstzrange"},"v11.x":{int4multirange:"int4range",int8multirange:"int8range",nummultirange:"numrange",datemultirange:"daterange",tsmultirange:"tsrange",tstzmultirange:"tstzrange"},"v10.x":{int4multirange:"int4range",int8multirange:"int8range",nummultirange:"numrange",datemultirange:"daterange",tsmultirange:"tsrange",tstzmultirange:"tstzrange"}};return{decorateType:N,decorateDefault:$,getColumnComments:k,replaceTypeByVersion:s((K,Q)=>{let Ee=V[Q];return t.get(Ee,K)||K},"replaceTypeByVersion")}}});var ig=U((HL,rg)=>{"use strict";rg.exports=({_:t,assignTemplates:n,templates:i,getNamePrefixedWithSchemaName:a,wrap:u,commentIfDeactivated:c})=>{let p=s(({dbVersion:y,triggers:E,tableName:S})=>t.map(E,d(y,S)).join(`
`).trim(),"getTriggersScript"),d=s((y,E)=>S=>{let C=h(S),x=g(S);return n(i.createTrigger,{orReplace:S.triggerOrReplace?" OR REPLACE":"",constraint:S.triggerConstraint?" CONSTRAINT":"",actionTiming:S.triggerType??"",functionKey:y==="v10.x"?"PROCEDURE":"FUNCTION",functionName:S.triggerFunction,name:S.name,tableName:E,events:C,options:x})},"getTriggerScript"),h=s(y=>{var E;return(E=y.triggerEvents)==null?void 0:E.map(S=>{if(S.triggerEvent!=="UPDATE"||t.isEmpty(y.triggerUpdateColumns))return S.triggerEvent;let C=t.chain(y.triggerUpdateColumns).filter("isActivated").map(({name:N})=>N).join(", ").thru(N=>N&&`OF ${N}`).value(),x=t.chain(y.triggerUpdateColumns).reject("isActivated").map(({name:N})=>N).join(", ").thru(N=>!C&&N?`OF ${N}`:N).value(),I=x&&c(x,{isActivated:!1,isPartOfLine:!0});return`UPDATE ${C} ${I}`}).join(" OR ")},"getTriggerEvents"),g=s(y=>{let E="";if(y.triggerConstraint&&(y.triggerReferencedTable&&(E+=u(`FROM ${y.triggerReferencedTable}`,"	",`
`)),E+=u(y.triggerDeferrable?"DEFERRABLE":"NOT DEFERRABLE","	",`
`),y.triggerDeferrable&&y.triggerTimeConstraintCheck&&(E+=u(y.triggerTimeConstraintCheck,"	",`
`))),y.triggerReferencing){let S="REFERENCING";y.triggerBeforeImageTransitionRelation&&(S+=` OLD TABLE ${y.triggerBeforeImageTransitionRelation}`),y.triggerAfterImageTransitionRelation&&(S+=` NEW TABLE ${y.triggerAfterImageTransitionRelation}`),E+=u(S,"	",`
`)}return E+=u(y.triggerConstraint||y.triggerType==="INSTEAD OF"?"FOR EACH ROW":y.triggerEachRowStatement||"FOR EACH STATEMENT","	",`
`),y.triggerCondition&&(E+=u(`WHEN ${y.triggerCondition}`,"	",`
`)),E},"getTriggerOptions");return{getTriggersScript:p,hydrateTriggers:s((y,E={})=>{var S;return(((S=t.find(y,"triggers"))==null?void 0:S.triggers)||[]).map(C=>{let x=E[C.triggerReferencedTable];if(!x)return{...C,triggerReferencedTable:""};let I=a(x.code||x.collectionName,x.bucketName);return{...C,triggerReferencedTable:I}})},"hydrateTriggers")}}});var ag=U((YL,sg)=>{"use strict";sg.exports=()=>({getLocaleProperties:s(n=>{let i=["v13.x","v14.x","v15.x"].includes(n.dbVersion);return i&&n.locale?{locale:n.locale}:!i&&n.locale?{collate:n.locale,characterClassification:n.locale}:{collate:n.collate,characterClassification:n.characterClassification}},"getLocaleProperties")})});var Ve=U((XL,ug)=>{"use strict";var pR=Dh(),og=Lh(),z=Mh(),{Sequence:zL}=Ts();ug.exports=(t,n,i)=>{let a=i.require("lodash"),{tab:u,commentIfDeactivated:c,checkAllKeysDeactivated:p,divideIntoActivatedAndDeactivated:d,hasType:h,wrap:g,clean:T,wrapComment:y,getFunctionArguments:E,wrapInQuotes:S,getNamePrefixedWithSchemaName:C,getColumnsList:x,getViewData:I}=j(),N=Bh(),{generateConstraintsString:F,foreignKeysToString:q,foreignActiveKeysToString:$,createKeyConstraint:k,getConstraintsWarnings:V,additionalPropertiesForForeignKey:ie}=Kh()({_:a,commentIfDeactivated:c,checkAllKeysDeactivated:p,assignTemplates:N,getColumnsList:x,wrapInQuotes:S}),K=vs()(a,T),{getFunctionsScript:Q}=Wh()({_:a,templates:z,assignTemplates:N,getFunctionArguments:E,getNamePrefixedWithSchemaName:C,wrapComment:y}),{getProceduresScript:Ee}=Vh()({_:a,templates:z,assignTemplates:N,getFunctionArguments:E,getNamePrefixedWithSchemaName:C}),{getSequencesScript:se,createSequenceScript:Oe,dropSequenceScript:Gt,alterSequenceScript:ft}=Qh()({_:a,templates:z,assignTemplates:N,getNamePrefixedWithSchemaName:C,wrapInQuotes:S}),{getTableTemporaryValue:Z,getTableOptions:Ye}=Xh()({_:a,checkAllKeysDeactivated:p,getColumnsList:x}),{getUserDefinedType:Nr,isNotPlainType:Yn}=jh()({_:a,commentIfDeactivated:c,assignTemplates:N,templates:z,getNamePrefixedWithSchemaName:C,wrapComment:y}),{getIndexKeys:Dt,getIndexOptions:Ls,getWithOptions:Ps}=eg()({_:a,wrapInQuotes:S,checkAllKeysDeactivated:p,getColumnsList:x}),{decorateType:Ms,decorateDefault:dn,getColumnComments:Qn,replaceTypeByVersion:Fs}=ng()({_:a,wrap:g,assignTemplates:N,templates:z,commentIfDeactivated:c,wrapInQuotes:S,wrapComment:y}),{getTriggersScript:mn,hydrateTriggers:hn}=ig()({_:a,wrap:g,assignTemplates:N,templates:z,getNamePrefixedWithSchemaName:C,commentIfDeactivated:c}),{getLocaleProperties:Us}=ag()();return{createDatabase(v){if(!v.databaseName)return"";let{locale:R,collate:G,characterClassification:W}=Us(v);return N(z.createDatabase,{name:S(v.databaseName),template:v.template?`
	TEMPLATE ${v.template}`:"",encoding:v.encoding?`
	ENCODING ${v.encoding}`:"",locale:R?`
	LOCALE '${v.locale}'`:"",collate:G?`
	LC_COLLATE '${v.collate}'`:"",characterClassification:W?`
	LC_CTYPE '${W}'`:"",tablespace:v.tablespace?`
	TABLESPACE '${v.tablespace}'`:""})},createSchema({schemaName:v,ifNotExist:R,comments:G,udfs:W,procedures:ue,sequences:be}){let ge=N(z.comment,{object:"SCHEMA",objectName:S(v),comment:y(G)}),Re=N(z.createSchema,{name:S(v),ifNotExist:R?" IF NOT EXISTS":"",comment:G?ge:""}),Ke=Q(v,W),Pe=Ee(v,ue);return a.chain([Re,Ke,Pe]).compact().map(a.trim).join(`

`).trim().value()},createTable({name:v,columns:R,checkConstraints:G,foreignKeyConstraints:W,schemaData:ue,columnDefinitions:be,keyConstraints:ge,inherits:Re,description:Ke,ifNotExist:Pe,usingMethod:Ie,on_commit:ke,partitioning:Ce,storage_parameter:Ct,table_tablespace_name:Je,temporary:ot,unlogged:et,selectStatement:nt,triggers:dt,partitionOf:Ge,partitionBounds:vt},Nt){let gn=Pe?" IF NOT EXISTS":"",Wt=C(v,ue.schemaName),rt=N(z.comment,{object:"TABLE",objectName:Wt,comment:y(Ke)}),xn=d(ge.filter(({errorMessage:Ht})=>!Ht).map(k(z,Nt)),Ht=>Ht.statement),Dn=V(ge.filter(({errorMessage:Ht})=>Ht)),qn=`${F(xn,Nt)}${Dn}`,ai=Ge?qn==null?void 0:qn.slice(1):qn,Bs=d(W,Ht=>Ht.statement),br=F(Bs,Nt),oi=`
`+Qn(Wt,be),$s=Ge?z.createTablePartitionOf:z.createTable,Ks=Ge&&!qn?`
	`:`,
	`,ui=a.isEmpty(G)?"":g(a.join(G,`,
	`),Ks,""),ci=Ge&&!ai&&!ui&&!br,li=ci?"":"(",ks=ci?"":")",Gs=N($s,{temporary:Z(ot,et),ifNotExist:gn,name:Wt,columnDefinitions:Ge?"":"	"+a.join(R,`,
	`),keyConstraints:ai,checkConstraints:ui,foreignKeyConstraints:br,options:Ye({inherits:Re,partitioning:Ce,usingMethod:Ie,on_commit:ke,storage_parameter:Ct,table_tablespace_name:Je,selectStatement:nt,partitionBounds:vt}),comment:Ke?rt:"",partitionOf:Ge?` PARTITION OF ${Ge} `:"",columnDescriptions:oi,openParenthesis:li,closeParenthesis:ks}),Ws=mn({dbVersion:ue.dbVersion,tableName:Wt,triggers:dt});return c([Gs,Ws].map(a.trim).join(`

`).trim()+`
`,{isActivated:Nt})},convertColumnDefinition(v){let R=Fs(v.type,v.dbVersion),G=v.nullable?"":" NOT NULL",W=v.primaryKey?" "+k(z,!0)(v.primaryKeyOptions).statement:"",ue=v.unique?" "+k(z,!0)(v.uniqueKeyOptions).statement:"",be=v.collationRule?` COLLATE "${v.collationRule}"`:"",ge=Array.isArray(v.array_type)&&v.array_type.length>0,Re=a.isUndefined(v.default)?"":" DEFAULT "+dn(R,v.default,ge),Ke=v.dbVersion>=12&&v.generatedColumn&&v.columnGenerationExpression?N(z.generatedColumnClause,{generationExpression:v.columnGenerationExpression}):"";return c(N(z.columnDefinition,{name:S(v.name),type:Ms(R,v),generatedColumnClause:Ke,notNull:G,primaryKey:W,uniqueKey:ue,collation:be,defaultValue:Re}),{isActivated:v.isActivated})},createIndex(v,R,G,W=!0){let ue=R.unique&&R.index_method==="btree",be=S(R.indxName),ge=ue?" UNIQUE":"",Re=R.concurrently?" CONCURRENTLY":"",Ke=R.ifNotExist?" IF NOT EXISTS":"",Pe=R.only?" ONLY":"",Ie=R.index_method?` USING ${a.toUpper(R.index_method)}`:"",{getDbVersion:ke}=j(),Ce=ke(a.get(G,"dbVersion","")),Ct=ue&&R.nullsDistinct&&Ce>=15?`
 ${R.nullsDistinct}`:"",Je=Dt(R.index_method==="btree"?R.columns:a.map(R.columns,et=>a.omit(et,"sortOrder","nullsOrder")),W),ot=Ls(R,W);return c(N(z.index,{unique:ge,concurrently:Re,ifNotExist:Ke,name:be,only:Pe,using:Ie,keys:Je,options:ot,nullsDistinct:Ct,tableName:C(v,R.schemaName)}),{isActivated:R.isActivated})},createCheckConstraint(v){return N(z.checkConstraint,{name:v.name?`CONSTRAINT ${S(v.name)}`:"",expression:a.trim(v.expression).replace(/^\(([\s\S]*)\)$/,"$1"),noInherit:v.noInherit?" NO INHERIT":""})},createForeignKeyConstraint({name:v,foreignKey:R,primaryTable:G,primaryKey:W,primaryTableActivated:ue,foreignTableActivated:be,foreignSchemaName:ge,primarySchemaName:Re,customProperties:Ke,isActivated:Pe},Ie,ke){let Ce=p(W),Ct=p(R),Je=!Ce&&!Ct&&ue&&be,{foreignOnDelete:ot,foreignOnUpdate:et,foreignMatch:nt,deferrable:dt,deferrableConstraintCheckTime:Ge}=ie(Ke),vt=N(z.createForeignKeyConstraint,{primaryTable:C(G,Re||ke.schemaName),name:v?`CONSTRAINT ${S(v)}`:"",foreignKey:Je?q(R):$(R),primaryKey:Je?q(W):$(W),onDelete:ot?` ON DELETE ${ot}`:"",onUpdate:et?` ON UPDATE ${et}`:"",match:nt?` MATCH ${nt}`:"",deferrable:dt?` ${dt}`:"",deferrableConstraintCheckTime:dt==="DEFERRABLE"&&Ge?` ${Ge}`:""});return{statement:a.trim(vt),isActivated:Je&&Pe}},createForeignKey({name:v,foreignTable:R,foreignKey:G,primaryTable:W,primaryKey:ue,primaryTableActivated:be,foreignTableActivated:ge,foreignSchemaName:Re,primarySchemaName:Ke,customProperties:Pe,isActivated:Ie},ke,Ce){let Ct=p(ue),Je=p(G),ot=!Ct&&!Je&&be&&ge,{foreignOnDelete:et,foreignOnUpdate:nt,foreignMatch:dt,deferrable:Ge,deferrableConstraintCheckTime:vt}=ie(Pe),Nt=N(z.createForeignKey,{primaryTable:C(W,Ke||Ce.schemaName),foreignTable:C(R,Re||Ce.schemaName),name:v?S(v):"",foreignKey:ot?q(G):$(G),primaryKey:ot?q(ue):$(ue),onDelete:et?` ON DELETE ${et}`:"",onUpdate:nt?` ON UPDATE ${nt}`:"",match:dt?` MATCH ${dt}`:"",deferrable:Ge?` ${Ge}`:"",deferrableConstraintCheckTime:Ge==="DEFERRABLE"&&vt?` ${vt}`:""});return{statement:a.trim(Nt),isActivated:ot&&Ie}},createView(v,R,G){var vt,Nt,gn,Wt;let W=C(v.name,v.schemaName),ue=N(z.comment,{object:"VIEW",objectName:W,comment:y(v.comment)}),ge=p(v.keys||[])||!G,{columns:Re,tables:Ke}=I(v.keys),Pe=Re.map(rt=>rt.statement).join(`,
		`);if(!ge){let rt=d(Re,Dn=>Dn.statement),xn=rt.deactivatedItems.length?c(rt.deactivatedItems.join(`,
		`),{isActivated:!1,isPartOfLine:!0}):"";Pe=rt.activatedItems.join(`,
		`)+xn}let Ie=a.trim(v.selectStatement)?a.trim(u(v.selectStatement)):N(z.viewSelectStatement,{tableName:Ke.join(", "),keys:Pe}),ke=(vt=v.viewOptions)!=null&&vt.check_option?`check_option=${(Nt=v.viewOptions)==null?void 0:Nt.check_option}`:"",Ce=(gn=v.viewOptions)!=null&&gn.security_barrier?"security_barrier":"",Ct=15,{getDbVersion:Je}=j(),ot=(Wt=v.viewOptions)!=null&&Wt.security_invoker&&Je(R.dbVersion)>=Ct?"security_invoker":"",et=ke||Ce||ot?`
	WITH (${a.compact([ke,Ce,ot]).join(",")})`:"",nt=s(rt=>rt.withCheckOption&&rt.checkTestingScope?`
	WITH ${rt.checkTestingScope} CHECK OPTION`:rt.withCheckOption?`
	WITH CHECK OPTION`:"","getCheckOption"),dt=c(N(z.createView,{name:W,orReplace:v.orReplace?" OR REPLACE":"",temporary:v.temporary?" TEMPORARY":"",checkOption:nt(v),comment:v.comment?ue:"",withOptions:et,selectStatement:Ie}),{isActivated:!ge}),Ge=mn({dbVersion:v.dbVersion,tableName:W,triggers:v.triggers});return[dt,Ge].map(a.trim).join(`

`).trim()+`
`},dropView(v){let R={viewName:v};return N(z.dropView,R)},createViewIndex(){return""},createUdt(v){let R=a.map(v.properties,this.convertColumnDefinition);return Nr(v,R)},getDefaultType(v){return pR[v]},getTypesDescriptors(){return og},hasType(v){return h(og,v)},hydrateDatabase({modelData:v}){return v=a.get(v,"0",{}),{databaseName:v.database_name,tablespace:v.tablespace_name,encoding:v.encoding,template:v.template,collate:v.LC_COLLATE,characterClassification:v.LC_CTYPE,dbVersion:v.dbVersion,locale:v.locale}},hydrateColumn({columnDefinition:v,jsonSchema:R,schemaData:G,definitionJsonSchema:W={},parentJsonSchema:ue}){let be=a.includes(["char","varchar","text"],v.type)?R.collationRule:"",ge=["time","timestamp"],Re=a.includes(ge,v.type)?R.timePrecision:"",Ke=a.includes(ge,v.type)?R.timezone:"",Pe=v.type==="interval"?R.intervalOptions:"",{getDbVersion:Ie}=j(),ke=Ie(G.dbVersion),Ce=a.omit(K.hydratePrimaryKeyOptions(a.first(R.primaryKeyOptions)||{},v.name,v.isActivated,ue),"columns"),Ct=a.omit(K.hydrateUniqueOptions({options:a.first(R.uniqueKeyOptions)||{},columnName:v.name,isActivated:v.isActivated,jsonSchema:ue,dbVersion:ke}),"columns");return{name:v.name,type:v.type,primaryKey:K.isInlinePrimaryKey(R),primaryKeyOptions:Ce,unique:K.isInlineUnique(R),uniqueKeyOptions:Ct,nullable:v.nullable,default:v.default,comment:R.refDescription||R.description||W.description,isActivated:v.isActivated,scale:v.scale,precision:v.precision,length:v.length,enum:R.enum,array_type:R.array_type,unit:R.unit,rangeSubtype:R.rangeSubtype,operatorClass:R.operatorClass,collation:R.collation,canonicalFunction:R.canonicalFunction,subtypeDiffFunction:R.subtypeDiffFunction,multiRangeType:R.multiRangeType,schemaName:G.schemaName,underlyingType:R.underlyingType,checkConstraints:R.checkConstraints,typeModifier:R.typeModifier,srid:R.srid,collationRule:be,timePrecision:Re,timezone:Ke,intervalOptions:Pe,dbVersion:ke,generatedColumn:!!R.generatedColumn,columnGenerationExpression:R.columnGenerationExpression}},hydrateJsonSchemaColumn(v,R){return!v.$ref||a.isEmpty(R)||Yn(R)?v:(v=a.omit(v,"$ref"),{...R,...v})},hydrateIndex(v,R,G){return{...v,schemaName:G.schemaName}},hydrateViewIndex(v){return{}},hydrateCheckConstraint(v){return{name:v.chkConstrName,expression:v.constrExpression,noInherit:v.noInherit}},hydrateSchema(v,R){let G=a.get(R,"modelData.0.dbVersion");return{schemaName:v.name,ifNotExist:v.ifNotExist,comments:v.description,udfs:(R==null?void 0:R.udfs)||[],procedures:(R==null?void 0:R.procedures)||[],sequences:(R==null?void 0:R.sequences)||[],dbVersion:G}},hydrateTable({tableData:v,entityData:R,jsonSchema:G}){let W=R[0],ue=a.chain(W.inherits).map(({parentTable:Ce})=>a.get(v,`relatedSchemas[${Ce}]`,"")).compact().map(Ce=>Ce.code||Ce.collectionName).join(", ").thru(Ce=>Ce?`(${Ce})`:"").value(),be=a.first(W.partitioning)||{},ge=K.getKeys(be.compositePartitionKey,G),Re=a.get(v,`relatedSchemas[${W.partitionOf}]`),Ke=Re?C(Re.collectionName,Re.bucketName):"",Pe=hn(R,v.relatedSchemas),{getDbVersion:Ie}=j(),ke=Ie(a.get(v,"dbData.dbVersion",""));return{...v,triggers:Pe,partitionOf:Ke,keyConstraints:K.getTableKeyConstraints(G,ke),inherits:ue,selectStatement:a.trim(W.selectStatement),partitioning:a.assign({},be,{compositePartitionKey:ge}),...a.pick(W,"temporary","unlogged","description","ifNotExist","usingMethod","on_commit","storage_parameter","table_tablespace_name","partitionBounds")}},hydrateViewColumn(v){return{name:v.name,tableName:v.entityName,alias:v.alias,isActivated:v.isActivated,dbName:v.dbName}},hydrateView({viewData:v,entityData:R,relatedSchemas:G}){let W=R[0],ue=hn(R,G);return{name:v.name,keys:v.keys,comment:W.description,orReplace:W.orReplace,temporary:W.temporary,recursive:W.recursive,viewOptions:W.viewOptions,selectStatement:W.selectStatement,withCheckOption:W.withCheckOption,checkTestingScope:W.withCheckOption?W.checkTestingScope:"",schemaName:v.schemaData.schemaName,triggers:ue}},commentIfDeactivated(v,R,G){return v},alterColumnType(v,R,G,W){let ue=G;return W.length?ue+=`(${W.length})`:W.precision&&W.scale?ue+=`(${W.precision},${W.scale})`:W.precision&&(ue+=`(${W.precision})`),N(z.alterColumnType,{tableName:v,columnName:R,dataType:ue})},setNotNullConstraint(v,R){return N(z.addNotNullConstraint,{tableName:v,columnName:R})},dropNotNullConstraint(v,R){return N(z.dropNotNullConstraint,{tableName:v,columnName:R})},renameColumn(v,R,G){return N(z.renameColumn,{tableName:v,oldColumnName:R,newColumnName:G})},addCheckConstraint(v,R,G){let W={tableName:v,constraintName:R,expression:G};return N(z.addCheckConstraint,W)},dropConstraint(v,R){let G={tableName:v,constraintName:R};return N(z.dropConstraint,G)},updateTableComment(v,R){let G={tableName:v,comment:R};return N(z.updateCommentOnTable,G)},dropTableComment(v){let R={tableName:v,comment:"NULL"};return N(z.updateCommentOnTable,R)},updateColumnComment(v,R){let G={columnName:v,comment:R};return N(z.updateCommentOnColumn,G)},dropColumnComment(v){let R={columnName:v,comment:"NULL"};return N(z.updateCommentOnColumn,R)},updateSchemaComment(v,R){let G={schemaName:v,comment:R};return N(z.updateCommentOnSchema,G)},dropSchemaComment(v){let R={schemaName:v,comment:"NULL"};return N(z.updateCommentOnSchema,R)},updateViewComment(v,R){let G={viewName:v,comment:R};return N(z.updateCommentOnView,G)},dropViewComment(v){let R={viewName:v,comment:"NULL"};return N(z.updateCommentOnView,R)},createSchemaOnly(v){let R={schemaName:v};return N(z.createSchemaOnly,R)},dropSchema(v){let R={schemaName:v};return N(z.dropSchema,R)},dropTable(v){let R={tableName:v};return N(z.dropTable,R)},addColumn(v,R){let G={tableName:v,columnDefinition:R};return N(z.addColumn,G)},dropColumn(v,R){let G={tableName:v,columnName:R};return N(z.dropColumn,G)},dropDomain(v){let R={udtName:v};return N(z.dropDomain,R)},dropType(v){let R={udtName:v};return N(z.dropType,R)},alterTypeAddAttribute(v,R){let G={udtName:v,columnDefinition:R};return N(z.alterTypeAddAttribute,G)},alterTypeDropAttribute(v,R){let G={udtName:v,attributeName:R};return N(z.alterTypeDropAttribute,G)},alterTypeRenameAttribute(v,R,G){let W={udtName:v,oldAttributeName:R,newAttributeName:G};return N(z.alterTypeRenameAttribute,W)},alterTypeChangeAttributeType(v,R,G){let W={udtName:v,attributeName:R,newDataType:G};return N(z.alterTypeChangeAttributeType,W)},dropForeignKey(v,R){let G={tableName:v,fkConstraintName:R};return N(z.dropForeignKey,G)},createKeyConstraint(v,R,G){let W=k(z,R)(G);return{statement:N(z.addPkConstraint,{constraintStatement:(W.statement||"").trim(),tableName:v}),isActivated:W.isActivated}},dropKeyConstraint(v,R){let G={tableName:v,constraintName:R};return N(z.dropConstraint,G)},createSchemaSequences({schemaName:v,sequences:R}){return se({schemaName:v,sequences:R})},createSchemaSequence({schemaName:v,sequence:R}){return Oe({schemaName:v,sequence:R})},dropSchemaSequence({schemaName:v,sequence:R}){return Gt({schemaName:v,sequence:R})},alterSchemaSequence({schemaName:v,sequence:R,oldSequence:G}){return ft({schemaName:v,sequence:R,oldSequence:G})},dropIndex({indexName:v}){let R={indexName:v};return N(z.dropIndex,R)},alterIndexRename({schemaName:v,oldIndexName:R,newIndexName:G}){let W=S(v),ue=C(S(R),W),be=S(G),ge={oldIndexName:ue,newIndexName:be};return N(z.alterIndexRename,ge)},alterIndexTablespace({schemaName:v,indexName:R,tablespaceName:G}){let W=S(v),be={indexName:C(S(R),W),tablespaceName:G};return N(z.alterIndexTablespace,be)},alterIndexStorageParams({schemaName:v,indexName:R,index:G}){let W=S(v),ue=C(S(R),W),be=Ps(G),ge={indexName:ue,options:be};return N(z.alterIndexStorageParams,ge)},reindexIndex({schemaName:v,indexName:R}){let G=S(v),ue={indexName:C(S(R),G)};return N(z.reindexIndex,ue)},updateColumnDefaultValue({tableName:v,columnName:R,defaultValue:G}){let W={tableName:v,columnName:R,defaultValue:G};return N(z.updateColumnDefaultValue,W)},dropColumnDefaultValue({tableName:v,columnName:R}){let G={tableName:v,columnName:R};return N(z.dropColumnDefaultValue,G)}}}});var pg=U((jL,lg)=>{"use strict";var{getModifySchemaCommentsScriptDtos:fR}=Rh(),{AlterScriptDto:cg}=$e(),dR=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{wrapInQuotes:u}=j(),c=a.createSchemaOnly(u(n));return cg.getInstance([c],!0,!1)},"getAddContainerScriptDto"),mR=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{wrapInQuotes:u}=j(),c=a.dropSchema(u(n));return cg.getInstance([c],!0,!0)},"getDeleteContainerScriptDto"),hR=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t);return[...fR(i,a)(n)]},"getModifyContainerScriptDtos");lg.exports={getAddContainerScriptDto:dR,getDeleteContainerScriptDto:mR,getModifyContainerScriptDtos:hR}});var dg=U((tP,fg)=>{"use strict";var{AlterCollectionDto:eP}=Rn(),{AlterScriptDto:Ns}=$e(),gR=s(t=>n=>{var p;let i=(p=n==null?void 0:n.compMod)==null?void 0:p.chkConstr;if(!i)return[];let a=i.new||[],u=i.old||[];return t.chain([...a,...u]).map(d=>d.chkConstrName).uniq().value().map(d=>({old:t.find(u,{chkConstrName:d}),new:t.find(a,{chkConstrName:d})}))},"mapCheckConstraintNamesToChangeHistory"),_R=s((t,n)=>(i,a)=>{let{wrapInQuotes:u}=j();return i.filter(c=>c.old&&!c.new).map(c=>{let p=u(c.old.chkConstrName);return n.dropConstraint(a,p)}).map(c=>Ns.getInstance([c],!0,!0))},"getDropCheckConstraintScriptDtos"),yR=s((t,n)=>(i,a)=>{let{wrapInQuotes:u}=j();return i.filter(c=>c.new&&!c.old).map(c=>{let{chkConstrName:p,constrExpression:d}=c.new;return n.addCheckConstraint(a,u(p),d)}).map(c=>Ns.getInstance([c],!0,!1))},"getAddCheckConstraintScriptDtos"),ER=s((t,n)=>(i,a)=>{let{wrapInQuotes:u}=j();return i.filter(c=>{if(c.old&&c.new){let p=c.old.constrExpression,d=c.new.constrExpression;return p!==d}return!1}).map(c=>{let{chkConstrName:p}=c.old,d=n.dropConstraint(a,u(p)),{chkConstrName:h,constrExpression:g}=c.new,T=n.addCheckConstraint(a,u(h),g);return[Ns.getInstance([d],!0,!0),Ns.getInstance([T],!0,!1)]}).flat()},"getUpdateCheckConstraintScriptDtos"),TR=s((t,n)=>i=>{let{getFullTableName:a}=j(),u=a(i),c=gR(t)(i),p=yR(t,n)(c,u),d=_R(t,n)(c,u),h=ER(t,n)(c,u);return[...p,...d,...h]},"getModifyCheckConstraintScriptDtos");fg.exports={getModifyCheckConstraintScriptDtos:TR}});var gg=U((iP,hg)=>{"use strict";var{AlterScriptDto:mg}=$e(),{AlterCollectionDto:rP}=Rn(),SR=s((t,n)=>i=>{var y;let{getFullTableName:a,wrapComment:u}=j(),c=(y=i==null?void 0:i.role.compMod)==null?void 0:y.description;if(!c)return;let{old:p,new:d}=c;if(!d||d===p)return;let h=a(i),g=u(d),T=n.updateTableComment(h,g);return mg.getInstance([T],!0,!1)},"getUpdatedCommentOnCollectionScriptDto"),AR=s((t,n)=>i=>{var g;let{getFullTableName:a}=j(),u=(g=i==null?void 0:i.role.compMod)==null?void 0:g.description;if(!u)return;let{old:c,new:p}=u;if(!c||p)return;let d=a(i),h=n.dropTableComment(d);return mg.getInstance([h],!0,!0)},"getDeletedCommentOnCollectionScriptDto"),CR=s((t,n)=>i=>{let a=SR(t,n)(i),u=AR(t,n)(i);return[a,u].filter(Boolean)},"getModifyEntityCommentsScriptDtos");hg.exports={getModifyEntityCommentsScriptDtos:CR}});var yg=U((aP,_g)=>{"use strict";var{AlterScriptDto:vR}=$e(),NR=s((t,n,i)=>{let a=t.role.properties[n],u=a==null?void 0:a.length,c=i==null?void 0:i.length;return u!==c},"hasLengthChanged"),bR=s((t,n,i)=>{let a=t.role.properties[n],u=a==null?void 0:a.precision,c=i==null?void 0:i.precision,p=a==null?void 0:a.scale,d=i==null?void 0:i.scale;return u!==c||p!==d},"hasPrecisionOrScaleChanged"),IR=s((t,n)=>i=>{let{checkFieldPropertiesChanged:a,getFullTableName:u,wrapInQuotes:c}=j(),p=u(i);return t.toPairs(i.properties).filter(([d,h])=>{let g=a(h.compMod,["type","mode"]);if(!g){let T=h.compMod.oldField.name,y=NR(i,T,h),E=bR(i,T,h);return y||E}return g}).map(([d,h])=>{let g=h.compMod.newField.mode||h.compMod.newField.type,T=c(d),y=t.pick(h,["length","precision","scale"]);return n.alterColumnType(p,T,g,y)}).map(d=>vR.getInstance([d],!0,!1))},"getUpdateTypesScriptDtos");_g.exports={getUpdateTypesScriptDtos:IR}});var Sg=U((uP,Tg)=>{"use strict";var{AlterScriptDto:Eg}=$e(),wR=s((t,n)=>i=>{let{getFullTableName:a,wrapInQuotes:u}=j(),c=a(i),p=i.required||[],d=i.role.required||[],h=t.difference(p,d),g=t.difference(d,p),T=t.toPairs(i.properties).filter(([E,S])=>{let C=S.compMod.oldField.name,x=g.includes(C);return h.includes(E)&&!x}).map(([E])=>n.setNotNullConstraint(c,u(E))).map(E=>Eg.getInstance([E],!0,!1)),y=t.toPairs(i.properties).filter(([E,S])=>{let C=S.compMod.oldField.name,x=g.includes(C),I=h.includes(E);return x&&!I}).map(([E])=>n.dropNotNullConstraint(c,u(E))).map(E=>Eg.getInstance([E],!0,!0));return[...T,...y]},"getModifyNonNullColumnsScriptDtos");Tg.exports={getModifyNonNullColumnsScriptDtos:wR}});var vg=U((lP,Cg)=>{"use strict";var{AlterScriptDto:Ag}=$e(),OR=s((t,n)=>i=>{let{getFullColumnName:a,wrapComment:u}=j();return t.toPairs(i.properties).filter(([c,p])=>{var T;let d=p.description,h=p.compMod.oldField.name,g=(T=i.role.properties[h])==null?void 0:T.description;return d&&(!g||d!==g)}).map(([c,p])=>{let d=p.description,h=u(d),g=a(i,c);return n.updateColumnComment(g,h)}).map(c=>Ag.getInstance([c],!0,!1))},"getUpdatedCommentOnColumnScriptDtos"),RR=s((t,n)=>i=>{let{getFullColumnName:a}=j();return t.toPairs(i.properties).filter(([u,c])=>{var g;let p=c.description,d=c.compMod.oldField.name;return((g=i.role.properties[d])==null?void 0:g.description)&&!p}).map(([u,c])=>{let p=a(i,u);return n.dropColumnComment(p)}).map(u=>Ag.getInstance([u],!0,!0))},"getDeletedCommentOnColumnScriptDtos"),xR=s((t,n)=>i=>{let a=OR(t,n)(i),u=RR(t,n)(i);return[...a,...u]},"getModifiedCommentOnColumnScriptDtos");Cg.exports={getModifiedCommentOnColumnScriptDtos:xR}});var bg=U((fP,Ng)=>{"use strict";var{AlterScriptDto:DR}=$e(),qR=s((t,n)=>i=>{let{checkFieldPropertiesChanged:a,getFullTableName:u,wrapInQuotes:c}=j(),p=u(i);return t.values(i.properties).filter(d=>a(d.compMod,["name"])).map(d=>{let h=c(d.compMod.oldField.name),g=c(d.compMod.newField.name);return n.renameColumn(p,h,g)}).map(d=>DR.getInstance([d],!0,!1))},"getRenameColumnScriptDtos");Ng.exports={getRenameColumnScriptDtos:qR}});var vc=U((mP,Ig)=>{"use strict";var Ac=class Ac{didTransitionHappen;wasPkChangedInTransition;static noTransition(){return{didTransitionHappen:!1}}static transition(n){return{didTransitionHappen:!0,wasPkChangedInTransition:n}}};s(Ac,"KeyTransitionDto");var Tc=Ac,Cc=class Cc{script;isDropScript;fullTableName;isActivated;constructor(n,i,a,u){this.script=n,this.isDropScript=a,this.fullTableName=i,this.isActivated=u}};s(Cc,"KeyScriptModificationDto");var Sc=Cc;Ig.exports={KeyScriptModificationDto:Sc,KeyTransitionDto:Tc}});var Dg=U((SP,xg)=>{"use strict";var{AlterScriptDto:LR}=$e(),{AlterCollectionDto:gP,AlterCollectionColumnDto:_P,AlterCollectionRoleCompModPKDto:yP,AlterCollectionColumnKeyOptionDto:EP,AlterCollectionRoleCompModPrimaryKey:TP}=Rn(),{KeyTransitionDto:St,KeyScriptModificationDto:bs}=vc(),Tr=1,Nc=s(t=>`${t}_pkey`,"getDefaultConstraintName"),wg=s(t=>({constraintName:t.constraintName,indexStorageParameters:t.indexStorageParameters,indexTablespace:t.indexTablespace,indexInclude:t.indexInclude}),"extractOptionsForComparisonWithRegularPkOptions"),Sr=s(t=>(t.primaryKeyOptions||[]).map(i=>wg(i)),"getCustomPropertiesOfRegularPkForComparisonWithRegularPkOptions"),Is=s(t=>[wg(t)].filter(i=>Object.values(i).some(Boolean)),"getCustomPropertiesOfCompositePkForComparisonWithRegularPkOptions"),PR=s(t=>n=>{var T,y;let a=(((y=(T=n==null?void 0:n.role)==null?void 0:T.compMod)==null?void 0:y.primaryKey)||{}).old||[],u=a.flatMap(E=>E.compositePrimaryKey.map(S=>S.keyId));if(u.length!==Tr)return St.noTransition();let c=u[0],p=Object.values(n.properties).find(E=>E.GUID===c);if(!p||!((p==null?void 0:p.primaryKey)&&!(p!=null&&p.compositePrimaryKey)))return St.noTransition();let h=Sr(p),g=a.some(E=>{if(E.compositePrimaryKey.length!==Tr)return!1;let S=Is(E);return t(S).differenceWith(h,t.isEqual).isEmpty()});return St.transition(!g)},"wasCompositePkChangedInTransitionFromCompositeToRegular"),MR=s(t=>n=>{var T,y;let a=(((y=(T=n==null?void 0:n.role)==null?void 0:T.compMod)==null?void 0:y.primaryKey)||{}).new||[],u=a.flatMap(E=>E.compositePrimaryKey.map(S=>S.keyId));if(u.length!==Tr)return St.noTransition();let c=u[0],p=Object.values(n.role.properties).find(E=>E.GUID===c);if(!p||!((p==null?void 0:p.primaryKey)&&!(p!=null&&p.compositePrimaryKey)))return St.noTransition();let h=Sr(p),g=a.some(E=>{if(E.compositePrimaryKey.length!==Tr)return!1;let S=Is(E);return t(S).differenceWith(h,t.isEqual).isEmpty()});return St.transition(!g)},"wasCompositePkChangedInTransitionFromRegularToComposite"),FR=s((t,n)=>t.constraintName?t.constraintName:Nc(n),"getConstraintNameForCompositePk"),UR=s(t=>(n,i,a)=>{let u=FR(n,i),c=t.toPairs(a.role.properties).filter(([g,T])=>!!n.compositePrimaryKey.find(y=>y.keyId===T.GUID)).map(([g,T])=>({name:g,isActivated:T.isActivated})),p="",d="",h=[];return n.indexStorageParameters&&(p=n.indexStorageParameters),n.indexTablespace&&(d=n.indexTablespace),n.indexInclude&&(h=t.toPairs(a.role.properties).filter(([g,T])=>!!n.indexInclude.find(y=>y.keyId===T.GUID)).map(([g,T])=>({name:g,isActivated:T.isActivated}))),{name:u,keyType:"PRIMARY KEY",columns:c,include:h,storageParameters:p,tablespace:d}},"getCreateCompositePKDDLProviderConfig"),BR=s((t,n)=>i=>{var S,C;let{getFullCollectionName:a,getSchemaOfAlterCollection:u,getEntityName:c}=j(),p=((C=(S=i==null?void 0:i.role)==null?void 0:S.compMod)==null?void 0:C.primaryKey)||{},d=p.new||[],h=p.old||[];if(d.length===0&&h.length===0)return[];let g=MR(t)(i);if(g.didTransitionHappen&&!g.wasPkChangedInTransition)return[];if(d.length===h.length&&t(h).differenceWith(d,t.isEqual).isEmpty())return[];let T=u(i),y=a(T),E=c(T);return d.map(x=>{let I=UR(t)(x,E,i),N=n.createKeyConstraint(y,i.isActivated,I);return new bs(N.statement,y,!1,N.isActivated)}).filter(x=>!!x.script)},"getAddCompositePkScriptDtos"),$R=s((t,n)=>i=>{var C,x;let{getFullCollectionName:a,getSchemaOfAlterCollection:u,getEntityName:c,wrapInQuotes:p}=j(),d=((x=(C=i==null?void 0:i.role)==null?void 0:C.compMod)==null?void 0:x.primaryKey)||{},h=d.new||[],g=d.old||[];if(h.length===0&&g.length===0)return[];let T=PR(t)(i);if(T.didTransitionHappen&&!T.wasPkChangedInTransition)return[];if(h.length===g.length&&t(g).differenceWith(h,t.isEqual).isEmpty())return[];let y=u(i),E=a(y),S=c(y);return g.map(I=>{let N=Nc(S);I.constraintName&&(N=I.constraintName);let F=p(N),q=n.dropKeyConstraint(E,F);return new bs(q,E,!0,i.isActivated)}).filter(I=>!!I.script)},"getDropCompositePkScriptDtos"),KR=s((t,n)=>i=>{let a=$R(t,n)(i),u=BR(t,n)(i);return[...a,...u].filter(Boolean)},"getModifyCompositePkScriptDtos"),Og=s((t,n)=>{let i=t.primaryKeyOptions;if(i!=null&&i.length&&(i==null?void 0:i.length)>0){let a=i[0];if(a.constraintName)return a.constraintName}return Nc(n)},"getConstraintNameForRegularPk"),kR=s(t=>(n,i,a,u)=>{let c=Og(i,a),p=[{name:n,isActivated:i.isActivated}],d="",h="",g=[],T=i.primaryKeyOptions;if(T!=null&&T.length&&(T==null?void 0:T.length)>0){let y=T[0];y.indexStorageParameters&&(d=y.indexStorageParameters),y.indexTablespace&&(h=y.indexTablespace),y.indexInclude&&(g=t.toPairs(u.role.properties).filter(([E,S])=>!!y.indexInclude.find(C=>C.keyId===S.GUID)).map(([E,S])=>({name:E,isActivated:S.isActivated})))}return{name:c,keyType:"PRIMARY KEY",columns:p,include:g,storageParameters:d,tablespace:h}},"getCreateRegularPKDDLProviderConfig"),GR=s(t=>(n,i)=>{let a=n.compMod.oldField.name,u=i.role.properties[a],c=n.primaryKey&&!n.compositePrimaryKey,p=!!(u!=null&&u.primaryKey);return c&&!p},"wasFieldChangedToBeARegularPk"),WR=s(t=>(n,i)=>{var S,C;let a=n.compMod.oldField.name,u=i.role.properties[a],c=n.primaryKey&&!n.compositePrimaryKey,p=!!(u!=null&&u.primaryKey);if(!(c&&p))return St.noTransition();let d=((C=(S=i==null?void 0:i.role)==null?void 0:S.compMod)==null?void 0:C.primaryKey)||{},h=d.new||[],g=d.old||[],T=g.some(x=>x.compositePrimaryKey.some(I=>I.keyId===u.GUID)),y=h.some(x=>x.compositePrimaryKey.some(I=>I.keyId===n.GUID));if(c&&(T&&!y)){let x=Sr(n),I=g.some(N=>{if(N.compositePrimaryKey.length!==Tr)return!1;let F=Is(N);return t(F).differenceWith(x,t.isEqual).isEmpty()});return St.transition(!I)}return St.noTransition()},"wasRegularPkChangedInTransitionFromCompositeToRegular"),HR=s(t=>(n,i)=>{var S,C;let a=n.compMod.oldField.name,u=i.role.properties[a],c=u.primaryKey&&!u.compositePrimaryKey,p=!!(n!=null&&n.primaryKey);if(!(c&&p))return St.noTransition();let d=((C=(S=i==null?void 0:i.role)==null?void 0:S.compMod)==null?void 0:C.primaryKey)||{},h=d.new||[],T=(d.old||[]).some(x=>x.compositePrimaryKey.some(I=>I.keyId===u.GUID)),E=h.some(x=>x.compositePrimaryKey.some(I=>I.keyId===n.GUID))&&!T;if(c&&E){let x=Sr(u),I=h.some(N=>{if(N.compositePrimaryKey.length!==Tr)return!1;let F=Is(N);return t(F).differenceWith(x,t.isEqual).isEmpty()});return St.transition(!I)}return St.noTransition()},"wasRegularPkChangedInTransitionFromRegularToComposite"),VR=s(t=>(n,i)=>{let a=n.compMod.oldField.name,u=i.role.properties[a],c=(u==null?void 0:u.primaryKey)&&!(u!=null&&u.compositePrimaryKey),p=!n.primaryKey&&!n.compositePrimaryKey;return c&&p},"isFieldNoLongerARegularPk"),Rg=s(t=>(n,i)=>{let a=n.compMod.oldField.name,u=i.role.properties[a]||{},c=n.primaryKey&&!n.compositePrimaryKey,p=(u==null?void 0:u.primaryKey)&&!(u!=null&&u.compositePrimaryKey);if(!(c&&p))return!1;let d=Sr(n),h=Sr(u);return!t(h).differenceWith(d,t.isEqual).isEmpty()},"wasRegularPkModified"),YR=s((t,n)=>i=>{let{getFullCollectionName:a,getSchemaOfAlterCollection:u,getEntityName:c}=j(),p=u(i),d=a(p),h=c(p);return t.toPairs(i.properties).filter(([g,T])=>{if(GR(t)(T,i))return!0;let y=WR(t)(T,i);return y.didTransitionHappen?y.wasPkChangedInTransition:Rg(t)(T,i)}).map(([g,T])=>{let y=kR(t)(g,T,h,i),E=n.createKeyConstraint(d,i.isActivated,y);return new bs(E.statement,d,!1,E.isActivated)}).filter(g=>!!g.script)},"getAddPkScriptDtos"),QR=s((t,n)=>i=>{let{getFullCollectionName:a,getSchemaOfAlterCollection:u,getEntityName:c,wrapInQuotes:p}=j(),d=u(i),h=a(d),g=c(d);return t.toPairs(i.properties).filter(([T,y])=>{if(VR(t)(y,i))return!0;let E=HR(t)(y,i);return E.didTransitionHappen?E.wasPkChangedInTransition:Rg(t)(y,i)}).map(([T,y])=>{let E=y.compMod.oldField.name,S=i.role.properties[E],C=p(Og(S,g)),x=n.dropKeyConstraint(h,C);return new bs(x,h,!0,i.isActivated)}).filter(T=>!!T.script)},"getDropPkScriptDto"),zR=s((t,n)=>i=>{let a=QR(t,n)(i),u=YR(t,n)(i);return[...a,...u].filter(Boolean)},"getModifyPkScriptDtos"),XR=s(t=>t.sort((n,i)=>n.fullTableName===i.fullTableName?Number(i.isDropScript)-Number(n.isDropScript):n.fullTableName<i.fullTableName),"sortModifyPkConstraints"),ZR=s((t,n)=>i=>{let a=KR(t,n)(i),u=zR(t,n)(i),c=[...a,...u];return XR(c).map(d=>LR.getInstance([d.script],d.isActivated,d.isDropScript)).filter(Boolean)},"getModifyPkConstraintsScriptDtos");xg.exports={getModifyPkConstraintsScriptDtos:ZR}});var Fg=U((wP,Mg)=>{"use strict";var{AlterScriptDto:jR}=$e(),{AlterCollectionDto:CP,AlterCollectionColumnDto:vP,AlterCollectionRoleCompModUniqueKeyDto:NP,AlterCollectionColumnKeyOptionDto:bP,AlterCollectionRoleCompModUniqueKey:IP}=Rn(),{KeyTransitionDto:At,KeyScriptModificationDto:ws}=vc(),Ar=1,bc=s(t=>`${t}_ukey`,"getDefaultConstraintName"),qg=s(t=>({constraintName:t.constraintName,indexStorageParameters:t.indexStorageParameters,indexTablespace:t.indexTablespace,indexInclude:t.indexInclude}),"extractOptionsForComparisonWithRegularUniqueKeyOptions"),Cr=s(t=>(t.uniqueKeyOptions||[]).map(i=>qg(i)),"getCustomPropertiesOfRegularUniqueKeyForComparisonWithRegularUniqueKeyOptions"),Os=s(t=>[qg(t)].filter(i=>Object.values(i).some(Boolean)),"getCustomPropertiesOfCompositeUniqueKeyForComparisonWithRegularUniqueKeyOptions"),JR=s(t=>n=>{var T,y;let a=(((y=(T=n==null?void 0:n.role)==null?void 0:T.compMod)==null?void 0:y.uniqueKey)||{}).old||[],u=a.flatMap(E=>E.compositeUniqueKey.map(S=>S.keyId));if(u.length!==Ar)return At.noTransition();let c=u[0],p=Object.values(n.properties).find(E=>E.GUID===c);if(!p||!((p==null?void 0:p.unique)&&!(p!=null&&p.compositeUniqueKey)))return At.noTransition();let h=Cr(p),g=a.some(E=>{if(E.compositeUniqueKey.length!==Ar)return!1;let S=Os(E);return t(S).differenceWith(h,t.isEqual).isEmpty()});return At.transition(!g)},"wasCompositeUniqueKeyChangedInTransitionFromCompositeToRegular"),ex=s(t=>n=>{var T,y;let a=(((y=(T=n==null?void 0:n.role)==null?void 0:T.compMod)==null?void 0:y.uniqueKey)||{}).new||[],u=a.flatMap(E=>E.compositeUniqueKey.map(S=>S.keyId));if(u.length!==Ar)return At.noTransition();let c=u[0],p=Object.values(n.role.properties).find(E=>E.GUID===c);if(!p||!((p==null?void 0:p.unique)&&!(p!=null&&p.compositeUniqueKey)))return At.noTransition();let h=Cr(p),g=a.some(E=>{if(E.compositeUniqueKey.length!==Ar)return!1;let S=Os(E);return t(S).differenceWith(h,t.isEqual).isEmpty()});return At.transition(!g)},"wasCompositeUniqueKeyChangedInTransitionFromRegularToComposite"),tx=s((t,n)=>t.constraintName?t.constraintName:bc(n),"getConstraintNameForCompositeUniqueKey"),nx=s(t=>(n,i,a,u)=>{let{clean:c,getDbVersion:p}=j(),d=vs()(t,c),h=tx(n,i),g=t.toPairs(a.role.properties).filter(([I,N])=>!!n.compositeUniqueKey.find(F=>F.keyId===N.GUID)).map(([I,N])=>({name:I,isActivated:N.isActivated})),T="",y="",E=[],S=n.deferrable,C=n.deferrableConstraintCheckTime;n.indexStorageParameters&&(T=n.indexStorageParameters),n.indexTablespace&&(y=n.indexTablespace),n.indexInclude&&(E=t.toPairs(a.role.properties).filter(([I,N])=>!!n.indexInclude.find(F=>F.keyId===N.GUID)).map(([I,N])=>({name:I,isActivated:N.isActivated})));let x=d.getUniqueKeyType(n,p(u));return{name:h,keyType:x,columns:g,include:E,storageParameters:T,tablespace:y,deferrable:S,deferrableConstraintCheckTime:C}},"getCreateCompositeUniqueKeyDDLProviderConfig"),rx=s((t,n)=>(i,a)=>{var C,x;let{getFullCollectionName:u,getSchemaOfAlterCollection:c,getEntityName:p}=j(),d=((x=(C=i==null?void 0:i.role)==null?void 0:C.compMod)==null?void 0:x.uniqueKey)||{},h=d.new||[],g=d.old||[];if(h.length===0&&g.length===0)return[];let T=ex(t)(i);if(T.didTransitionHappen&&!T.wasUniqueKeyChangedInTransition)return[];if(h.length===g.length&&t(g).differenceWith(h,t.isEqual).isEmpty())return[];let y=c(i),E=u(y),S=p(y);return h.map(I=>{let N=nx(t)(I,S,i,a),F=n.createKeyConstraint(E,i.isActivated,N);return new ws(F.statement,E,!1,F.isActivated)}).filter(I=>!!I.script)},"getAddCompositeUniqueKeyScriptDtos"),ix=s((t,n)=>i=>{var C,x;let{getFullCollectionName:a,getSchemaOfAlterCollection:u,getEntityName:c,wrapInQuotes:p}=j(),d=((x=(C=i==null?void 0:i.role)==null?void 0:C.compMod)==null?void 0:x.uniqueKey)||{},h=d.new||[],g=d.old||[];if(h.length===0&&g.length===0)return[];let T=JR(t)(i);if(T.didTransitionHappen&&!T.wasUniqueKeyChangedInTransition)return[];if(h.length===g.length&&t(g).differenceWith(h,t.isEqual).isEmpty())return[];let y=u(i),E=a(y),S=c(y);return g.map(I=>{let N=bc(S);I.constraintName&&(N=I.constraintName);let F=p(N),q=n.dropKeyConstraint(E,F);return new ws(q,E,!0,i.isActivated)}).filter(I=>!!I.script)},"getDropCompositeUniqueKeyScriptDtos"),sx=s((t,n)=>(i,a)=>{let u=ix(t,n)(i),c=rx(t,n)(i,a);return[...u,...c].filter(Boolean)},"getModifyCompositeUniqueKeyScriptDtos"),Lg=s((t,n)=>{let i=t.uniqueKeyOptions;if(i!=null&&i.length&&(i==null?void 0:i.length)>0){let a=i[0];if(a.constraintName)return a.constraintName}return bc(n)},"getConstraintNameForRegularUniqueKey"),ax=s(t=>(n,i,a,u,c)=>{let{clean:p,getDbVersion:d}=j(),h=vs()(t,p),g=Lg(i,a),T=[{name:n,isActivated:i.isActivated}],y="",E="",S=[],C="",x="",I="",N=i.uniqueKeyOptions;if(N!=null&&N.length&&(N==null?void 0:N.length)>0){let q=N[0];q.indexStorageParameters&&(y=q.indexStorageParameters),q.indexTablespace&&(E=q.indexTablespace),q.indexInclude&&(S=t.toPairs(u.role.properties).filter(([$,k])=>!!q.indexInclude.find(V=>V.keyId===k.GUID)).map(([$,k])=>({name:$,isActivated:k.isActivated}))),C=q.deferrable,x=q.deferrableConstraintCheckTime,I=q.nullsDistinct}let F=h.getUniqueKeyType({nullsDistinct:I},d(c));return{name:g,keyType:F,columns:T,include:S,storageParameters:y,tablespace:E,deferrable:C,deferrableConstraintCheckTime:x}},"getCreateRegularUniqueKeyDDLProviderConfig"),ox=s(t=>(n,i)=>{let a=n.compMod.oldField.name,u=i.role.properties[a],c=n.unique&&!n.compositeUniqueKey,p=(u==null?void 0:u.unique)||u.compositeUniqueKey;return c&&!p},"wasFieldChangedToBeARegularUniqueKey"),ux=s(t=>(n,i)=>{var S,C;let a=n.compMod.oldField.name,u=i.role.properties[a],c=n.unique&&!n.compositeUniqueKey,p=(u==null?void 0:u.unique)||u.compositeUniqueKey;if(!(c&&p))return At.noTransition();let d=((C=(S=i==null?void 0:i.role)==null?void 0:S.compMod)==null?void 0:C.uniqueKey)||{},h=d.new||[],g=d.old||[],T=g.some(x=>x.compositeUniqueKey.some(I=>I.keyId===u.GUID)),y=h.some(x=>x.compositeUniqueKey.some(I=>I.keyId===n.GUID));if(c&&(T&&!y)){let x=Cr(n),I=g.some(N=>{if(N.compositeUniqueKey.length!==Ar)return!1;let F=Os(N);return t(F).differenceWith(x,t.isEqual).isEmpty()});return At.transition(!I)}return At.noTransition()},"wasRegularUniqueKeyChangedInTransitionFromCompositeToRegular"),cx=s(t=>(n,i)=>{var S,C;let a=n.compMod.oldField.name,u=i.role.properties[a],c=u.unique&&!u.compositeUniqueKey,p=!!(n!=null&&n.unique);if(!(c&&p))return At.noTransition();let d=((C=(S=i==null?void 0:i.role)==null?void 0:S.compMod)==null?void 0:C.uniqueKey)||{},h=d.new||[],T=(d.old||[]).some(x=>x.compositeUniqueKey.some(I=>I.keyId===u.GUID)),E=h.some(x=>x.compositeUniqueKey.some(I=>I.keyId===n.GUID))&&!T;if(c&&E){let x=Cr(u),I=h.some(N=>{if(N.compositeUniqueKey.length!==Ar)return!1;let F=Os(N);return t(F).differenceWith(x,t.isEqual).isEmpty()});return At.transition(!I)}return At.noTransition()},"wasRegularUniqueKeyChangedInTransitionFromRegularToComposite"),lx=s(t=>(n,i)=>{let a=n.compMod.oldField.name,u=i.role.properties[a],c=(u==null?void 0:u.unique)&&!(u!=null&&u.compositeUniqueKey),p=!n.unique&&!n.compositeUniqueKey;return c&&p},"isFieldNoLongerARegularUniqueKey"),Pg=s(t=>(n,i)=>{let a=n.compMod.oldField.name,u=i.role.properties[a]||{},c=n.unique&&!n.compositeUniqueKey,p=(u==null?void 0:u.unique)&&!(u!=null&&u.compositeUniqueKey);if(!(c&&p))return!1;let d=Cr(n),h=Cr(u);return!t(h).differenceWith(d,t.isEqual).isEmpty()},"wasRegularUniqueKeyModified"),px=s((t,n)=>(i,a)=>{let{getFullCollectionName:u,getSchemaOfAlterCollection:c,getEntityName:p}=j(),d=c(i),h=u(d),g=p(d);return t.toPairs(i.properties).filter(([T,y])=>{if(ox(t)(y,i))return!0;let E=ux(t)(y,i);return E.didTransitionHappen?E.wasUniqueKeyChangedInTransition:Pg(t)(y,i)}).map(([T,y])=>{let E=ax(t)(T,y,g,i,a),S=n.createKeyConstraint(h,i.isActivated,E);return new ws(S.statement,h,!1,S.isActivated)}).filter(T=>!!T.script)},"getAddUniqueKeyScriptDtos"),fx=s((t,n)=>i=>{let{getFullCollectionName:a,getSchemaOfAlterCollection:u,getEntityName:c,wrapInQuotes:p}=j(),d=u(i),h=a(d),g=c(d);return t.toPairs(i.properties).filter(([T,y])=>{if(lx(t)(y,i))return!0;let E=cx(t)(y,i);return E.didTransitionHappen?E.wasUniqueKeyChangedInTransition:Pg(t)(y,i)}).map(([T,y])=>{let E=y.compMod.oldField.name,S=i.role.properties[E],C=p(Lg(S,g)),x=n.dropKeyConstraint(h,C);return new ws(x,h,!0,i.isActivated)}).filter(T=>!!T.script)},"getDropUniqueKeyScriptDto"),dx=s((t,n)=>(i,a)=>{let u=fx(t,n)(i),c=px(t,n)(i,a);return[...u,...c].filter(Boolean)},"getModifyUniqueKeyScriptDtos"),mx=s(t=>t.sort((n,i)=>n.fullTableName===i.fullTableName?Number(i.isDropScript)-Number(n.isDropScript):n.fullTableName<i.fullTableName),"sortModifyUniqueKeyConstraints"),hx=s(({_:t,ddlProvider:n})=>({collection:i,dbVersion:a})=>{let u=sx(t,n)(i,a),c=dx(t,n)(i,a),p=[...u,...c];return mx(p).map(h=>jR.getInstance([h.script],h.isActivated,h.isDropScript)).filter(Boolean)},"getModifyUniqueKeyConstraintsScriptDtos");Mg.exports={getModifyUniqueKeyConstraintsScriptDtos:hx}});var Hg=U((DP,Wg)=>{"use strict";var{AlterCollectionDto:RP}=Rn(),{AlterIndexDto:xP}=rc(),{AlterScriptDto:vr}=$e(),gx=s(({_:t})=>({columnId:n,collection:i})=>{var d,h,g;let a=t.toPairs(((d=i==null?void 0:i.role)==null?void 0:d.properties)||(i==null?void 0:i.properties)||{}).map(([T,y])=>({...y,name:T})),u=(((g=(h=i==null?void 0:i.role)==null?void 0:h.compMod)==null?void 0:g.oldProperties)||[]).map(T=>({...T,GUID:T.id})),p=(a.length>0?a:u).find(T=>T.GUID===n);if(p)return p.name},"getColumnNameById"),Ug=s(({_:t})=>({columns:n,collection:i})=>(n||[]).map(a=>({...a,name:gx({_:t})({columnId:a.keyId,collection:i})})).filter(a=>!!a.name),"setNamesToColumns"),_x=s(({_:t})=>({index:n,collection:i})=>{let{getSchemaNameFromCollection:a}=j(),u=a({collection:i}),c=Ug({_:t})({columns:n.columns,collection:i}),p=Ug({_:t})({columns:n.include,collection:i});return{...n,schemaName:u,columns:c,include:p}},"mapIndexToFeIndexDto"),Bg=s(({_:t})=>({oldIndex:n,newIndex:i,indexPropertiesToCompare:a})=>{let u=t.pick(i,a),c=t.pick(n,a);return!t.isEqual(u,c)},"areIndexesDifferent"),yx=s(({_:t})=>({oldIndex:n,newIndex:i})=>{let a=["index_method","columns","include","nullsDistinct","where"];return Bg({_:t})({oldIndex:n,newIndex:i,indexPropertiesToCompare:a})},"shouldDropAndRecreateIndex"),Ex=s(({_:t})=>({oldIndex:n,newIndex:i})=>{let a=["indxName","index_tablespace_name","index_storage_parameter"];return Bg({_:t})({oldIndex:n,newIndex:i,indexPropertiesToCompare:a})},"shouldAlterIndex"),Ic=s(({oldIndex:t,newIndex:n})=>t.id===n.id||t.indxName===n.indxName,"areOldIndexDtoAndNewIndexDtoDescribingSameDatabaseIndex"),$g=s(({_:t,ddlProvider:n})=>({index:i,collection:a,additionalDataForDdlProvider:u})=>{let{dbData:c,tableName:p,isParentActivated:d}=u,h=_x({_:t})({index:i,collection:a}),g=n.createIndex(p,h,c,d),T=h.isActivated&&d;return vr.getInstance([g],T,!1)},"getCreateIndexScriptDto"),Kg=s(({_:t,ddlProvider:n})=>({collection:i,additionalDataForDdlProvider:a})=>{var p,d,h,g;let u=((p=i==null?void 0:i.role)==null?void 0:p.Indxs)||[],c=((g=(h=(d=i==null?void 0:i.role)==null?void 0:d.compMod)==null?void 0:h.Indxs)==null?void 0:g.old)||[];return u.filter(T=>!c.find(E=>Ic({oldIndex:E,newIndex:T}))).map(T=>$g({_:t,ddlProvider:n})({index:T,collection:i,additionalDataForDdlProvider:a})).filter(Boolean)},"getAddedIndexesScriptDtos"),kg=s(({_:t,ddlProvider:n})=>({index:i,additionalDataForDdlProvider:a})=>{let{getNamePrefixedWithSchemaName:u}=j(),{isParentActivated:c,schemaName:p}=a,d=u(i.indxName,p),h=n.dropIndex({indexName:d}),g=i.isActivated&&c;return vr.getInstance([h],g,!0)},"getDeleteIndexScriptDto"),Tx=s(({_:t,ddlProvider:n})=>({collection:i,additionalDataForDdlProvider:a})=>{var p,d,h,g,T,y;let u=((h=(d=(p=i==null?void 0:i.role)==null?void 0:p.compMod)==null?void 0:d.Indxs)==null?void 0:h.new)||[];return(((y=(T=(g=i==null?void 0:i.role)==null?void 0:g.compMod)==null?void 0:T.Indxs)==null?void 0:y.old)||[]).filter(E=>!u.find(C=>Ic({oldIndex:E,newIndex:C}))).map(E=>kg({_:t,ddlProvider:n})({index:E,additionalDataForDdlProvider:a})).filter(Boolean)},"getDeletedIndexesScriptDtos"),Sx=s(({_:t,ddlProvider:n})=>({newIndex:i,oldIndex:a,additionalDataForDdlProvider:u})=>{let c=[],{isParentActivated:p,schemaName:d}=u,h=i.isActivated&&p;if(!t.isEqual(i.indxName,a.indxName)){let E=n.alterIndexRename({schemaName:d,oldIndexName:a.indxName,newIndexName:i.indxName}),S=vr.getInstance([E],h,!1);c.push(S)}if(!t.isEqual(i.index_tablespace_name,a.index_tablespace_name)){let E=n.alterIndexTablespace({schemaName:d,indexName:i.indxName,tablespaceName:i.index_tablespace_name}),S=vr.getInstance([E],h,!1);c.push(S)}if(!t.isEqual(i.index_storage_parameter,a.index_storage_parameter)){let E=n.alterIndexStorageParams({schemaName:d,indexName:i.indxName,index:i}),S=vr.getInstance([E],h,!1);c.push(S);let C=n.reindexIndex({schemaName:d,indexName:i.indxName}),x=vr.getInstance([C],h,!1);c.push(x)}return c.filter(Boolean)},"getAlterIndexScriptDtos"),Ax=s(({_:t,ddlProvider:n})=>({collection:i,additionalDataForDdlProvider:a})=>{var p,d,h,g,T,y;let u=((h=(d=(p=i==null?void 0:i.role)==null?void 0:p.compMod)==null?void 0:d.Indxs)==null?void 0:h.new)||[],c=((y=(T=(g=i==null?void 0:i.role)==null?void 0:g.compMod)==null?void 0:T.Indxs)==null?void 0:y.old)||[];return u.map(E=>{let S=c.find(C=>Ic({oldIndex:C,newIndex:E}));if(S)return{newIndex:E,oldIndex:S}}).filter(Boolean).flatMap(({newIndex:E,oldIndex:S})=>{if(yx({_:t})({newIndex:E,oldIndex:S})){let I=kg({_:t,ddlProvider:n})({index:S,additionalDataForDdlProvider:a}),N=$g({_:t,ddlProvider:n})({index:E,collection:i,additionalDataForDdlProvider:a});return[I,N]}return Ex({_:t})({oldIndex:S,newIndex:E})?Sx({_:t,ddlProvider:n})({oldIndex:S,newIndex:E,additionalDataForDdlProvider:a}):[]}).filter(Boolean)},"getModifiedIndexesScriptDtos"),Cx=s(({_:t,ddlProvider:n})=>({collection:i,dbVersion:a})=>{let u=Gg({_:t,dbVersion:a,collection:i}),c=Tx({_:t,ddlProvider:n})({collection:i,additionalDataForDdlProvider:u}),p=Kg({_:t,ddlProvider:n})({collection:i,additionalDataForDdlProvider:u}),d=Ax({_:t,ddlProvider:n})({collection:i,additionalDataForDdlProvider:u});return[...c,...p,...d].filter(Boolean)},"getModifyIndexesScriptDtos"),Gg=s(({_:t,dbVersion:n,collection:i})=>{var u,c,p;let{getSchemaNameFromCollection:a}=j();return{dbData:{dbVersion:n},tableName:((c=(u=i==null?void 0:i.compMod)==null?void 0:u.collectionName)==null?void 0:c.new)||((p=i==null?void 0:i.role)==null?void 0:p.name)||"",schemaName:a({collection:i})||"",isParentActivated:i.isActivated}},"getAdditionalDataForDdlProvider");Wg.exports={getModifyIndexesScriptDtos:Cx,getAddedIndexesScriptDtos:Kg,getAdditionalDataForDdlProvider:Gg}});var Zg=U((LP,Xg)=>{"use strict";var{toPairs:Vg}=Xu(),{AlterScriptDto:Yg}=$e(),{getFullTableName:Qg,wrapInQuotes:zg,wrapInSingleQuotes:vx}=j(),Nx=s(({ddlProvider:t,collection:n})=>Vg(n.properties).filter(([i,a])=>{var d;let u=a.default,c=a.compMod.oldField.name,p=(d=n.role.properties[c])==null?void 0:d.default;return u!==void 0&&(!p||u!==p)}).map(([i,a])=>{let u=a.default,c={tableName:Qg(n),columnName:zg(i),defaultValue:vx({name:u})};return t.updateColumnDefaultValue(c)}).map(i=>Yg.getInstance([i],!0,!1)).filter(Boolean),"getUpdatedDefaultColumnValueScriptDtos"),bx=s(({ddlProvider:t,collection:n})=>Vg(n.properties).filter(([i,a])=>{var g;let u=a.default,c=a.compMod.oldField.name;return((g=n.role.properties[c])==null?void 0:g.default)!==void 0&&!(u!==void 0)}).map(([i])=>{let a={tableName:Qg(n),columnName:zg(i)};return t.dropColumnDefaultValue(a)}).map(i=>Yg.getInstance([i],!0,!0)).filter(Boolean),"getDeletedDefaultColumnValueScriptDtos"),Ix=s(({ddlProvider:t,collection:n})=>{let i=Nx({ddlProvider:t,collection:n}),a=bx({ddlProvider:t,collection:n});return[...i,...a]},"getModifiedDefaultColumnValueScriptDtos");Xg.exports={getModifiedDefaultColumnValueScriptDtos:Ix}});var ii=U((MP,jg)=>{"use strict";jg.exports=t=>{let{createColumnDefinition:n}=t.require("@hackolade/ddl-fe-utils"),i=s(u=>u.$ref?u.$ref.split("/").pop():u.mode||u.childType||u.type,"getType");return{createColumnDefinitionBySchema:s(({name:u,jsonSchema:c,parentJsonSchema:p,ddlProvider:d,schemaData:h,definitionJsonSchema:g})=>n({name:u,jsonSchema:c,parentJsonSchema:p,ddlProvider:d,schemaData:h,definitionJsonSchema:g,getType:i}),"createColumnDefinitionBySchema")}}});var r_=U((BP,n_)=>{"use strict";var{getModifyCheckConstraintScriptDtos:wx}=dg(),{getModifyEntityCommentsScriptDtos:Ox}=gg(),{getUpdateTypesScriptDtos:Rx}=yg(),{getModifyNonNullColumnsScriptDtos:xx}=Sg(),{getModifiedCommentOnColumnScriptDtos:Dx}=vg(),{getRenameColumnScriptDtos:qx}=bg(),{AlterScriptDto:Rs}=$e(),{AlterCollectionDto:UP}=Rn(),{getModifyPkConstraintsScriptDtos:Lx}=Dg(),{getModifyUniqueKeyConstraintsScriptDtos:Px}=Fg(),{getModifyIndexesScriptDtos:Mx,getAddedIndexesScriptDtos:Fx,getAdditionalDataForDdlProvider:Ux}=Hg(),{getModifiedDefaultColumnValueScriptDtos:Bx}=Zg(),$x=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>c=>{let p=t.require("lodash"),{getEntityName:d}=j(),{createColumnDefinitionBySchema:h}=ii()(t),g=Ve()(null,null,t),{getDefinitionByReference:T}=t.require("@hackolade/ddl-fe-utils"),E={schemaName:c.compMod.keyspaceName,dbVersion:n},S={...c,...p.omit(c==null?void 0:c.role,"properties")||{}},C=p.toPairs(S.properties).map(([$,k])=>{let V=T({propertySchema:k,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u});return h({name:$,jsonSchema:k,parentJsonSchema:S,ddlProvider:g,schemaData:E,definitionJsonSchema:V})}),x=(S.chkConstr||[]).map($=>g.createCheckConstraint(g.hydrateCheckConstraint($))),I={name:d(S),columns:C.map(g.convertColumnDefinition),checkConstraints:x,foreignKeyConstraints:[],schemaData:E,columnDefinitions:C,dbData:{dbVersion:n}},N=g.hydrateTable({tableData:I,entityData:[S],jsonSchema:S}),F=e_({_:p,ddlProvider:g,collection:c,dbVersion:n}).flatMap(({scripts:$})=>$.map(({script:k})=>k)),q=g.createTable(N,S.isActivated);return Rs.getInstance([q,...F],!0,!1)},"getAddCollectionScriptDto"),Kx=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{getFullTableName:u}=j(),c=u(n),p=a.dropTable(c);return Rs.getInstance([p],!0,!0)},"getDeleteCollectionScriptDto"),kx=s(({app:t,dbVersion:n})=>i=>{let a=t.require("lodash"),u=Ve()(null,null,t),c=wx(a,u)(i),p=Ox(a,u)(i),d=Lx(a,u)(i),h=Px({_:a,ddlProvider:u})({collection:i,dbVersion:n}),g=Mx({_:a,ddlProvider:u})({collection:i,dbVersion:n});return[...c,...p,...d,...h,...g].filter(Boolean)},"getModifyCollectionScriptDtos"),Jg=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>(c,p)=>{var $;let d=t.require("lodash"),{getEntityName:h,getNamePrefixedWithSchemaName:g}=j(),{createColumnDefinitionBySchema:T}=ii()(t),y=Ve()(null,null,t),{getDefinitionByReference:E}=t.require("@hackolade/ddl-fe-utils"),S={...c,...d.omit(c==null?void 0:c.role,"properties")||{}},C=h(S),x=($=S.compMod)==null?void 0:$.keyspaceName,I=g(C,x),N={schemaName:x,dbVersion:n},F=d.toPairs(c.properties).filter(([k,V])=>p([k,V])).map(([k,V])=>{let ie=E({propertySchema:V,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u});return T({name:k,jsonSchema:V,parentJsonSchema:S,ddlProvider:y,schemaData:N,definitionJsonSchema:ie})}).map(y.convertColumnDefinition).map(k=>y.addColumn(I,k)).map(k=>Rs.getInstance([k],!0,!1)),q=e_({_:d,ddlProvider:y,collection:c});return F.concat(q).filter(Boolean)},"getAddColumnsByConditionScriptDtos"),e_=s(({_:t,ddlProvider:n,dbVersion:i,collection:a})=>{var g,T;let u=((g=a==null?void 0:a.role)==null?void 0:g.Indxs)||[],c={...a==null?void 0:a.properties,...(T=a==null?void 0:a.role)==null?void 0:T.properties},p=Object.values(c).map(({GUID:y})=>y);if(u.length===0||p.length===0)return[];if(!u.some(({columns:y=[]})=>y.find(({keyId:E})=>p.includes(E))))return[];let h=Ux({_:t,dbVersion:i,collection:a});return Fx({_:t,ddlProvider:n})({collection:a,additionalDataForDdlProvider:h})},"getNewlyCreatedIndexesScripts"),Gx=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>c=>Jg({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})(c,([p,d])=>!d.compMod),"getAddColumnScriptDtos"),t_=s(t=>(n,i)=>{var E;let a=t.require("lodash"),u=Ve()(null,null,t),{getEntityName:c,getNamePrefixedWithSchemaName:p,wrapInQuotes:d}=j(),h={...n,...a.omit(n==null?void 0:n.role,"properties")||{}},g=c(h),T=(E=h.compMod)==null?void 0:E.keyspaceName,y=p(g,T);return a.toPairs(n.properties).filter(([S,C])=>i([S,C])).map(([S])=>{let C=d(S);return u.dropColumn(y,C)}).map(S=>Rs.getInstance([S],!0,!0)).filter(Boolean)},"getDeleteColumnsByConditionScriptDtos"),Wx=s(t=>n=>t_(t)(n,([i,a])=>!a.compMod),"getDeleteColumnScriptDtos"),Hx=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>c=>{let p=t.require("lodash");return p.toPairs(c.properties).filter(([d,h])=>{let g=h.compMod.oldField.name,T=c.role.properties[g];return T.generatedColumn!==h.generatedColumn||T.columnGenerationExpression!==h.columnGenerationExpression}).flatMap(([d,h])=>{let g={...c,properties:p.fromPairs([[d,h]])},T=t_(t)(g,()=>!0),y=Jg({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})(g,()=>!0);return[...T,...y]}).filter(Boolean)},"getDropAndRecreateColumnsScriptDtos"),Vx=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>c=>{let p=t.require("lodash"),d=Ve()(null,null,t),h=qx(p,d)(c),g=Hx({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})(c);if(g.length)return[...h,...g].filter(Boolean);let T=Rx(p,d)(c),y=xx(p,d)(c),E=Dx(p,d)(c),S=Bx({ddlProvider:d,collection:c});return[...h,...T,...y,...E,...S].filter(Boolean)},"getModifyColumnScriptDtos");n_.exports={getAddCollectionScriptDto:$x,getDeleteCollectionScriptDto:Kx,getModifyCollectionScriptDtos:kx,getAddColumnScriptDtos:Gx,getDeleteColumnScriptDtos:Wx,getModifyColumnScriptDtos:Vx}});var s_=U((KP,i_)=>{"use strict";var{AlterScriptDto:Vn}=$e(),Yx=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>c=>{let p=t.require("lodash"),{createColumnDefinitionBySchema:d}=ii()(t),h=Ve()(null,null,t),{getDefinitionByReference:g}=t.require("@hackolade/ddl-fe-utils"),T={dbVersion:n},y=p.toPairs(c.properties||{}).map(([x,I])=>{let N=g({propertySchema:I,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u});return d({name:x,jsonSchema:I,parentJsonSchema:c,ddlProvider:h,schemaData:T,definitionJsonSchema:N})}),S={...d({name:c.code||c.name,jsonSchema:c,parentJsonSchema:{required:[]},definitionJsonSchema:{},ddlProvider:h,schemaData:T}),properties:y},C=h.createUdt(S);return Vn.getInstance([C],!0,!1)},"getCreateUdtScriptDto"),Qx=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{getUdtName:u,wrapInQuotes:c}=j(),p=c(u(n));if(n.type==="domain"){let d=a.dropDomain(p);return Vn.getInstance([d],!0,!0)}else{let d=a.dropType(p);return Vn.getInstance([d],!0,!0)}},"getDeleteUdtScriptDto"),zx=s(({app:t,dbVersion:n,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u})=>c=>{let p=t.require("lodash"),{createColumnDefinitionBySchema:d}=ii()(t),{getUdtName:h,wrapInQuotes:g}=j(),T=Ve()(null,null,t),{getDefinitionByReference:y}=t.require("@hackolade/ddl-fe-utils"),E=g(h(c)),S={dbVersion:n};return p.toPairs(c.properties).filter(([C,x])=>!x.compMod).map(([C,x])=>{let I=y({propertySchema:x,modelDefinitions:i,internalDefinitions:a,externalDefinitions:u});return d({name:C,jsonSchema:x,parentJsonSchema:{required:[]},ddlProvider:T,schemaData:S,definitionJsonSchema:I})}).map(T.convertColumnDefinition).map(C=>T.alterTypeAddAttribute(E,C)).map(C=>Vn.getInstance([C],!0,!1)).filter(Boolean)},"getAddColumnToTypeScriptDtos"),Xx=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{wrapInQuotes:u}=j(),c=u(n.code||n.name);return i.toPairs(n.properties).filter(([p,d])=>!d.compMod).map(([p])=>a.alterTypeDropAttribute(c,u(p))).map(p=>Vn.getInstance([p],!0,!0)).filter(Boolean)},"getDeleteColumnFromTypeScriptDtos"),Zx=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{checkFieldPropertiesChanged:u,wrapInQuotes:c}=j(),p=c(n.code||n.name),d=i.values(n.properties).filter(g=>u(g.compMod,["name"])).map(g=>{let T=c(g.compMod.oldField.name),y=c(g.compMod.newField.name);return a.alterTypeRenameAttribute(p,T,y)}).map(g=>Vn.getInstance([g],!0,!1)),h=i.toPairs(n.properties).filter(([g,T])=>u(T.compMod,["type","mode"])).map(([g,T])=>{let y=c(g),E=T.compMod.newField.mode||T.compMod.newField.type;return a.alterTypeChangeAttributeType(p,y,E)}).map(g=>Vn.getInstance([g],!0,!1));return[...d,...h].filter(Boolean)},"getModifyColumnOfTypeScriptDtos");i_.exports={getCreateUdtScriptDto:Yx,getDeleteUdtScriptDto:Qx,getAddColumnToTypeScriptDtos:zx,getDeleteColumnFromTypeScriptDtos:Xx,getModifyColumnOfTypeScriptDtos:Zx}});var c_=U((GP,u_)=>{"use strict";var{AlterScriptDto:a_}=$e(),o_=s(t=>{var n,i;return((i=(n=t==null?void 0:t.role)==null?void 0:n.compMod)==null?void 0:i.description)||{}},"extractDescription"),jx=s((t,n)=>i=>{let{getFullViewName:a,wrapComment:u}=j(),c=o_(i);if(c.new&&c.new!==c.old){let p=u(c.new),d=a(i),h=n.updateViewComment(d,p);return a_.getInstance([h],!0,!1)}},"getUpsertCommentsScriptDto"),Jx=s((t,n)=>i=>{let a=o_(i),{getFullViewName:u}=j();if(a.old&&!a.new){let c=u(i),p=n.dropViewComment(c);return a_.getInstance([p],!0,!0)}},"getDropCommentsScriptDto"),e1=s((t,n)=>i=>{let a=jx(t,n)(i),u=Jx(t,n)(i);return[a,u].filter(Boolean)},"getModifyViewCommentsScriptDtos");u_.exports={getModifyViewCommentsScriptDtos:e1}});var f_=U((HP,p_)=>{"use strict";var{getModifyViewCommentsScriptDtos:t1}=c_(),{AlterScriptDto:l_}=$e(),n1=s(t=>n=>{let i=Ve()(null,null,t),a={name:n.code||n.name,keys:[],schemaData:{schemaName:""}},u=i.hydrateView({viewData:a,entityData:[n]}),c=i.createView(u,{},n.isActivated);return l_.getInstance([c],!0,!1)},"getAddViewScriptDto"),r1=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t),{wrapInQuotes:u}=j(),c=u(n.code||n.name),p=a.dropView(c);return l_.getInstance([p],!0,!0)},"getDeleteViewScriptDto"),i1=s(t=>n=>{let i=t.require("lodash"),a=Ve()(null,null,t);return[...t1(i,a)(n)].filter(Boolean)},"getModifyViewScriptDtos");p_.exports={getAddViewScriptDto:n1,getDeleteViewScriptDto:r1,getModifyViewScriptDtos:i1}});var m_=U((YP,d_)=>{"use strict";var Pc=class Pc{isActivated;name};s(Pc,"AlterRelationshipFKField");var wc=Pc,Mc=class Mc{bucket;collection};s(Mc,"AlterRelationshipParentDto");var Oc=Mc,Fc=class Fc{bucket;collection};s(Fc,"AlterRelationshipChildDto");var Rc=Fc,Uc=class Uc{relationshipOnDelete;relationshipOnUpdate;relationshipMatch};s(Uc,"AlterRelationshipCustomProperties");var xc=Uc,Bc=class Bc{created;deleted;modified;parent;child;name;description;customProperties;isActivated};s(Bc,"AlterRelationshipRoleCompModDto");var Dc=Bc,$c=class $c{id;name;relationshipType;parentField;parentCardinality;childField;isActivated;childCardinality;parentCollection;childCollection;hackoladeStyles;compMod;roleType};s($c,"AlterRelationshipRoleDto");var qc=$c,Kc=class Kc{type;isActivated;unique;subtype;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};s(Kc,"AlterRelationshipDto");var Lc=Kc;d_.exports={AlterRelationshipRoleCompModDto:Dc,AlterRelationshipRoleDto:qc,AlterRelationshipDto:Lc,AlterRelationshipFKField:wc,AlterRelationshipParentDto:Oc,AlterRelationshipChildDto:Rc,AlterRelationshipCustomProperties:xc}});var T_=U((XP,E_)=>{"use strict";var{AlterScriptDto:kc}=$e(),{AlterRelationshipDto:zP}=m_(),xs=s(t=>t.role.name,"getRelationshipName"),s1=s(t=>n=>{let{getNamePrefixedWithSchemaName:i}=j(),a=n.role.compMod,u=a.child.bucket.name,c=a.child.collection.name;return i(c,u)},"getFullChildTableName"),h_=s((t,n)=>i=>{var c,p,d,h,g;let a=i.role.compMod,u=((c=a.name)==null?void 0:c.new)||xs(i)||"";return t.createForeignKey({name:u,foreignKey:a.child.collection.fkFields,primaryKey:a.parent.collection.fkFields,customProperties:(p=a.customProperties)==null?void 0:p.new,foreignTable:a.child.collection.name,foreignSchemaName:a.child.bucket.name,foreignTableActivated:a.child.collection.isActivated,primaryTable:a.parent.collection.name,primarySchemaName:a.parent.bucket.name,primaryTableActivated:a.parent.collection.isActivated,isActivated:!!((g=(h=(d=i.role)==null?void 0:d.compMod)==null?void 0:h.isActivated)!=null&&g.new)})},"getAddSingleForeignKeyStatementDto"),g_=s(t=>{var i,a,u,c,p,d,h,g,T,y,E;let n=t.role.compMod;return n?[((i=n.name)==null?void 0:i.new)||xs(t),(a=n.parent)==null?void 0:a.bucket,(u=n.parent)==null?void 0:u.collection,(d=(p=(c=n.parent)==null?void 0:c.collection)==null?void 0:p.fkFields)==null?void 0:d.length,(h=n.child)==null?void 0:h.bucket,(g=n.child)==null?void 0:g.collection,(E=(y=(T=n.child)==null?void 0:T.collection)==null?void 0:y.fkFields)==null?void 0:E.length].every(S=>!!S):!1},"canRelationshipBeAdded"),a1=s((t,n)=>i=>i.filter(a=>g_(a)).map(a=>{let u=h_(t,n)(a);return kc.getInstance([u.statement],u.isActivated,!1)}).filter(Boolean).filter(a=>a.scripts.some(u=>!!u.script)),"getAddForeignKeyScriptDtos"),__=s((t,n)=>i=>{var y,E,S,C;let{wrapInQuotes:a}=j(),u=i.role.compMod,c=s1(n)(i),p=((y=u.name)==null?void 0:y.old)||xs(i)||"",d=a(p),h=t.dropForeignKey(c,d),g=!!((C=(S=(E=i.role)==null?void 0:E.compMod)==null?void 0:S.isActivated)!=null&&C.new),T=u.child.collection.isActivated;return{statement:h,isActivated:g&&T}},"getDeleteSingleForeignKeyStatementDto"),y_=s(t=>{var i,a,u;let n=t.role.compMod;return n?[((i=n.name)==null?void 0:i.old)||xs(t),(a=n.child)==null?void 0:a.bucket,(u=n.child)==null?void 0:u.collection].every(c=>!!c):!1},"canRelationshipBeDeleted"),o1=s((t,n)=>i=>i.filter(a=>y_(a)).map(a=>{let u=__(t,n)(a);return kc.getInstance([u.statement],u.isActivated,!0)}).filter(Boolean).filter(a=>a.scripts.some(u=>!!u.script)),"getDeleteForeignKeyScriptDtos"),u1=s((t,n)=>i=>i.filter(a=>g_(a)&&y_(a)).map(a=>{let u=__(t,n)(a),c=h_(t,n)(a),p=c.isActivated&&u.isActivated;return kc.getDropAndRecreateInstance(u.statement,c.statement,p)}).filter(Boolean).filter(a=>a.scripts.some(u=>!!u.script)),"getModifyForeignKeyScriptDtos");E_.exports={getDeleteForeignKeyScriptDtos:o1,getModifyForeignKeyScriptDtos:u1,getAddForeignKeyScriptDtos:a1}});var Zc=U((jP,S_)=>{"use strict";var Yc=class Yc{message;stack};s(Yc,"PluginError");var Gc=Yc,Qc=class Qc{require};s(Qc,"App");var Wc=Qc,zc=class zc{log;clear};s(zc,"Logger");var Hc=zc,Xc=class Xc{jsonSchema;modelDefinitions;internalDefinitions;externalDefinitions;containerData;entityData;entities;views;viewData;relationships;collectionRefsDefinitionsMap;isUpdateScript;level;host;clusterId;accessToken;applyToInstanceQueryRequestTimeout;script;hiddenKeys;options;modelData};s(Xc,"CoreData");var Vc=Xc;S_.exports={App:Wc,CoreData:Vc,Logger:Hc,PluginError:Gc}});var C_=U((eM,A_)=>{"use strict";var al=class al{name;isActivated};s(al,"ContainerJsonSchema");var jc=al,ol=class ol{backgroundColor};s(ol,"ContainerStyles");var Jc=ol,ul=class ul{collectionName;isActivated;bucketId;additionalProperties;tableIfNotExists};s(ul,"EntityData");var el=ul,cl=class cl{$schema;type;GUID};s(cl,"InternalDefinitions");var tl=cl,ll=class ll{$schema;type;GUID};s(ll,"ModelDefinitions");var nl=ll,pl=class pl{$schema;type;GUID};s(pl,"ExternalDefinitions");var rl=pl,fl=class fl{type;isActivated;mode;subtype;compositeKey;compositePartitionKey;compositeClusteringKey;compositePrimaryKey;compositeUniqueKey;GUID};s(fl,"FieldJsonSchema");var il=fl,dl=class dl{$schema;type;title;properties;isActivated;additionalProperties;tableIfNotExists;GUID};s(dl,"EntityJsonSchema");var sl=dl;A_.exports={ContainerJsonSchema:jc,ContainerStyles:Jc,EntityData:el,InternalDefinitions:tl,ModelDefinitions:nl,ExternalDefinitions:rl,FieldJsonSchema:il,EntityJsonSchema:sl}});var Ds=U((nM,v_)=>{"use strict";v_.exports=Ve()});var b_=U((iM,N_)=>{"use strict";var{AlterScriptDto:si}=$e(),{App:rM}=Zc(),c1="sequences",l1=s(({app:t})=>({container:n})=>{var p;let i=t.require("lodash"),a=Ds()(null,null,t),{getDbName:u}=j(),c=u([n.role]);return(((p=n.role)==null?void 0:p.sequences)||[]).map(d=>a.createSchemaSequence({schemaName:c,sequence:d})).map(d=>si.getInstance([d],!0,!1)).filter(Boolean)},"getAddContainerSequencesScriptDtos"),p1=s(({app:t})=>({container:n})=>{var I,N;let i=t.require("lodash"),a=Ds()(null,null,t),{getDbName:u,getGroupItemsByCompMode:c}=j(),p=u([n.role]),d=((N=(I=n.role)==null?void 0:I.compMod)==null?void 0:N[c1])||{},{new:h=[],old:g=[]}=d,{removed:T,added:y,modified:E}=c({newItems:h,oldItems:g}),S=T.map(F=>a.dropSchemaSequence({schemaName:p,sequence:F})).map(F=>si.getInstance([F],!0,!0)),C=y.map(F=>a.createSchemaSequence({schemaName:p,sequence:F})).map(F=>si.getInstance([F],!0,!1));return[...E.map(F=>{let q=i.find(g,{id:F.id})||{};return a.alterSchemaSequence({schemaName:p,sequence:F,oldSequence:q})}).map(F=>si.getInstance([F],!0,!1)),...S,...C].filter(Boolean)},"getModifyContainerSequencesScriptDtos"),f1=s(({app:t})=>({container:n})=>{var p;let i=t.require("lodash"),a=Ds()(null,null,t),{getDbName:u}=j(),c=u([n.role]);return(((p=n.role)==null?void 0:p.sequences)||[]).map(d=>a.dropSchemaSequence({schemaName:c,sequence:d})).map(d=>si.getInstance([d],!0,!0)).filter(Boolean)},"getDeleteContainerSequencesScriptDtos");N_.exports={getAddContainerSequencesScriptDtos:l1,getModifyContainerSequencesScriptDtos:p1,getDeleteContainerSequencesScriptDtos:f1}});var w_=U((dM,I_)=>{"use strict";var{getAddContainerScriptDto:d1,getDeleteContainerScriptDto:m1,getModifyContainerScriptDtos:h1}=pg(),{getAddCollectionScriptDto:g1,getDeleteCollectionScriptDto:_1,getAddColumnScriptDtos:y1,getDeleteColumnScriptDtos:E1,getModifyColumnScriptDtos:T1,getModifyCollectionScriptDtos:S1}=r_(),{getDeleteUdtScriptDto:A1,getCreateUdtScriptDto:C1,getAddColumnToTypeScriptDtos:v1,getDeleteColumnFromTypeScriptDtos:N1,getModifyColumnOfTypeScriptDtos:b1}=s_(),{getAddViewScriptDto:I1,getDeleteViewScriptDto:w1,getModifyViewScriptDtos:O1}=f_(),{getModifyForeignKeyScriptDtos:R1,getDeleteForeignKeyScriptDtos:x1,getAddForeignKeyScriptDtos:D1}=T_(),{AlterScriptDto:aM,ModificationScript:oM}=$e(),{App:uM,CoreData:cM}=Zc(),{InternalDefinitions:lM,ModelDefinitions:pM,ExternalDefinitions:fM}=C_(),{getModifyContainerSequencesScriptDtos:q1,getDeleteContainerSequencesScriptDtos:L1,getAddContainerSequencesScriptDtos:P1}=b_(),M1=s(({collection:t,app:n})=>{var h,g,T,y,E,S,C,x,I,N,F,q;let i=(y=(T=(g=(h=t.properties)==null?void 0:h.containers)==null?void 0:g.properties)==null?void 0:T.added)==null?void 0:y.items,a=(x=(C=(S=(E=t.properties)==null?void 0:E.containers)==null?void 0:S.properties)==null?void 0:C.deleted)==null?void 0:x.items,u=(q=(F=(N=(I=t.properties)==null?void 0:I.containers)==null?void 0:N.properties)==null?void 0:F.modified)==null?void 0:q.items,c=[].concat(i).filter(Boolean).map($=>d1(n)(Object.keys($.properties)[0])),p=[].concat(a).filter(Boolean).map($=>m1(n)(Object.keys($.properties)[0])),d=[].concat(u).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>h1(n)($));return[...c,...p,...d].filter(Boolean)},"getAlterContainersScriptDtos"),F1=s(({collection:t,app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c})=>{var x,I,N,F,q,$,k,V,ie,K,Q,Ee;let p=[].concat((F=(N=(I=(x=t.properties)==null?void 0:x.entities)==null?void 0:I.properties)==null?void 0:N.added)==null?void 0:F.items).filter(Boolean).map(se=>Object.values(se.properties)[0]),d=[].concat((V=(k=($=(q=t.properties)==null?void 0:q.entities)==null?void 0:$.properties)==null?void 0:k.deleted)==null?void 0:V.items).filter(Boolean).map(se=>Object.values(se.properties)[0]),h=[].concat((Ee=(Q=(K=(ie=t.properties)==null?void 0:ie.entities)==null?void 0:K.properties)==null?void 0:Q.modified)==null?void 0:Ee.items).filter(Boolean).map(se=>Object.values(se.properties)[0]),g=p.filter(se=>{var Oe;return(Oe=se.compMod)==null?void 0:Oe.created}).map(g1({app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c})),T=d.filter(se=>{var Oe;return(Oe=se.compMod)==null?void 0:Oe.deleted}).map(_1(n)),y=h.flatMap(S1({app:n,dbVersion:i})),E=p.filter(se=>{var Oe;return!((Oe=se==null?void 0:se.compMod)!=null&&Oe.created)}).flatMap(y1({app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c})),S=d.filter(se=>{var Oe;return!((Oe=se==null?void 0:se.compMod)!=null&&Oe.deleted)}).flatMap(E1(n)),C=h.flatMap(T1({app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c}));return[...g,...T,...y,...E,...S,...C].filter(Boolean)},"getAlterCollectionsScriptDtos"),U1=s((t,n)=>{var c,p,d,h,g,T,y,E,S,C,x,I;let i=[].concat((h=(d=(p=(c=t.properties)==null?void 0:c.views)==null?void 0:p.properties)==null?void 0:d.added)==null?void 0:h.items).filter(Boolean).map(N=>Object.values(N.properties)[0]).map(N=>({...N,...N.role||{}})).filter(N=>{var F;return((F=N.compMod)==null?void 0:F.created)&&N.selectStatement}).map(I1(n)),a=[].concat((E=(y=(T=(g=t.properties)==null?void 0:g.views)==null?void 0:T.properties)==null?void 0:y.deleted)==null?void 0:E.items).filter(Boolean).map(N=>Object.values(N.properties)[0]).map(N=>({...N,...N.role||{}})).map(w1(n)),u=[].concat((I=(x=(C=(S=t.properties)==null?void 0:S.views)==null?void 0:C.properties)==null?void 0:x.modified)==null?void 0:I.items).filter(Boolean).map(N=>Object.values(N.properties)[0]).map(N=>({...N,...N.role||{}})).flatMap(N=>O1(n)(N));return[...a,...i,...u].filter(Boolean)},"getAlterViewScriptDtos"),B1=s(({collection:t,app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c})=>{var y,E,S,C,x,I,N,F,q,$,k,V,ie,K,Q,Ee,se,Oe,Gt,ft;let p=[].concat((C=(S=(E=(y=t.properties)==null?void 0:y.modelDefinitions)==null?void 0:E.properties)==null?void 0:S.added)==null?void 0:C.items).filter(Boolean).map(Z=>Object.values(Z.properties)[0]).map(Z=>({...Z,...n.require("lodash").omit(Z.role,"properties")||{}})).filter(Z=>{var Ye;return(Ye=Z.compMod)==null?void 0:Ye.created}).map(C1({app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c})),d=[].concat((F=(N=(I=(x=t.properties)==null?void 0:x.modelDefinitions)==null?void 0:I.properties)==null?void 0:N.deleted)==null?void 0:F.items).filter(Boolean).map(Z=>Object.values(Z.properties)[0]).map(Z=>({...Z,...n.require("lodash").omit(Z.role,"properties")||{}})).filter(Z=>{var Ye;return(Ye=Z.compMod)==null?void 0:Ye.deleted}).map(A1(n)),h=[].concat((V=(k=($=(q=t.properties)==null?void 0:q.modelDefinitions)==null?void 0:$.properties)==null?void 0:k.added)==null?void 0:V.items).filter(Boolean).map(Z=>Object.values(Z.properties)[0]).filter(Z=>!Z.compMod).map(Z=>({...Z,...n.require("lodash").omit(Z.role,"properties")||{}})).filter(Z=>Z.childType==="composite").flatMap(v1({app:n,dbVersion:i,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c})),g=[].concat((Ee=(Q=(K=(ie=t.properties)==null?void 0:ie.modelDefinitions)==null?void 0:K.properties)==null?void 0:Q.deleted)==null?void 0:Ee.items).filter(Boolean).map(Z=>Object.values(Z.properties)[0]).filter(Z=>!Z.compMod).map(Z=>({...Z,...n.require("lodash").omit(Z.role,"properties")||{}})).filter(Z=>Z.childType==="composite").flatMap(N1(n)),T=[].concat((ft=(Gt=(Oe=(se=t.properties)==null?void 0:se.modelDefinitions)==null?void 0:Oe.properties)==null?void 0:Gt.modified)==null?void 0:ft.items).filter(Boolean).map(Z=>Object.values(Z.properties)[0]).filter(Z=>!Z.compMod).map(Z=>({...Z,...n.require("lodash").omit(Z.role,"properties")||{}})).filter(Z=>Z.childType==="composite").flatMap(b1(n));return[...d,...p,...h,...g,...T].filter(Boolean)},"getAlterModelDefinitionsScriptDtos"),$1=s(({collection:t,app:n})=>{var T,y,E,S,C,x,I,N,F,q,$,k;let i=n.require("lodash"),a=Ve()(null,null,n),u=[].concat((S=(E=(y=(T=t.properties)==null?void 0:T.relationships)==null?void 0:y.properties)==null?void 0:E.added)==null?void 0:S.items).filter(Boolean).map(V=>Object.values(V.properties)[0]).filter(V=>{var ie,K;return(K=(ie=V==null?void 0:V.role)==null?void 0:ie.compMod)==null?void 0:K.created}),c=[].concat((N=(I=(x=(C=t.properties)==null?void 0:C.relationships)==null?void 0:x.properties)==null?void 0:I.deleted)==null?void 0:N.items).filter(Boolean).map(V=>Object.values(V.properties)[0]).filter(V=>{var ie,K;return(K=(ie=V==null?void 0:V.role)==null?void 0:ie.compMod)==null?void 0:K.deleted}),p=[].concat((k=($=(q=(F=t.properties)==null?void 0:F.relationships)==null?void 0:q.properties)==null?void 0:$.modified)==null?void 0:k.items).filter(Boolean).map(V=>Object.values(V.properties)[0]).filter(V=>{var ie,K;return(K=(ie=V==null?void 0:V.role)==null?void 0:ie.compMod)==null?void 0:K.modified}),d=x1(a,i)(c),h=D1(a,i)(u),g=R1(a,i)(p);return[...d,...h,...g].filter(Boolean)},"getAlterRelationshipsScriptDtos"),K1=s(t=>{if(!t)return;let n=t.scripts.map(i=>({...i,script:(i.script||"").trim()})).filter(i=>!!i.script);if(n.length)return{...t,scripts:n}},"prettifyAlterScriptDto"),k1=s(({collection:t,app:n})=>{var h,g,T,y,E,S,C,x,I,N,F,q;let i=(y=(T=(g=(h=t.properties)==null?void 0:h.containers)==null?void 0:g.properties)==null?void 0:T.added)==null?void 0:y.items,a=(x=(C=(S=(E=t.properties)==null?void 0:E.containers)==null?void 0:S.properties)==null?void 0:C.deleted)==null?void 0:x.items,u=(q=(F=(N=(I=t.properties)==null?void 0:I.containers)==null?void 0:N.properties)==null?void 0:F.modified)==null?void 0:q.items,c=[].concat(i).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>P1({app:n})({container:$})),p=[].concat(a).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>L1({app:n})({container:$})),d=[].concat(u).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>q1({app:n})({container:$}));return[...c,...p,...d].filter(Boolean)},"getAlterContainersSequencesScriptDtos"),G1=s((t,n)=>{var S;let i=JSON.parse(t.jsonSchema);if(!i)throw new Error('"comparisonModelCollection" is not found. Alter script can be generated only from Delta model');let a=JSON.parse(t.modelDefinitions),u=JSON.parse(t.internalDefinitions),c=JSON.parse(t.externalDefinitions),p=(S=t.modelData[0])==null?void 0:S.dbVersion,d=M1({collection:i,app:n}),h=F1({collection:i,app:n,dbVersion:p,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c}),g=U1(i,n),T=B1({collection:i,app:n,dbVersion:p,modelDefinitions:a,internalDefinitions:u,externalDefinitions:c}),y=$1({collection:i,app:n}),E=k1({collection:i,app:n});return[...d,...T,...h,...E,...g,...y].filter(Boolean).map(C=>K1(C)).filter(Boolean)},"getAlterScriptDtos");I_.exports={getAlterScriptDtos:G1}});var D_=U((gM,x_)=>{"use strict";var{getAlterScriptDtos:qs}=w_(),{AlterScriptDto:hM}=$e(),O_=s(t=>(n,i)=>{let{commentIfDeactivated:a}=j();return n.map(u=>u.isActivated===!1?u.scripts.map(c=>a(c.script,{isActivated:!1,isPartOfLine:!1})):i?u.scripts.map(c=>c.script):u.scripts.map(c=>a(c.script,{isActivated:!c.isDropScript,isPartOfLine:!1}))).flat().filter(Boolean).map(u=>u.trim()).filter(Boolean).join(`

`)},"joinAlterScriptDtosIntoScript"),W1=s((t,n)=>{var c,p;let i=n.require("lodash"),a=qs(t,n),u=(p=(c=t.options)==null?void 0:c.additionalOptions)==null?void 0:p.some(d=>d.id==="applyDropStatements"&&d.value);return O_(i)(a,u)},"buildEntityLevelAlterScript"),H1=s((t,n)=>qs(t,n).some(a=>a.isActivated&&a.scripts.some(u=>u.isDropScript)),"doesEntityLevelAlterScriptContainDropStatements"),R_=s(t=>({...t,jsonSchema:t.collections[0],internalDefinitions:Object.values(t.internalDefinitions)[0]}),"mapCoreDataForContainerLevelScripts"),V1=s((t,n)=>{var p,d;let i=R_(t),a=n.require("lodash"),u=qs(i,n),c=(d=(p=i.options)==null?void 0:p.additionalOptions)==null?void 0:d.some(h=>h.id==="applyDropStatements"&&h.value);return O_(a)(u,c)},"buildContainerLevelAlterScript"),Y1=s((t,n)=>{let i=R_(t);return qs(i,n).some(u=>u.isActivated&&u.scripts.some(c=>c.isDropScript))},"doesContainerLevelAlterScriptContainDropStatements");x_.exports={buildEntityLevelAlterScript:W1,doesEntityLevelAlterScriptContainDropStatements:H1,buildContainerLevelAlterScript:V1,doesContainerLevelAlterScriptContainDropStatements:Y1}});var q_=lh(),{createLogger:Q1}=no(),z1=fh(),{buildEntityLevelAlterScript:X1,buildContainerLevelAlterScript:Z1,doesContainerLevelAlterScriptContainDropStatements:j1,doesEntityLevelAlterScriptContainDropStatements:J1}=D_();module.exports={generateScript(t,n,i,a){try{let u=X1(t,a);i(null,u)}catch(u){n.log("error",{message:u.message,stack:u.stack},"PostgreSQL Forward-Engineering Error"),i({message:u.message,stack:u.stack})}},generateViewScript(t,n,i,a){i(new Error("Forward-Engineering of delta model on view level is not supported"))},generateContainerScript(t,n,i,a){try{let u=Z1(t,a);i(null,u)}catch(u){n.log("error",{message:u.message,stack:u.stack},"PostgreSQL Forward-Engineering Error"),i({message:u.message,stack:u.stack})}},getDatabases(t,n,i,a){n.progress({message:"Find all databases"}),q_.getDatabases(t,n,i,a)},applyToInstance(t,n,i,a){n.clear(),n.log("info",a.require("lodash").omit(t,"script","containerData"),"connectionInfo",t.hiddenKeys);let u=Q1({title:"Apply to instance",hiddenKeys:t.hiddenKeys,logger:n});z1.applyToInstance(t,u,a).then(i,i)},testConnection(t,n,i,a){q_.testConnection(t,n,i,a).then(i,i)},isDropInStatements(t,n,i,a){try{if(t.level==="container"){let u=j1(t,a);i(null,u)}else{let u=J1(t,a);i(null,u)}}catch(u){i({message:u.message,stack:u.stack})}}};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
